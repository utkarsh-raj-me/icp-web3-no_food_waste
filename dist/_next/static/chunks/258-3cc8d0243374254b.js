(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[258],{9201:function(e,t,r){"use strict";var n,i;r.d(t,{u:function(){return n}}),(i=n||(n={}))[i.SysFatal=1]="SysFatal",i[i.SysTransient=2]="SysTransient",i[i.DestinationInvalid=3]="DestinationInvalid",i[i.CanisterReject=4]="CanisterReject",i[i.CanisterError=5]="CanisterError"},9503:function(e,t,r){"use strict";r.d(t,{Ql:function(){return a},dk:function(){return o},pH:function(){return i},wO:function(){return s}});var n=r(158);class i extends n.e${constructor(e,t){super(e),this.response=t,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}class s extends n.e${constructor(e,t,r,n,i,s){super(e),this.response=t,this.requestId=r,this.senderPubkey=n,this.senderSig=i,this.ingressExpiry=s,this.name="AgentCallError",Object.setPrototypeOf(this,new.target.prototype)}}class a extends n.e${constructor(e,t,r,n,i,s){super(e),this.response=t,this.requestId=r,this.senderPubkey=n,this.senderSig=i,this.ingressExpiry=s,this.name="AgentQueryError",Object.setPrototypeOf(this,new.target.prototype)}}class o extends n.e${constructor(e,t,r,n,i,s){super(e),this.response=t,this.requestId=r,this.senderPubkey=n,this.senderSig=i,this.ingressExpiry=s,this.name="AgentReadStateError",Object.setPrototypeOf(this,new.target.prototype)}}},6464:function(e,t,r){"use strict";r.d(t,{i7:function(){return eh},t_:function(){return ec},bN:function(){return C}});var n,i,s,a,o,u,c,f,l,h,d,p,y,g,b,m,w,v,E,_,B,I,x,A,T,S,N,O,R,U,P,L,k,F,j,C,D=r(8615),M=r(158),V=r(4401),q=r(352),$=r(7543),z=r(76),H=r(5617),K=r(5754),G=r(9503),W=r(6814),Z=r(5934),Y=r(7815),J=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},Q=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class X{constructor(e={}){i.set(this,void 0),s.set(this,void 0),this[a]=this.entries.bind(this),this[o]="ExpirableMap";let{source:t=[],expirationTime:r=6e5}=e,n=Date.now();J(this,i,new Map([...t].map(([e,t])=>[e,{value:t,timestamp:n}])),"f"),J(this,s,r,"f")}prune(){let e=Date.now();for(let[t,r]of Q(this,i,"f").entries())e-r.timestamp>Q(this,s,"f")&&Q(this,i,"f").delete(t);return this}set(e,t){this.prune();let r={value:t,timestamp:Date.now()};return Q(this,i,"f").set(e,r),this}get(e){let t=Q(this,i,"f").get(e);if(void 0!==t){if(Date.now()-t.timestamp>Q(this,s,"f")){Q(this,i,"f").delete(e);return}return t.value}}clear(){Q(this,i,"f").clear()}entries(){let e=Q(this,i,"f").entries(),t=function*(){for(let[t,r]of e)yield[t,r.value]};return t()}values(){let e=Q(this,i,"f").values(),t=function*(){for(let t of e)yield t.value};return t()}keys(){return Q(this,i,"f").keys()}forEach(e,t){for(let[r,n]of Q(this,i,"f").entries())e.call(t,n.value,r,this)}has(e){return Q(this,i,"f").has(e)}delete(e){return Q(this,i,"f").delete(e)}get size(){return Q(this,i,"f").size}}i=new WeakMap,s=new WeakMap,a=Symbol.iterator,o=Symbol.toStringTag;var ee=r(6412),et=r(792);class er{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(t=>t!==e)}notify(e,...t){this.observers.forEach(r=>r(e,...t))}}class en extends er{constructor(){super()}print(e,...t){this.notify({message:e,level:"info"},...t)}warn(e,...t){this.notify({message:e,level:"warn"},...t)}error(e,t,...r){this.notify({message:e,level:"error",error:t},...r)}}var ei=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},es=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class ea{constructor(e=ea.default){u.set(this,void 0),c.set(this,void 0),f.set(this,void 0),l.set(this,void 0),h.set(this,void 0),d.set(this,void 0),p.set(this,void 0),y.set(this,void 0),g.set(this,0);let{initialInterval:t=500,randomizationFactor:r=.5,multiplier:n=1.5,maxInterval:i=6e4,maxElapsedTime:s=9e5,maxIterations:a=10,date:o=Date}=e;ei(this,u,t,"f"),ei(this,c,r,"f"),ei(this,f,n,"f"),ei(this,l,i,"f"),ei(this,y,o,"f"),ei(this,h,o.now(),"f"),ei(this,d,s,"f"),ei(this,p,a,"f")}get ellapsedTimeInMsec(){return es(this,y,"f").now()-es(this,h,"f")}get currentInterval(){return es(this,u,"f")}get count(){return es(this,g,"f")}get randomValueFromInterval(){let e=es(this,c,"f")*es(this,u,"f"),t=es(this,u,"f")-e,r=es(this,u,"f")+e;return Math.random()*(r-t)+t}incrementCurrentInterval(){var e;return ei(this,u,Math.min(es(this,u,"f")*es(this,f,"f"),es(this,l,"f")),"f"),ei(this,g,(e=es(this,g,"f"),++e),"f"),es(this,u,"f")}next(){return this.ellapsedTimeInMsec>=es(this,d,"f")||es(this,g,"f")>=es(this,p,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}u=new WeakMap,c=new WeakMap,f=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap,p=new WeakMap,y=new WeakMap,g=new WeakMap,ea.default={initialInterval:500,randomizationFactor:.5,multiplier:1.5,maxInterval:6e4,maxElapsedTime:9e5,maxIterations:10,date:Date};var eo=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},eu=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};(n=C||(C={})).Received="received",n.Processing="processing",n.Replied="replied",n.Rejected="rejected",n.Unknown="unknown",n.Done="done";let ec="aaaaa-aa";class ef extends M.e${constructor(e){super(e),this.message=e}}class el extends M.e${constructor(e){super(e),this.message=e}}class eh{constructor(e={}){var t,n;b.add(this),m.set(this,null),w.set(this,!1),v.set(this,void 0),E.set(this,void 0),_.set(this,void 0),B.set(this,void 0),I.set(this,0),x.set(this,void 0),A.set(this,void 0),T.set(this,void 0),S.set(this,void 0),this._isAgent=!0,this.config={},N.set(this,0),this.log=new en,O.set(this,[]),R.set(this,[]),U.set(this,new X({expirationTime:3e5})),P.set(this,!0),F.set(this,(e,t)=>{if(!1===eu(this,P,"f"))return e;if(!t)throw new Z.kt("Invalid signature from replica signed query: no matching node key found.");let{status:r,signatures:n=[],requestId:i}=e,s=new TextEncoder().encode("\vic-response");for(let a of n){let n;let{timestamp:o,identity:u}=a,c=D.R.fromUint8Array(u).toText();if("replied"===r){let{reply:t}=e;n=(0,$.E$)({status:r,reply:t,timestamp:BigInt(o),request_id:i})}else if("rejected"===r){let{reject_code:t,reject_message:s,error_code:a}=e;n=(0,$.E$)({status:r,reject_code:t,reject_message:s,error_code:a,timestamp:BigInt(o),request_id:i})}else throw Error(`Unknown status: ${r}`);let f=(0,z.zo)(s,new Uint8Array(n)),l=null==t?void 0:t.nodeKeys.get(c);if(!l)throw new Z.kt("Invalid signature from replica signed query: no matching node key found.");let h=ee.E.fromDer(l).rawKey,d=Y.UN.verify(a.signature,new Uint8Array(f),new Uint8Array(h));if(d)break;throw new Z.kt(`Invalid signature from replica ${c} signed query.`)}return e}),this.config=e,eo(this,E,e.fetch||function(){let e;if("undefined"!=typeof window){if(window.fetch)e=window.fetch.bind(window);else throw new ef("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.")}else if(void 0!==r.g){if(r.g.fetch)e=r.g.fetch.bind(r.g);else throw new ef("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.")}else"undefined"!=typeof self&&self.fetch&&(e=self.fetch.bind(self));if(e)return e;throw new ef("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}()||fetch.bind(r.g),"f"),eo(this,_,e.fetchOptions,"f"),eo(this,B,e.callOptions,"f"),eo(this,w,null!==(t=e.shouldFetchRootKey)&&void 0!==t&&t,"f"),e.rootKey?this.rootKey=e.rootKey:eu(this,w,"f")?this.rootKey=null:this.rootKey=(0,z.H_)("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae");let i=function(e){let t;if(void 0!==e)t=new URL(e.match(/^[a-z]+:/)||"undefined"==typeof window?e:window.location.protocol+"//"+e);else{let e;let r="undefined"!=typeof window?window.location:void 0,n=null==r?void 0:r.hostname;n&&"string"==typeof n&&(e=[".github.dev",".gitpod.io"].some(e=>n.endsWith(e))?n:["ic0.app","icp0.io","127.0.0.1","localhost"].find(e=>n.endsWith(e))),t=new URL(r&&e?`${r.protocol}//${e}${r.port?":"+r.port:""}`:"https://icp-api.io")}return t.toString()}(e.host);if(this.host=new URL(i),void 0!==e.verifyQuerySignatures&&eo(this,P,e.verifyQuerySignatures,"f"),eo(this,A,null!==(n=e.retryTimes)&&void 0!==n?n:3,"f"),eo(this,T,e.backoffStrategy||(()=>new ea({maxIterations:eu(this,A,"f")})),"f"),this.host.hostname.endsWith(".ic0.app")?this.host.hostname="ic0.app":this.host.hostname.endsWith(".icp0.io")?this.host.hostname="icp0.io":this.host.hostname.endsWith(".icp-api.io")&&(this.host.hostname="icp-api.io"),e.credentials){let{name:t,password:r}=e.credentials;eo(this,x,`${t}${r?":"+r:""}`,"f")}if(eo(this,v,Promise.resolve(e.identity||new V.ed),"f"),e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes>5)throw new M.e$(`The maximum ingress expiry time is 5 minutes. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);if(e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes<=0)throw new M.e$(`Ingress expiry time must be greater than 0. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);eo(this,S,e.ingressExpiryInMinutes||5,"f"),this.addTransform("update",(0,H.z4)(K.s)),e.useQueryNonces&&this.addTransform("query",(0,H.z4)(K.s)),e.logToConsole&&this.log.subscribe(e=>{"error"===e.level?console.error(e.message):"warn"===e.level?console.warn(e.message):console.log(e.message)})}get waterMark(){return eu(this,N,"f")}static createSync(e={}){return new this(Object.assign({},e))}static async create(e={shouldFetchRootKey:!1}){let t=eh.createSync(e),r=[t.syncTime()];return"https://icp-api.io"!==t.host.toString()&&e.shouldFetchRootKey&&r.push(t.fetchRootKey()),await Promise.all(r),t}static async from(e){var t;try{if("config"in e)return await eh.create(e.config);return await eh.create({fetch:e._fetch,fetchOptions:e._fetchOptions,callOptions:e._callOptions,host:e._host.toString(),identity:null!==(t=e._identity)&&void 0!==t?t:void 0})}catch(e){throw new M.e$("Failed to create agent from provided agent")}}isLocal(){let e=this.host.hostname;return"127.0.0.1"===e||e.endsWith("127.0.0.1")}addTransform(e,t,r=t.priority||0){if("update"===e){let e=eu(this,R,"f").findIndex(e=>(e.priority||0)<r);eu(this,R,"f").splice(e>=0?e:eu(this,R,"f").length,0,Object.assign(t,{priority:r}))}else if("query"===e){let e=eu(this,O,"f").findIndex(e=>(e.priority||0)<r);eu(this,O,"f").splice(e>=0?e:eu(this,O,"f").length,0,Object.assign(t,{priority:r}))}}async getPrincipal(){if(!eu(this,v,"f"))throw new el("This identity has expired due this application's security policy. Please refresh your authentication.");return(await eu(this,v,"f")).getPrincipal()}async call(e,t,r){var n,i,s;await eu(this,b,"m",j).call(this);let a=null===(n=t.callSync)||void 0===n||n,o=await (void 0!==r?await r:await eu(this,v,"f"));if(!o)throw new el("This identity has expired due this application's security policy. Please refresh your authentication.");let u=D.R.from(e),c=t.effectiveCanisterId?D.R.from(t.effectiveCanisterId):u,f=o.getPrincipal()||D.R.anonymous(),l=new H.ZM(6e4*eu(this,S,"f"));Math.abs(eu(this,I,"f"))>3e4&&(l=new H.ZM(6e4*eu(this,S,"f")+eu(this,I,"f")));let h={request_type:K.V.Call,canister_id:u,method_name:t.methodName,arg:t.arg,sender:f,ingress_expiry:l},d=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},eu(this,x,"f")?{Authorization:"Basic "+btoa(eu(this,x,"f"))}:{})},endpoint:"call",body:h}),p=d.body.nonce?(s=d.body.nonce,new Uint8Array(s)):void 0;h.nonce=p,d=await o.transformRequest(d);let y=q.cv(d.body),g=eu(this,T,"f").call(this),m=(0,$.vH)(h);try{let e=eu(this,b,"m",k).call(this,{request:a?()=>(this.log.print(`fetching "/api/v3/canister/${c.toText()}/call" with request:`,d),eu(this,E,"f").call(this,""+new URL(`/api/v3/canister/${c.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},eu(this,B,"f")),d.request),{body:y}))):()=>(this.log.print(`fetching "/api/v2/canister/${c.toText()}/call" with request:`,d),eu(this,E,"f").call(this,""+new URL(`/api/v2/canister/${c.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},eu(this,B,"f")),d.request),{body:y}))),backoff:g,tries:0}),t=await e,r=await t.arrayBuffer(),n=200===t.status&&r.byteLength>0?q.Jx(r):null;if(n&&"certificate"in n){let e=await this.parseTimeFromResponse({certificate:n.certificate});eo(this,N,e,"f")}return{requestId:m,response:{ok:t.ok,status:t.status,statusText:t.statusText,body:n,headers:(0,H.lS)(t.headers)},requestDetails:h}}catch(a){if(a.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(e,Object.assign(Object.assign({},t),{callSync:!1}),r);let n=`Error while making call: ${null!==(i=a.message)&&void 0!==i?i:String(a)}`,s=new G.wO(n,a,(0,z.NC)(m),(0,z.NC)(d.body.sender_pubkey),(0,z.NC)(d.body.sender_sig),String(d.body.content.ingress_expiry._value));throw this.log.error(n,s),s}}async query(e,t,r){var n,i,s,a;let o;await eu(this,b,"m",j).call(this);let u=eu(this,T,"f").call(this),c=t.effectiveCanisterId?D.R.from(t.effectiveCanisterId):D.R.from(e);this.log.print(`ecid ${c.toString()}`),this.log.print(`canisterId ${e.toString()}`);let f=await (void 0!==r?r:eu(this,v,"f"));if(!f)throw new el("This identity has expired due this application's security policy. Please refresh your authentication.");let l=D.R.from(e),h=(null==f?void 0:f.getPrincipal())||D.R.anonymous(),d={request_type:"query",canister_id:l,method_name:t.methodName,arg:t.arg,sender:h,ingress_expiry:new H.ZM(6e4*eu(this,S,"f"))},p=(0,$.vH)(d);o=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},eu(this,x,"f")?{Authorization:"Basic "+btoa(eu(this,x,"f"))}:{})},endpoint:"read",body:d}),o=await (null==f?void 0:f.transformRequest(o));let y=q.cv(o.body),g={canister:l.toText(),ecid:c,transformedRequest:o,body:y,requestId:p,backoff:u,tries:0},m=async()=>({requestDetails:d,query:await eu(this,b,"m",L).call(this,g)}),w=async()=>{if(!eu(this,P,"f"))return;let e=eu(this,U,"f").get(c.toString());return e||(await this.fetchSubnetKeys(c.toString()),eu(this,U,"f").get(c.toString()))};try{let[t,r]=await Promise.all([m(),w()]),{requestDetails:n,query:i}=t,s=Object.assign(Object.assign({},i),{requestDetails:n});if(this.log.print("Query response:",s),!eu(this,P,"f"))return s;try{return eu(this,F,"f").call(this,s,r)}catch(r){this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),eu(this,U,"f").delete(e.toString()),await this.fetchSubnetKeys(c.toString());let t=eu(this,U,"f").get(e.toString());if(!t)throw new Z.kt("Invalid signature from replica signed query: no matching node key found.");return eu(this,F,"f").call(this,s,t)}}catch(r){let e=`Error while making call: ${null!==(n=r.message)&&void 0!==n?n:String(r)}`,t=new G.Ql(e,r,String(p),(0,z.NC)(null===(i=null==o?void 0:o.body)||void 0===i?void 0:i.sender_pubkey),(0,z.NC)(null===(s=null==o?void 0:o.body)||void 0===s?void 0:s.sender_sig),String(null===(a=null==o?void 0:o.body)||void 0===a?void 0:a.content.ingress_expiry._value));throw this.log.error(e,t),t}}async createReadStateRequest(e,t){await eu(this,b,"m",j).call(this);let r=await (void 0!==t?await t:await eu(this,v,"f"));if(!r)throw new el("This identity has expired due this application's security policy. Please refresh your authentication.");let n=(null==r?void 0:r.getPrincipal())||D.R.anonymous(),i=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},eu(this,x,"f")?{Authorization:"Basic "+btoa(eu(this,x,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:e.paths,sender:n,ingress_expiry:new H.ZM(6e4*eu(this,S,"f"))}});return null==r?void 0:r.transformRequest(i)}async readState(e,t,r,n){var i,s,a,o;let u=function(e){for(let t of e.paths){let[e,r]=t,n=new TextEncoder().encode("request_status");if((0,z.IA)(e,n))return r}}(t);await eu(this,b,"m",j).call(this);let c="string"==typeof e?D.R.fromText(e):e,f=null!=n?n:await this.createReadStateRequest(t,r),l=q.cv(f.body);this.log.print(`fetching "/api/v2/canister/${c}/read_state" with request:`,f);let h=eu(this,T,"f").call(this);try{let e=await eu(this,b,"m",k).call(this,{request:()=>eu(this,E,"f").call(this,""+new URL(`/api/v2/canister/${c.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},eu(this,_,"f")),f.request),{body:l})),backoff:h,tries:0});if(!e.ok)throw Error(`Server returned an error:
  Code: ${e.status} (${e.statusText})
  Body: ${await e.text()}
`);let t=q.Jx(await e.arrayBuffer());this.log.print("Read state response:",t);let r=await this.parseTimeFromResponse(t);return r>0&&(this.log.print("Read state response time:",r),eo(this,N,r,"f")),t}catch(r){let e=`Caught exception while attempting to read state: ${null!==(i=r.message)&&void 0!==i?i:String(r)}`,t=new G.dk(e,r,String(u),(0,z.NC)(null===(s=null==f?void 0:f.body)||void 0===s?void 0:s.sender_pubkey),(0,z.NC)(null===(a=null==f?void 0:f.body)||void 0===a?void 0:a.sender_sig),String(null===(o=null==f?void 0:f.body)||void 0===o?void 0:o.content.ingress_expiry._value));throw this.log.error(e,t),t}}async parseTimeFromResponse(e){let t;if(e.certificate){let r=q.Jx(e.certificate);if(r&&"tree"in r)t=r.tree;else throw Error("Could not decode time from response");let n=(0,Z.OZ)(["time"],t);if(n.status!==Z.GT.Found||!(n.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(n))throw Error("Time was not found in the response or was not in its expected format.");let i=(0,et.b)((0,z.rS)(n.value));return this.log.print("Time from response:",i),this.log.print("Time from response in milliseconds:",Number(i)),Number(i)}return this.log.warn("No certificate found in response"),0}async syncTime(e){await eu(this,b,"m",j).call(this);let t=await Promise.resolve().then(r.bind(r,6814)),n=Date.now();try{e||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");let r=eh.createSync({identity:new V.ed,host:this.host.toString(),fetch:eu(this,E,"f"),retryTimes:0}),i=await t.request({canisterId:null!=e?e:D.R.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:r,paths:["time"]}),s=i.get("time");s&&(eo(this,I,Number(s)-Number(n),"f"),this.log.notify({message:`Syncing time: offset of ${eu(this,I,"f")}`,level:"info"}))}catch(e){this.log.error("Caught exception while attempting to sync time",e)}}async status(){let e=eu(this,x,"f")?{Authorization:"Basic "+btoa(eu(this,x,"f"))}:{};this.log.print('fetching "/api/v2/status"');let t=eu(this,T,"f").call(this),r=await eu(this,b,"m",k).call(this,{backoff:t,request:()=>eu(this,E,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:e},eu(this,_,"f"))),tries:0});return q.Jx(await r.arrayBuffer())}async fetchRootKey(){let e;return eu(this,m,"f")||eo(this,m,new Promise((e,t)=>{this.status().then(t=>{let r=t.root_key;this.rootKey=r,e(r)}).catch(t)}),"f"),e=await eu(this,m,"f"),eo(this,m,null,"f"),e}invalidateIdentity(){eo(this,v,null,"f")}replaceIdentity(e){eo(this,v,Promise.resolve(e),"f")}async fetchSubnetKeys(e){await eu(this,b,"m",j).call(this);let t=D.R.from(e),r=await (0,W.request)({canisterId:t,paths:["subnet"],agent:this}),n=r.get("subnet");if(n&&"object"==typeof n&&"nodeKeys"in n)return eu(this,U,"f").set(t.toText(),n),n}_transform(e){let t=Promise.resolve(e);if("call"===e.endpoint)for(let e of eu(this,R,"f"))t=t.then(t=>e(t).then(e=>e||t));else for(let e of eu(this,O,"f"))t=t.then(t=>e(t).then(e=>e||t));return t}}m=new WeakMap,w=new WeakMap,v=new WeakMap,E=new WeakMap,_=new WeakMap,B=new WeakMap,I=new WeakMap,x=new WeakMap,A=new WeakMap,T=new WeakMap,S=new WeakMap,N=new WeakMap,O=new WeakMap,R=new WeakMap,U=new WeakMap,P=new WeakMap,F=new WeakMap,b=new WeakSet,L=async function e(t){var r,n;let i;let{ecid:s,transformedRequest:a,body:o,requestId:u,backoff:c,tries:f}=t,l=0===f?0:c.next();if(this.log.print(`fetching "/api/v2/canister/${s.toString()}/query" with tries:`,{tries:f,backoff:c,delay:l}),null===l)throw new M.e$(`Timestamp failed to pass the watermark after retrying the configured ${eu(this,A,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);l>0&&await new Promise(e=>setTimeout(e,l));try{this.log.print(`fetching "/api/v2/canister/${s.toString()}/query" with request:`,a);let e=await eu(this,E,"f").call(this,""+new URL(`/api/v2/canister/${s.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},eu(this,_,"f")),a.request),{body:o}));if(200===e.status){let t=q.Jx(await e.arrayBuffer());i=Object.assign(Object.assign({},t),{httpDetails:{ok:e.ok,status:e.status,statusText:e.statusText,headers:(0,H.lS)(e.headers)},requestId:u})}else throw new G.pH(`Gateway returned an error:
  Code: ${e.status} (${e.statusText})
  Body: ${await e.text()}
`,{ok:e.ok,status:e.status,statusText:e.statusText,headers:(0,H.lS)(e.headers)})}catch(r){if(f<eu(this,A,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${r}
  Retrying query.`),await eu(this,b,"m",e).call(this,Object.assign(Object.assign({},t),{tries:f+1}));throw r}let h=null===(n=null===(r=i.signatures)||void 0===r?void 0:r[0])||void 0===n?void 0:n.timestamp;if(!eu(this,P,"f"))return i;if(!h)throw Error("Timestamp not found in query response. This suggests a malformed or malicious response.");let d=Number(BigInt(h)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:d}),Number(this.waterMark)>d){let r=new M.e$("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",r,{timestamp:h,waterMark:this.waterMark}),f<eu(this,A,"f"))return await eu(this,b,"m",e).call(this,Object.assign(Object.assign({},t),{tries:f+1}));throw new M.e$(`Timestamp failed to pass the watermark after retrying the configured ${eu(this,A,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return i},k=async function e(t){let r;let{request:n,backoff:i,tries:s}=t,a=0===s?0:i.next();if(null===a)throw new M.e$(`Timestamp failed to pass the watermark after retrying the configured ${eu(this,A,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);a>0&&await new Promise(e=>setTimeout(e,a));try{r=await n()}catch(t){if(eu(this,A,"f")>s)return this.log.warn(`Caught exception while attempting to make request:
  ${t}
  Retrying request.`),await eu(this,b,"m",e).call(this,{request:n,backoff:i,tries:s+1});throw t}if(r.ok)return r;let o=await r.clone().text(),u=`Server returned an error:
  Code: ${r.status} (${r.statusText})
  Body: ${o}
`;if(404===r.status&&r.url.includes("api/v3"))throw new G.pH("v3 api not supported. Fall back to v2",{ok:r.ok,status:r.status,statusText:r.statusText,headers:(0,H.lS)(r.headers)});if(s<eu(this,A,"f"))return await eu(this,b,"m",e).call(this,{request:n,backoff:i,tries:s+1});throw new G.pH(u,{ok:r.ok,status:r.status,statusText:r.statusText,headers:(0,H.lS)(r.headers)})},j=async function(){if(!this.rootKey){if(null===this.rootKey&&eu(this,w,"f"))await this.fetchRootKey();else throw new M.e$(`Invalid root key detected. The root key for this agent is ${this.rootKey} and the shouldFetchRootKey value is set to ${eu(this,w,"f")}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`)}}},5617:function(e,t,r){"use strict";r.d(t,{ZM:function(){return o},lS:function(){return c},z4:function(){return u}});var n=r(8435),i=r(9185),s=r(5754);let a=BigInt(1e6);class o{constructor(e){if(e<9e4){let t=BigInt(Date.now()+e)*a,r=t/BigInt(1e9);this._value=r*BigInt(1e9);return}let t=BigInt(Math.floor(Date.now()+e-6e4))*a,r=t/BigInt(1e9),n=r/BigInt(60),i=n*BigInt(60)*BigInt(1e9);this._value=i}toCBOR(){return i.value.u64(this._value.toString(16),16)}toHash(){return(0,n.dZ)(this._value)}}function u(e=s.s){return async t=>{let r=t.request.headers;t.request.headers=r,"call"===t.endpoint&&(t.body.nonce=e())}}function c(e){let t=[];return e.forEach((e,r)=>{t.push([r,e])}),t}},5754:function(e,t,r){"use strict";var n;r.d(t,{V:function(){return n},s:function(){return s}});let i=()=>{if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){let e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]}if("undefined"!=typeof crypto&&crypto.getRandomValues){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}return"undefined"!=typeof crypto&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(4294967295*Math.random())};function s(){let e=new ArrayBuffer(16),t=new DataView(e),r=i(),n=i(),s=i(),a=i();return t.setUint32(0,r),t.setUint32(4,n),t.setUint32(8,s),t.setUint32(12,a),e}(n||(n={})).Call="call"},1183:function(e,t,r){"use strict";r.d(t,{i7:function(){return a.i7},t_:function(){return a.t_},ur:function(){return s.u},bN:function(){return a.bN},us:function(){return o}});var n,i,s=r(9201),a=r(6464);function o(){let e="undefined"==typeof window?void 0===r.g?"undefined"==typeof self?void 0:self.ic.agent:r.g.ic.agent:window.ic.agent;if(!e)throw Error("No Agent could be found.");return e}r(9503),r(8615),(n=i||(i={})).Error="err",n.GetPrincipal="gp",n.GetPrincipalResponse="gpr",n.Query="q",n.QueryResponse="qr",n.Call="c",n.CallResponse="cr",n.ReadState="rs",n.ReadStateResponse="rsr",n.Status="s",n.StatusResponse="sr"},4401:function(e,t,r){"use strict";r.d(t,{$4:function(){return u},ed:function(){return c}});var n=r(8615),i=r(7543),s=r(76),a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};let o=new TextEncoder().encode("\nic-request");class u{getPrincipal(){return this._principal||(this._principal=n.R.selfAuthenticating(new Uint8Array(this.getPublicKey().toDer()))),this._principal}async transformRequest(e){let{body:t}=e,r=a(e,["body"]),n=(0,i.vH)(t);return Object.assign(Object.assign({},r),{body:{content:t,sender_pubkey:this.getPublicKey().toDer(),sender_sig:await this.sign((0,s.zo)(o,n))}})}}class c{getPrincipal(){return n.R.anonymous()}async transformRequest(e){return Object.assign(Object.assign({},e),{body:{content:e.body}})}}},6814:function(e,t,r){"use strict";r.r(t),r.d(t,{CustomPath:function(){return c},encodePath:function(){return h},fetchNodeKeys:function(){return l},request:function(){return f}});var n=r(8615),i=r(158),s=r(5934),a=r(76),o=r(352),u=r(792);class c{constructor(e,t,r){this.key=e,this.path=t,this.decodeStrategy=r}}let f=async e=>{let{agent:t,paths:r}=e,a=n.R.from(e.canisterId),o=[...new Set(r)],c=o.map(e=>h(e,a)),f=new Map,b=o.map((e,r)=>(async()=>{var n;try{let e=await t.readState(a,{paths:[c[r]]});if(null==t.rootKey)throw Error("Agent is missing root key");let n=await s.KB.create({certificate:e.certificate,rootKey:t.rootKey,canisterId:a,disableTimeVerification:!0}),{path:i,data:b}=((r,n)=>{if("subnet"!==n)return{path:n,data:(0,s.ti)(r.lookup(h(n,a)))};{if(null==t.rootKey)throw Error("Agent is missing root key");let r=l(e.certificate,a,t.rootKey);return{path:n,data:r}}})(n,o[r]);if(b)switch(i){case"time":f.set(i,(0,u.b)(b));break;case"controllers":f.set(i,g(b));break;case"module_hash":f.set(i,d(b));break;case"subnet":f.set(i,b);break;case"candid":f.set(i,new TextDecoder().decode(b));break;default:if("string"!=typeof i&&"key"in i&&"path"in i)switch(i.decodeStrategy){case"raw":f.set(i.key,b);break;case"leb128":f.set(i.key,(0,u.o)(b));break;case"cbor":f.set(i.key,p(b));break;case"hex":f.set(i.key,d(b));break;case"utf-8":f.set(i.key,y(b))}}else console.warn(`Expected to find result for path ${i}, but instead found nothing.`),"string"==typeof i?f.set(i,null):f.set(i.key,null)}catch(t){if(null===(n=null==t?void 0:t.message)||void 0===n?void 0:n.includes("Invalid certificate"))throw new i.e$(t.message);"string"!=typeof e&&"key"in e&&"path"in e?f.set(e.key,null):f.set(e,null),console.group(),console.warn(`Expected to find result for path ${e}, but instead found nothing.`),console.warn(t),console.groupEnd()}})());return await Promise.all(b),f},l=(e,t,r)=>{let i;if(!t._isPrincipal)throw Error("Invalid canisterId");let a=o.Jx(new Uint8Array(e)),u=a.tree,c=a.delegation;c&&c.subnet_id?i=n.R.fromUint8Array(new Uint8Array(c.subnet_id)):c=c||void 0===r?{subnet_id:(i=n.R.selfAuthenticating(n.R.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array())).toUint8Array(),certificate:new ArrayBuffer(0)}:{subnet_id:(i=n.R.selfAuthenticating(new Uint8Array(r))).toUint8Array(),certificate:new ArrayBuffer(0)};let f=(0,s.Gt)({canisterId:t,subnetId:i,tree:u});if(!f)throw Error("Canister not in range");let l=(0,s.OZ)(["subnet",c.subnet_id,"node"],u);if(l.status!==s.GT.Found)throw Error("Node not found");if(l.value instanceof ArrayBuffer)throw Error("Invalid node tree");let h=(0,s.UV)(l.value),d=new Map;return h.forEach(e=>{let t=n.R.from(new Uint8Array(e[1])).toText(),r=(0,s.OZ)(["public_key"],e[2]);if(r.status!==s.GT.Found)throw Error("Public key not found");let i=r.value;if(44!==i.byteLength)throw Error("Invalid public key length");d.set(t,i)}),{subnetId:n.R.fromUint8Array(new Uint8Array(c.subnet_id)).toText(),nodeKeys:d}},h=(e,t)=>{let r=new TextEncoder,n=new DataView(t.toUint8Array().buffer).buffer;switch(e){case"time":return[new DataView(r.encode("time").buffer).buffer];case"controllers":return[new DataView(r.encode("canister").buffer).buffer,n,new DataView(r.encode("controllers").buffer).buffer];case"module_hash":return[new DataView(r.encode("canister").buffer).buffer,n,new DataView(r.encode("module_hash").buffer).buffer];case"subnet":return[new DataView(r.encode("subnet").buffer).buffer];case"candid":return[new DataView(r.encode("canister").buffer).buffer,n,new DataView(r.encode("metadata").buffer).buffer,new DataView(r.encode("candid:service").buffer).buffer];default:if("key"in e&&"path"in e){if(!("string"==typeof e.path||e.path instanceof ArrayBuffer))return e.path;{let t=e.path,i="string"==typeof t?new DataView(r.encode(t).buffer).buffer:t;return[new DataView(r.encode("canister").buffer).buffer,n,new DataView(r.encode("metadata").buffer).buffer,i]}}}throw Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${e} was formatted correctly.`)},d=e=>(0,a.NC)(e),p=e=>o.Jx(e),y=e=>new TextDecoder().decode(e),g=e=>{let t=p(e);return t.map(e=>n.R.fromUint8Array(new Uint8Array(e)))}},352:function(e,t,r){"use strict";r.d(t,{Jx:function(){return h},cv:function(){return c}});var n,i,s=r(8849),a=r(9185),o=r(76);let u=a.SelfDescribeCborSerializer.withDefaultEncoders(!0);function c(e){return u.serialize(e)}function f(e){let t=e.byteLength,r=BigInt(0);for(let n=0;n<t;n++)r=r*BigInt(256)+BigInt(e[n]);return r}u.addEncoder(new class{get name(){return"Principal"}get priority(){return 0}match(e){return e&&!0===e._isPrincipal}encode(e){return a.value.bytes(e.toUint8Array())}}),u.addEncoder(new class{get name(){return"Buffer"}get priority(){return 1}match(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}encode(e){return a.value.bytes(new Uint8Array(e))}}),u.addEncoder(new class{get name(){return"BigInt"}get priority(){return 1}match(e){return"bigint"==typeof e}encode(e){return e>BigInt(0)?a.value.tagged(2,a.value.bytes((0,o.H_)(e.toString(16)))):a.value.tagged(3,a.value.bytes((0,o.H_)((BigInt("-1")*e).toString(16))))}}),(n=i||(i={}))[n.Uint64LittleEndian=71]="Uint64LittleEndian",n[n.Semantic=55799]="Semantic";class l extends s.Decoder{createByteString(e){return(0,o.zo)(...e)}createByteStringFromHeap(e,t){return e===t?new ArrayBuffer(0):new Uint8Array(this._heap.slice(e,t))}}function h(e){let t=new Uint8Array(e),r=new l({size:t.byteLength,tags:{2:e=>f(e),3:e=>-f(e),[i.Semantic]:e=>e}});try{return r.decodeFirst(t)}catch(e){throw Error(`Failed to decode CBOR: ${e}, input: ${(0,o.NC)(t)}`)}}},5934:function(e,t,r){"use strict";r.d(t,{KB:function(){return e_},kt:function(){return eE},GT:function(){return u},Gt:function(){return eS},UV:function(){return function e(t){switch(t[0]){case o.Empty:return[];case o.Fork:return e(t[1]).concat(e(t[2]));default:return[t]}}},ti:function(){return eI},OZ:function(){return eT}});var n,i,s,a,o,u,c,f=r(352),l=r(158),h=r(7543),d=r(76),p=r(8615),y=r(9802),g=r(2305),b=r(2948),m=r(7843);let w=m.bytesToNumberBE;function v(e,t){if(E(e),E(t),e<0||e>=1<<8*t)throw Error("invalid I2OSP input: "+e);let r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function E(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function _(e,t,r){let n;(0,m.FF)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:i,k:s,m:a,hash:o,expand:u,DST:c}=r;(0,m.gk)(e),E(t);let f="string"==typeof c?(0,m.iY)(c):c,l=i.toString(2).length,h=Math.ceil((l+s)/8),d=t*a*h;if("xmd"===u)n=function(e,t,r,n){(0,m.gk)(e),(0,m.gk)(t),E(r),t.length>255&&(t=n((0,m.eV)((0,m.iY)("H2C-OVERSIZE-DST-"),t)));let{outputLen:i,blockLen:s}=n,a=Math.ceil(r/i);if(r>65535||a>255)throw Error("expand_message_xmd: invalid lenInBytes");let o=(0,m.eV)(t,v(t.length,1)),u=v(0,s),c=v(r,2),f=Array(a),l=n((0,m.eV)(u,e,c,v(0,1),o));f[0]=n((0,m.eV)(l,v(1,1),o));for(let e=1;e<=a;e++){let t=[function(e,t){let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}(l,f[e-1]),v(e+1,1),o];f[e]=n((0,m.eV)(...t))}let h=(0,m.eV)(...f);return h.slice(0,r)}(e,f,d,o);else if("xof"===u)n=function(e,t,r,n,i){if((0,m.gk)(e),(0,m.gk)(t),E(r),t.length>255&&(t=i.create({dkLen:Math.ceil(2*n/8)}).update((0,m.iY)("H2C-OVERSIZE-DST-")).update(t).digest()),r>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(v(r,2)).update(t).update(v(t.length,1)).digest()}(e,f,d,s,o);else if("_internal_pass"===u)n=e;else throw Error('expand must be "xmd" or "xof"');let p=Array(t);for(let e=0;e<t;e++){let t=Array(a);for(let r=0;r<a;r++){let s=h*(r+e*a),o=n.subarray(s,s+h);t[r]=(0,b.wQ)(w(o),i)}p[e]=t}return p}function B(e,t){let r=t.map(e=>Array.from(e).reverse());return(t,n)=>{let[i,s,a,o]=r.map(r=>r.reduce((r,n)=>e.add(e.mul(r,t),n)));return t=e.div(i,s),n=e.mul(n,e.div(a,o)),{x:t,y:n}}}function I(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined");return{hashToCurve(n,i){let s=_(n,2,{...r,DST:r.DST,...i}),a=e.fromAffine(t(s[0])),o=e.fromAffine(t(s[1])),u=a.add(o).clearCofactor();return u.assertValidity(),u},encodeToCurve(n,i){let s=_(n,1,{...r,DST:r.encodeDST,...i}),a=e.fromAffine(t(s[0])).clearCofactor();return a.assertValidity(),a},mapToCurve(r){if(!Array.isArray(r))throw Error("mapToCurve: expected array of bigints");for(let e of r)if("bigint"!=typeof e)throw Error("mapToCurve: expected array of bigints");let n=e.fromAffine(t(r)).clearCofactor();return n.assertValidity(),n}}}var x=r(3606);let{bytesToNumberBE:A,hexToBytes:T}=m,S=BigInt(0),N=BigInt(1),O=BigInt(2),R=BigInt(3),U=BigInt(4);function P(e){let t=function(e){let t=(0,x.Kd)(e);m.FF(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=(0,b.gN)(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{let i=t.toAffine();return m.eV(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),s=t.fromBytes||(e=>{let t=e.subarray(1),n=r.fromBytes(t.subarray(0,r.BYTES)),i=r.fromBytes(t.subarray(r.BYTES,2*r.BYTES));return{x:n,y:i}});function a(e){let{a:n,b:i}=t,s=r.sqr(e),a=r.mul(s,e);return r.add(r.add(a,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),a(t.Gx)))throw Error("bad generator point: equation left != right");function o(e){let r;let{allowedPrivateKeyLengths:n,nByteLength:i,wrapPrivateKey:s,n:a}=t;if(n&&"bigint"!=typeof e){if(m._t(e)&&(e=m.ci(e)),"string"!=typeof e||!n.includes(e.length))throw Error("invalid private key");e=e.padStart(2*i,"0")}try{r="bigint"==typeof e?e:m.bytesToNumberBE((0,m.ql)("private key",e,i))}catch(t){throw Error("invalid private key, expected hex or "+i+" bytes, got "+typeof e)}return s&&(r=(0,b.wQ)(r,a)),m.Fy("private key",r,N,a),r}function u(e){if(!(e instanceof l))throw Error("ProjectivePoint expected")}let c=(0,m.H9)((e,t)=>{let{px:n,py:i,pz:s}=e;if(r.eql(s,r.ONE))return{x:n,y:i};let a=e.is0();null==t&&(t=a?r.ONE:r.inv(s));let o=r.mul(n,t),u=r.mul(i,t),c=r.mul(s,t);if(a)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw Error("invZ was invalid");return{x:o,y:u}}),f=(0,m.H9)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw Error("bad point: ZERO")}let{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw Error("bad point: x or y not FE");let s=r.sqr(i),o=a(n);if(!r.eql(s,o))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class l{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof l)throw Error("projective point not allowed");let i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?l.ZERO:new l(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(l.fromAffine)}static fromHex(e){let t=l.fromAffine(s((0,m.ql)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(o(e))}static msm(e,t){return(0,x.D1)(l,n,e,t)}_setWindowSize(e){d.setWindowSize(this,e)}assertValidity(){f(this)}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){u(e);let{px:t,py:n,pz:i}=this,{px:s,py:a,pz:o}=e,c=r.eql(r.mul(t,o),r.mul(s,i)),f=r.eql(r.mul(n,o),r.mul(a,i));return c&&f}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,i=r.mul(n,R),{px:s,py:a,pz:o}=this,u=r.ZERO,c=r.ZERO,f=r.ZERO,h=r.mul(s,s),d=r.mul(a,a),p=r.mul(o,o),y=r.mul(s,a);return y=r.add(y,y),f=r.mul(s,o),f=r.add(f,f),u=r.mul(e,f),c=r.mul(i,p),c=r.add(u,c),u=r.sub(d,c),c=r.add(d,c),c=r.mul(u,c),u=r.mul(y,u),f=r.mul(i,f),p=r.mul(e,p),y=r.sub(h,p),y=r.mul(e,y),y=r.add(y,f),f=r.add(h,h),h=r.add(f,h),h=r.add(h,p),h=r.mul(h,y),c=r.add(c,h),p=r.mul(a,o),p=r.add(p,p),h=r.mul(p,y),u=r.sub(u,h),f=r.mul(p,d),f=r.add(f,f),f=r.add(f,f),new l(u,c,f)}add(e){u(e);let{px:n,py:i,pz:s}=this,{px:a,py:o,pz:c}=e,f=r.ZERO,h=r.ZERO,d=r.ZERO,p=t.a,y=r.mul(t.b,R),g=r.mul(n,a),b=r.mul(i,o),m=r.mul(s,c),w=r.add(n,i),v=r.add(a,o);w=r.mul(w,v),v=r.add(g,b),w=r.sub(w,v),v=r.add(n,s);let E=r.add(a,c);return v=r.mul(v,E),E=r.add(g,m),v=r.sub(v,E),E=r.add(i,s),f=r.add(o,c),E=r.mul(E,f),f=r.add(b,m),E=r.sub(E,f),d=r.mul(p,v),f=r.mul(y,m),d=r.add(f,d),f=r.sub(b,d),d=r.add(b,d),h=r.mul(f,d),b=r.add(g,g),b=r.add(b,g),m=r.mul(p,m),v=r.mul(y,v),b=r.add(b,m),m=r.sub(g,m),m=r.mul(p,m),v=r.add(v,m),g=r.mul(b,v),h=r.add(h,g),g=r.mul(E,v),f=r.mul(w,f),f=r.sub(f,g),g=r.mul(w,b),d=r.mul(E,d),d=r.add(d,g),new l(f,h,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return d.wNAFCached(this,e,l.normalizeZ)}multiplyUnsafe(e){let{endo:n,n:i}=t;m.Fy("scalar",e,S,i);let s=l.ZERO;if(e===S)return s;if(this.is0()||e===N)return this;if(!n||d.hasPrecomputes(this))return d.wNAFCachedUnsafe(this,e,l.normalizeZ);let{k1neg:a,k1:o,k2neg:u,k2:c}=n.splitScalar(e),f=s,h=s,p=this;for(;o>S||c>S;)o&N&&(f=f.add(p)),c&N&&(h=h.add(p)),p=p.double(),o>>=N,c>>=N;return a&&(f=f.negate()),u&&(h=h.negate()),h=new l(r.mul(h.px,n.beta),h.py,h.pz),f.add(h)}multiply(e){let n,i;let{endo:s,n:a}=t;if(m.Fy("scalar",e,N,a),s){let{k1neg:t,k1:a,k2neg:o,k2:u}=s.splitScalar(e),{p:c,f:f}=this.wNAF(a),{p:h,f:p}=this.wNAF(u);c=d.constTimeNegate(t,c),h=d.constTimeNegate(o,h),h=new l(r.mul(h.px,s.beta),h.py,h.pz),n=c.add(h),i=f.add(p)}else{let{p:t,f:r}=this.wNAF(e);n=t,i=r}return l.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){let n=l.BASE,i=(e,t)=>t!==S&&t!==N&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){return c(this,e)}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===N)return!0;if(r)return r(l,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===N?this:r?r(l,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return(0,m.uw)("isCompressed",e),this.assertValidity(),i(l,this,e)}toHex(e=!0){return(0,m.uw)("isCompressed",e),m.ci(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let h=t.nBitLength,d=(0,x.Mx)(l,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:o,weierstrassEquation:a,isWithinCurveOrder:function(e){return m.Z2(e,N,t.n)}}}function L(e,t){if((0,b.OP)(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=function(e,t){let r=e.ORDER,n=S;for(let e=r-N;e%O===S;e/=O)n+=N;let i=n,s=O<<i-N-N,a=s*O,o=(r-N)/a,u=(o-N)/O,c=a-N,f=e.pow(t,o),l=e.pow(t,(o+N)/O),h=(t,r)=>{let n=f,a=e.pow(r,c),o=e.sqr(a);o=e.mul(o,r);let h=e.mul(t,o);h=e.pow(h,u),h=e.mul(h,a),a=e.mul(h,r),o=e.mul(h,t);let d=e.mul(o,a);h=e.pow(d,s);let p=e.eql(h,e.ONE);a=e.mul(o,l),h=e.mul(d,n),o=e.cmov(a,o,p),d=e.cmov(h,d,p);for(let t=i;t>N;t--){let r=t-O;r=O<<r-N;let i=e.pow(d,r),s=e.eql(i,e.ONE);a=e.mul(o,n),n=e.mul(n,n),i=e.mul(d,n),o=e.cmov(a,o,s),d=e.cmov(i,d,s)}return{isValid:p,value:o}};if(e.ORDER%U===R){let r=(e.ORDER-R)/U,n=e.sqrt(e.neg(t));h=(t,i)=>{let s=e.sqr(i),a=e.mul(t,i);s=e.mul(s,a);let o=e.pow(s,r);o=e.mul(o,a);let u=e.mul(o,n),c=e.mul(e.sqr(o),i),f=e.eql(c,t),l=e.cmov(u,o,f);return{isValid:f,value:l}}}return h}(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return n=>{let i,s,a,o,u,c,f,l;i=e.sqr(n),i=e.mul(i,t.Z),s=e.sqr(i),s=e.add(s,i),a=e.add(s,e.ONE),a=e.mul(a,t.B),o=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO)),o=e.mul(o,t.A),s=e.sqr(a),c=e.sqr(o),u=e.mul(c,t.A),s=e.add(s,u),s=e.mul(s,a),c=e.mul(c,o),u=e.mul(c,t.B),s=e.add(s,u),f=e.mul(i,a);let{isValid:h,value:d}=r(s,c);l=e.mul(i,n),l=e.mul(l,d),f=e.cmov(f,a,h),l=e.cmov(l,d,h);let p=e.isOdd(n)===e.isOdd(l);return l=e.cmov(e.neg(l),l,p),{x:f=e.div(f,o),y:l}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let k=BigInt(0),F=BigInt(1),j=BigInt(2),C=BigInt(3),D=BigInt(0),M=BigInt(1),V=BigInt(2),q=BigInt(3);function $(e,t,r,n,i=1,s){let a=BigInt(void 0===s?n:s),o=r**BigInt(n),u=[];for(let s=0;s<i;s++){let i=BigInt(s+1),c=[];for(let s=0,u=M;s<n;s++){let n=(i*u-i)/a%o;c.push(e.pow(t,n)),u*=r}u.push(c)}return u}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let z=BigInt(0),H=BigInt(1),K=BigInt(2),G=BigInt(3),W=BigInt(4),Z=BigInt("0xd201000000010000"),Y=(0,m.Dd)(Z),{Fp:J,Fp2:Q,Fp6:X,Fp4Square:ee,Fp12:et}=function(e){let{ORDER:t}=e,r=b.gN(t),n=r.create(e.NONRESIDUE||BigInt(-1)),i=b.IN(t),s=r.div(r.ONE,V),a=$(r,n,r.ORDER,2)[0],o=({c0:e,c1:t},{c0:n,c1:i})=>({c0:r.add(e,n),c1:r.add(t,i)}),u=({c0:e,c1:t},{c0:n,c1:i})=>({c0:r.sub(e,n),c1:r.sub(t,i)}),c=({c0:e,c1:t},n)=>{if("bigint"==typeof n)return{c0:r.mul(e,n),c1:r.mul(t,n)};let{c0:i,c1:s}=n,a=r.mul(e,i),o=r.mul(t,s),u=r.sub(a,o),c=r.sub(r.mul(r.add(e,t),r.add(i,s)),r.add(a,o));return{c0:u,c1:c}},f=({c0:e,c1:t})=>{let n=r.add(e,t),i=r.sub(e,t),s=r.add(e,e);return{c0:r.mul(n,i),c1:r.mul(s,t)}},l=e=>{if(2!==e.length)throw Error("invalid tuple");let t=e.map(e=>r.create(e));return{c0:t[0],c1:t[1]}},h=t*t,d=l(e.FP2_NONRESIDUE),p={ORDER:h,isLE:r.isLE,NONRESIDUE:d,BITS:(0,m.Dd)(h),BYTES:Math.ceil((0,m.Dd)(h)/8),MASK:(0,m.dQ)((0,m.Dd)(h)),ZERO:{c0:r.ZERO,c1:r.ZERO},ONE:{c0:r.ONE,c1:r.ZERO},create:e=>e,isValid:({c0:e,c1:t})=>"bigint"==typeof e&&"bigint"==typeof t,is0:({c0:e,c1:t})=>r.is0(e)&&r.is0(t),eql:({c0:e,c1:t},{c0:n,c1:i})=>r.eql(e,n)&&r.eql(t,i),neg:({c0:e,c1:t})=>({c0:r.neg(e),c1:r.neg(t)}),pow:(e,t)=>b.Q(p,e,t),invertBatch:e=>b.Eg(p,e),add:o,sub:u,mul:c,sqr:f,addN:o,subN:u,mulN:c,sqrN:f,div:(e,t)=>p.mul(e,"bigint"==typeof t?r.inv(r.create(t)):p.inv(t)),inv:({c0:e,c1:t})=>{let n=r.inv(r.create(e*e+t*t));return{c0:r.mul(n,r.create(e)),c1:r.mul(n,r.create(-t))}},sqrt:t=>{if(e.Fp2sqrt)return e.Fp2sqrt(t);let{c0:a,c1:o}=t;if(r.is0(o))return r.eql(i(r,a),r.ONE)?p.create({c0:r.sqrt(a),c1:r.ZERO}):p.create({c0:r.ZERO,c1:r.sqrt(r.div(a,n))});let u=r.sqrt(r.sub(r.sqr(a),r.mul(r.sqr(o),n))),c=r.mul(r.add(u,a),s),f=i(r,c);r.is0(f)||r.eql(f,r.ONE)||(c=r.sub(c,u));let l=r.sqrt(c),h=p.create({c0:l,c1:r.div(r.mul(o,s),l)});if(!p.eql(p.sqr(h),t))throw Error("Cannot find square root");let d=p.neg(h),{re:y,im:g}=p.reim(h),{re:b,im:m}=p.reim(d);return g>m||g===m&&y>b?h:d},isOdd:e=>{let{re:t,im:r}=p.reim(e),n=t%V,i=r%V;return BigInt(n||t===D&&i)==M},fromBytes(e){if(e.length!==p.BYTES)throw Error("fromBytes invalid length="+e.length);return{c0:r.fromBytes(e.subarray(0,r.BYTES)),c1:r.fromBytes(e.subarray(r.BYTES))}},toBytes:({c0:e,c1:t})=>(0,m.eV)(r.toBytes(e),r.toBytes(t)),cmov:({c0:e,c1:t},{c0:n,c1:i},s)=>({c0:r.cmov(e,n,s),c1:r.cmov(t,i,s)}),reim:({c0:e,c1:t})=>({re:e,im:t}),mulByNonresidue:({c0:e,c1:t})=>p.mul({c0:e,c1:t},d),mulByB:e.Fp2mulByB,fromBigTuple:l,frobeniusMap:({c0:e,c1:t},n)=>({c0:e,c1:r.mul(t,a[n%2])})},y=({c0:e,c1:t,c2:r},{c0:n,c1:i,c2:s})=>({c0:p.add(e,n),c1:p.add(t,i),c2:p.add(r,s)}),g=({c0:e,c1:t,c2:r},{c0:n,c1:i,c2:s})=>({c0:p.sub(e,n),c1:p.sub(t,i),c2:p.sub(r,s)}),w=({c0:e,c1:t,c2:r},n)=>{if("bigint"==typeof n)return{c0:p.mul(e,n),c1:p.mul(t,n),c2:p.mul(r,n)};let{c0:i,c1:s,c2:a}=n,o=p.mul(e,i),u=p.mul(t,s),c=p.mul(r,a);return{c0:p.add(o,p.mulByNonresidue(p.sub(p.mul(p.add(t,r),p.add(s,a)),p.add(u,c)))),c1:p.add(p.sub(p.mul(p.add(e,t),p.add(i,s)),p.add(o,u)),p.mulByNonresidue(c)),c2:p.sub(p.add(u,p.mul(p.add(e,r),p.add(i,a))),p.add(o,c))}},v=({c0:e,c1:t,c2:r})=>{let n=p.sqr(e),i=p.mul(p.mul(e,t),V),s=p.mul(p.mul(t,r),V),a=p.sqr(r);return{c0:p.add(p.mulByNonresidue(s),n),c1:p.add(p.mulByNonresidue(a),i),c2:p.sub(p.sub(p.add(p.add(i,p.sqr(p.add(p.sub(e,t),r))),s),n),a)}},[E,_]=$(p,d,r.ORDER,6,2,3),B={ORDER:p.ORDER,isLE:p.isLE,BITS:3*p.BITS,BYTES:3*p.BYTES,MASK:(0,m.dQ)(3*p.BITS),ZERO:{c0:p.ZERO,c1:p.ZERO,c2:p.ZERO},ONE:{c0:p.ONE,c1:p.ZERO,c2:p.ZERO},create:e=>e,isValid:({c0:e,c1:t,c2:r})=>p.isValid(e)&&p.isValid(t)&&p.isValid(r),is0:({c0:e,c1:t,c2:r})=>p.is0(e)&&p.is0(t)&&p.is0(r),neg:({c0:e,c1:t,c2:r})=>({c0:p.neg(e),c1:p.neg(t),c2:p.neg(r)}),eql:({c0:e,c1:t,c2:r},{c0:n,c1:i,c2:s})=>p.eql(e,n)&&p.eql(t,i)&&p.eql(r,s),sqrt:m.EQ,div:(e,t)=>B.mul(e,"bigint"==typeof t?r.inv(r.create(t)):B.inv(t)),pow:(e,t)=>b.Q(B,e,t),invertBatch:e=>b.Eg(B,e),add:y,sub:g,mul:w,sqr:v,addN:y,subN:g,mulN:w,sqrN:v,inv:({c0:e,c1:t,c2:r})=>{let n=p.sub(p.sqr(e),p.mulByNonresidue(p.mul(r,t))),i=p.sub(p.mulByNonresidue(p.sqr(r)),p.mul(e,t)),s=p.sub(p.sqr(t),p.mul(e,r)),a=p.inv(p.add(p.mulByNonresidue(p.add(p.mul(r,i),p.mul(t,s))),p.mul(e,n)));return{c0:p.mul(a,n),c1:p.mul(a,i),c2:p.mul(a,s)}},fromBytes:e=>{if(e.length!==B.BYTES)throw Error("fromBytes invalid length="+e.length);return{c0:p.fromBytes(e.subarray(0,p.BYTES)),c1:p.fromBytes(e.subarray(p.BYTES,2*p.BYTES)),c2:p.fromBytes(e.subarray(2*p.BYTES))}},toBytes:({c0:e,c1:t,c2:r})=>(0,m.eV)(p.toBytes(e),p.toBytes(t),p.toBytes(r)),cmov:({c0:e,c1:t,c2:r},{c0:n,c1:i,c2:s},a)=>({c0:p.cmov(e,n,a),c1:p.cmov(t,i,a),c2:p.cmov(r,s,a)}),fromBigSix:e=>{if(!Array.isArray(e)||6!==e.length)throw Error("invalid Fp6 usage");return{c0:p.fromBigTuple(e.slice(0,2)),c1:p.fromBigTuple(e.slice(2,4)),c2:p.fromBigTuple(e.slice(4,6))}},frobeniusMap:({c0:e,c1:t,c2:r},n)=>({c0:p.frobeniusMap(e,n),c1:p.mul(p.frobeniusMap(t,n),E[n%6]),c2:p.mul(p.frobeniusMap(r,n),_[n%6])}),mulByFp2:({c0:e,c1:t,c2:r},n)=>({c0:p.mul(e,n),c1:p.mul(t,n),c2:p.mul(r,n)}),mulByNonresidue:({c0:e,c1:t,c2:r})=>({c0:p.mulByNonresidue(r),c1:e,c2:t}),mul1:({c0:e,c1:t,c2:r},n)=>({c0:p.mulByNonresidue(p.mul(r,n)),c1:p.mul(e,n),c2:p.mul(t,n)}),mul01({c0:e,c1:t,c2:r},n,i){let s=p.mul(e,n),a=p.mul(t,i);return{c0:p.add(p.mulByNonresidue(p.sub(p.mul(p.add(t,r),i),a)),s),c1:p.sub(p.sub(p.mul(p.add(n,i),p.add(e,t)),s),a),c2:p.add(p.sub(p.mul(p.add(e,r),n),s),a)}}},I=$(p,d,r.ORDER,12,1,6)[0],x=({c0:e,c1:t},{c0:r,c1:n})=>({c0:B.add(e,r),c1:B.add(t,n)}),A=({c0:e,c1:t},{c0:r,c1:n})=>({c0:B.sub(e,r),c1:B.sub(t,n)}),T=({c0:e,c1:t},r)=>{if("bigint"==typeof r)return{c0:B.mul(e,r),c1:B.mul(t,r)};let{c0:n,c1:i}=r,s=B.mul(e,n),a=B.mul(t,i);return{c0:B.add(s,B.mulByNonresidue(a)),c1:B.sub(B.mul(B.add(e,t),B.add(n,i)),B.add(s,a))}},S=({c0:e,c1:t})=>{let r=B.mul(e,t);return{c0:B.sub(B.sub(B.mul(B.add(B.mulByNonresidue(t),e),B.add(e,t)),r),B.mulByNonresidue(r)),c1:B.add(r,r)}},N={ORDER:p.ORDER,isLE:B.isLE,BITS:2*p.BITS,BYTES:2*p.BYTES,MASK:(0,m.dQ)(2*p.BITS),ZERO:{c0:B.ZERO,c1:B.ZERO},ONE:{c0:B.ONE,c1:B.ZERO},create:e=>e,isValid:({c0:e,c1:t})=>B.isValid(e)&&B.isValid(t),is0:({c0:e,c1:t})=>B.is0(e)&&B.is0(t),neg:({c0:e,c1:t})=>({c0:B.neg(e),c1:B.neg(t)}),eql:({c0:e,c1:t},{c0:r,c1:n})=>B.eql(e,r)&&B.eql(t,n),sqrt:m.EQ,inv:({c0:e,c1:t})=>{let r=B.inv(B.sub(B.sqr(e),B.mulByNonresidue(B.sqr(t))));return{c0:B.mul(e,r),c1:B.neg(B.mul(t,r))}},div:(e,t)=>N.mul(e,"bigint"==typeof t?r.inv(r.create(t)):N.inv(t)),pow:(e,t)=>b.Q(N,e,t),invertBatch:e=>b.Eg(N,e),add:x,sub:A,mul:T,sqr:S,addN:x,subN:A,mulN:T,sqrN:S,fromBytes:e=>{if(e.length!==N.BYTES)throw Error("fromBytes invalid length="+e.length);return{c0:B.fromBytes(e.subarray(0,B.BYTES)),c1:B.fromBytes(e.subarray(B.BYTES))}},toBytes:({c0:e,c1:t})=>(0,m.eV)(B.toBytes(e),B.toBytes(t)),cmov:({c0:e,c1:t},{c0:r,c1:n},i)=>({c0:B.cmov(e,r,i),c1:B.cmov(t,n,i)}),fromBigTwelve:e=>({c0:B.fromBigSix(e.slice(0,6)),c1:B.fromBigSix(e.slice(6,12))}),frobeniusMap(e,t){let{c0:r,c1:n,c2:i}=B.frobeniusMap(e.c1,t),s=I[t%12];return{c0:B.frobeniusMap(e.c0,t),c1:B.create({c0:p.mul(r,s),c1:p.mul(n,s),c2:p.mul(i,s)})}},mulByFp2:({c0:e,c1:t},r)=>({c0:B.mulByFp2(e,r),c1:B.mulByFp2(t,r)}),conjugate:({c0:e,c1:t})=>({c0:e,c1:B.neg(t)}),mul014:({c0:e,c1:t},r,n,i)=>{let s=B.mul01(e,r,n),a=B.mul1(t,i);return{c0:B.add(B.mulByNonresidue(a),s),c1:B.sub(B.sub(B.mul01(B.add(t,e),r,p.add(n,i)),s),a)}},mul034:({c0:e,c1:t},r,n,i)=>{let s=B.create({c0:p.mul(e.c0,r),c1:p.mul(e.c1,r),c2:p.mul(e.c2,r)}),a=B.mul01(t,n,i),o=B.mul01(B.add(e,t),p.add(r,n),i);return{c0:B.add(B.mulByNonresidue(a),s),c1:B.sub(o,B.add(s,a))}},_cyclotomicSquare:e.Fp12cyclotomicSquare,_cyclotomicExp:e.Fp12cyclotomicExp,finalExponentiate:e.Fp12finalExponentiate};return{Fp:r,Fp2:p,Fp6:B,Fp4Square:function(e,t){let r=p.sqr(e),n=p.sqr(t);return{first:p.add(p.mulByNonresidue(n),r),second:p.sub(p.sub(p.sqr(p.add(e,t)),r),n)}},Fp12:N}}({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[H,H],Fp2mulByB:({c0:e,c1:t})=>{let r=J.mul(e,W),n=J.mul(t,W);return{c0:J.sub(r,n),c1:J.add(r,n)}},Fp12cyclotomicSquare:({c0:e,c1:t})=>{let{c0:r,c1:n,c2:i}=e,{c0:s,c1:a,c2:o}=t,{first:u,second:c}=ee(r,a),{first:f,second:l}=ee(s,i),{first:h,second:d}=ee(n,o),p=Q.mulByNonresidue(d);return{c0:X.create({c0:Q.add(Q.mul(Q.sub(u,r),K),u),c1:Q.add(Q.mul(Q.sub(f,n),K),f),c2:Q.add(Q.mul(Q.sub(h,i),K),h)}),c1:X.create({c0:Q.add(Q.mul(Q.add(p,s),K),p),c1:Q.add(Q.mul(Q.add(c,a),K),c),c2:Q.add(Q.mul(Q.add(l,o),K),l)})}},Fp12cyclotomicExp(e,t){let r=et.ONE;for(let n=Y-1;n>=0;n--)r=et._cyclotomicSquare(r),(0,m.H_)(t,n)&&(r=et.mul(r,e));return r},Fp12finalExponentiate:e=>{let t=et.div(et.frobeniusMap(e,6),e),r=et.mul(et.frobeniusMap(t,2),t),n=et.conjugate(et._cyclotomicExp(r,Z)),i=et.mul(et.conjugate(et._cyclotomicSquare(r)),n),s=et.conjugate(et._cyclotomicExp(i,Z)),a=et.conjugate(et._cyclotomicExp(s,Z)),o=et.mul(et.conjugate(et._cyclotomicExp(a,Z)),et._cyclotomicSquare(n)),u=et.conjugate(et._cyclotomicExp(o,Z)),c=et.frobeniusMap(et.mul(n,a),2),f=et.frobeniusMap(et.mul(s,r),3),l=et.frobeniusMap(et.mul(o,et.conjugate(r)),1),h=et.mul(et.mul(u,et.conjugate(i)),r);return et.mul(et.mul(et.mul(c,f),l),h)}}),er=b.gN(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),en=B(Q,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(e=>e.map(e=>Q.fromBigTuple(e.map(BigInt))))),ei=B(J,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),es=L(Q,{A:Q.create({c0:J.create(z),c1:J.create(BigInt(240))}),B:Q.create({c0:J.create(BigInt(1012)),c1:J.create(BigInt(1012))}),Z:Q.create({c0:J.create(BigInt(-2)),c1:J.create(BigInt(-1))})}),ea=L(J,{A:J.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:J.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:J.create(BigInt(11))}),{G2psi:eo,G2psi2:eu}=function(e,t,r){let n=t.pow(r,(e.ORDER-M)/q),i=t.pow(r,(e.ORDER-M)/V);function s(e,r){let s=t.mul(t.frobeniusMap(e,1),n),a=t.mul(t.frobeniusMap(r,1),i);return[s,a]}let a=t.pow(r,(e.ORDER**V-M)/q),o=t.pow(r,(e.ORDER**V-M)/V);if(!t.eql(o,t.neg(t.ONE)))throw Error("psiFrobenius: PSI2_Y!==-1");function u(e,r){return[t.mul(e,a),t.neg(r)]}let c=e=>(t,r)=>{let n=r.toAffine(),i=e(n.x,n.y);return t.fromAffine({x:i[0],y:i[1]})},f=c(s),l=c(u);return{psi:s,psi2:u,G2psi:f,G2psi2:l,PSI_X:n,PSI_Y:i,PSI2_X:a,PSI2_Y:o}}(J,Q,Q.div(Q.ONE,Q.NONRESIDUE)),ec=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:J.ORDER,m:2,k:128,expand:"xmd",hash:y.JQ}),ef=eh(J.toBytes(z),{infinity:!0,compressed:!0});function el(e){e=e.slice();let t=224&e[0];return e[0]&=31,{compressed:!!(t>>7&1),infinity:!!(t>>6&1),sort:!!(t>>5&1),value:e}}function eh(e,t){if(224&e[0])throw Error("setMask: non-empty mask");return t.compressed&&(e[0]|=128),t.infinity&&(e[0]|=64),t.sort&&(e[0]|=32),e}function ed(e){e.assertValidity();let t=e.equals(ey.G1.ProjectivePoint.ZERO),{x:r,y:n}=e.toAffine();if(t)return ef.slice();let i=J.ORDER,s=!!(n*K/i);return eh((0,m.tL)(r,J.BYTES),{compressed:!0,sort:s})}function ep(e){e.assertValidity();let t=J.BYTES;if(e.equals(ey.G2.ProjectivePoint.ZERO))return(0,m.eV)(ef,(0,m.tL)(z,t));let{x:r,y:n}=e.toAffine(),{re:i,im:s}=Q.reim(r),{re:a,im:o}=Q.reim(n),u=o>z?o*K:a*K,c=!!(u/J.ORDER&H);return(0,m.eV)(eh((0,m.tL)(s,t),{sort:c,compressed:!0}),(0,m.tL)(i,t))}let ey=function(e){let t;let{Fp:r,Fr:n,Fp2:i,Fp6:s,Fp12:a}=e.fields,o=e.params.xNegative,u=e.params.twistType,c=P({n:n.ORDER,...e.G1}),f=Object.assign(c,I(c.ProjectivePoint,e.G1.mapToCurve,{...e.htfDefaults,...e.G1.htfDefaults})),l=P({n:n.ORDER,...e.G2}),h=Object.assign(l,I(l.ProjectivePoint,e.G2.mapToCurve,{...e.htfDefaults,...e.G2.htfDefaults}));if("multiplicative"===u)t=(e,t,r,n,s,o)=>a.mul014(n,e,i.mul(t,s),i.mul(r,o));else if("divisive"===u)t=(e,t,r,n,s,o)=>a.mul034(n,i.mul(r,o),i.mul(t,s),e);else throw Error("bls: unknown twist type");let d=i.div(i.ONE,i.mul(i.ONE,j));function p(e,t,r,n,s,a){let o=i.sub(r,i.mul(a,n)),u=i.sub(t,i.mul(s,n)),c=i.sub(i.mul(o,s),i.mul(u,a)),f=i.neg(o);e.push([c,f,u]);let l=i.sqr(u),h=i.mul(l,u),d=i.mul(l,t),p=i.add(i.sub(h,i.mul(d,j)),i.mul(i.sqr(o),n));return{Rx:t=i.mul(u,p),Ry:r=i.sub(i.mul(i.sub(d,p),o),i.mul(h,r)),Rz:n=i.mul(n,h)}}let y=function(e){let t=[];for(;e>F;e>>=F)(e&F)===k?t.unshift(0):(e&C)===C?(t.unshift(-1),e+=F):t.unshift(1);return t}(e.params.ateLoopSize),g=(0,m.H9)(t=>{let{x:r,y:n}=t.toAffine(),s=i.neg(n),a=r,o=n,u=i.ONE,c=[];for(let e of y){let t=[];({Rx:a,Ry:o,Rz:u}=function(e,t,r,n){let s=i.sqr(r),a=i.sqr(n),o=i.mulByB(i.mul(a,C)),u=i.mul(o,C),c=i.sub(i.sub(i.sqr(i.add(r,n)),a),s),f=i.sub(o,s),l=i.mul(i.sqr(t),C),h=i.neg(c);return e.push([f,l,h]),{Rx:t=i.mul(i.mul(i.mul(i.sub(s,u),t),r),d),Ry:r=i.sub(i.sqr(i.mul(i.add(s,u),d)),i.mul(i.sqr(o),C)),Rz:n=i.mul(s,c)}}(t,a,o,u)),e&&({Rx:a,Ry:o,Rz:u}=p(t,a,o,u,r,-1===e?s:n)),c.push(t)}if(e.postPrecompute){let t=c[c.length-1];e.postPrecompute(a,o,u,r,n,p.bind(null,t))}return c});function w(e,r=!1){let n=a.ONE;if(e.length){let r=e[0][0].length;for(let i=0;i<r;i++)for(let[r,s,o]of(n=a.sqr(n),e))for(let[e,a,u]of r[i])n=t(e,a,u,n,s,o)}return o&&(n=a.conjugate(n)),r?a.finalExponentiate(n):n}function v(e,t=!0){let r=[];for(let{g1:t,g2:n}of(f.ProjectivePoint.normalizeZ(e.map(({g1:e})=>e)),h.ProjectivePoint.normalizeZ(e.map(({g2:e})=>e)),e)){if(t.equals(f.ProjectivePoint.ZERO)||n.equals(h.ProjectivePoint.ZERO))throw Error("pairing is not available for ZERO point");t.assertValidity(),n.assertValidity();let e=t.toAffine();r.push([g(n),e.x,e.y])}return w(r,t)}let{ShortSignature:E}=e.G1,{Signature:_}=e.G2;function B(e){return e instanceof f.ProjectivePoint?e:f.ProjectivePoint.fromHex(e)}function x(e,t){return e instanceof f.ProjectivePoint?e:f.hashToCurve((0,m.ql)("point",e),t)}function A(e){return e instanceof h.ProjectivePoint?e:_.fromHex(e)}function T(e,t){return e instanceof h.ProjectivePoint?e:h.hashToCurve((0,m.ql)("point",e),t)}function S(e){if(!Array.isArray(e)||0===e.length)throw Error("expected non-empty array")}return f.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:function(e){return f.ProjectivePoint.fromPrivateKey(e).toRawBytes(!0)},getPublicKeyForShortSignatures:function(e){return h.ProjectivePoint.fromPrivateKey(e).toRawBytes(!0)},sign:function(e,t,r){let n=T(e,r);n.assertValidity();let i=n.multiply(f.normPrivateKeyToScalar(t));return e instanceof h.ProjectivePoint?i:_.toRawBytes(i)},signShortSignature:function(e,t,r){let n=x(e,r);n.assertValidity();let i=n.multiply(f.normPrivateKeyToScalar(t));return e instanceof f.ProjectivePoint?i:E.toRawBytes(i)},verify:function(e,t,r,n){let i=B(r),s=T(t,n),o=f.ProjectivePoint.BASE,u=A(e),c=v([{g1:i.negate(),g2:s},{g1:o,g2:u}]);return a.eql(c,a.ONE)},verifyBatch:function(e,t,r,n){if(S(t),r.length!==t.length)throw Error("amount of public keys and messages should be equal");let i=A(e),s=t.map(e=>T(e,n)),o=r.map(B),u=new Map;for(let e=0;e<o.length;e++){let t=o[e],r=s[e],n=u.get(r);void 0===n&&(n=[],u.set(r,n)),n.push(t)}let c=[];try{for(let[e,t]of u){let r=t.reduce((e,t)=>e.add(t));c.push({g1:r,g2:e})}return c.push({g1:f.ProjectivePoint.BASE.negate(),g2:i}),a.eql(v(c),a.ONE)}catch{return!1}},verifyShortSignature:function(e,t,r,n){let i=A(r),s=x(t,n),o=h.ProjectivePoint.BASE,u=B(e),c=v([{g1:s,g2:i},{g1:u,g2:o.negate()}]);return a.eql(c,a.ONE)},aggregatePublicKeys:function(e){S(e);let t=e.map(B).reduce((e,t)=>e.add(t),f.ProjectivePoint.ZERO);return e[0]instanceof f.ProjectivePoint?(t.assertValidity(),t):t.toRawBytes(!0)},aggregateSignatures:function(e){S(e);let t=e.map(A).reduce((e,t)=>e.add(t),h.ProjectivePoint.ZERO);return e[0]instanceof h.ProjectivePoint?(t.assertValidity(),t):_.toRawBytes(t)},aggregateShortSignatures:function(e){S(e);let t=e.map(B).reduce((e,t)=>e.add(t),f.ProjectivePoint.ZERO);return e[0]instanceof f.ProjectivePoint?(t.assertValidity(),t):E.toRawBytes(t)},millerLoopBatch:w,pairing:function(e,t,r=!0){return v([{g1:e,g2:t}],r)},pairingBatch:v,G1:f,G2:h,Signature:_,ShortSignature:E,fields:{Fr:n,Fp:r,Fp2:i,Fp6:s,Fp12:a},params:{ateLoopSize:e.params.ateLoopSize,r:e.params.r,G1b:e.G1.b,G2b:e.G2.b},utils:{randomPrivateKey:()=>{let t=(0,b.PS)(n.ORDER);return(0,b.Us)(e.randomBytes(t),n.ORDER)},calcPairingPrecomputes:g}}}({fields:{Fp:J,Fp2:Q,Fp6:X,Fp12:et,Fr:er},G1:{Fp:J,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:J.ZERO,b:W,htfDefaults:{...ec,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(e,t)=>{let r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new e(J.mul(t.px,r),t.py,t.pz),i=t.multiplyUnsafe(Z).negate(),s=i.multiplyUnsafe(Z);return s.equals(n)},clearCofactor:(e,t)=>t.multiplyUnsafe(Z).add(t),mapToCurve:e=>{let{x:t,y:r}=ea(J.create(e[0]));return ei(t,r)},fromBytes:e=>{let{compressed:t,infinity:r,sort:n,value:i}=el(e);if(48===i.length&&t){let e=J.ORDER,t=(0,m.bytesToNumberBE)(i),s=J.create(t&J.MASK);if(r){if(s!==z)throw Error("G1: non-empty compressed point at infinity");return{x:z,y:z}}let a=J.add(J.pow(s,G),J.create(ey.params.G1b)),o=J.sqrt(a);if(!o)throw Error("invalid compressed G1 point");return o*K/e!==BigInt(n)&&(o=J.neg(o)),{x:J.create(s),y:J.create(o)}}if(96!==i.length||t)throw Error("invalid point G1, expected 48/96 bytes");{let e=(0,m.bytesToNumberBE)(i.subarray(0,J.BYTES)),t=(0,m.bytesToNumberBE)(i.subarray(J.BYTES));if(r){if(e!==z||t!==z)throw Error("G1: non-empty point at infinity");return ey.G1.ProjectivePoint.ZERO.toAffine()}return{x:J.create(e),y:J.create(t)}}},toBytes:(e,t,r)=>{let n=t.equals(e.ZERO),{x:i,y:s}=t.toAffine();if(r){if(n)return ef.slice();let e=J.ORDER,t=!!(s*K/e);return eh((0,m.tL)(i,J.BYTES),{compressed:!0,sort:t})}if(!n)return(0,m.eV)((0,m.tL)(i,J.BYTES),(0,m.tL)(s,J.BYTES));{let e=(0,m.eV)(new Uint8Array([64]),new Uint8Array(2*J.BYTES-1));return e}},ShortSignature:{fromHex(e){let{infinity:t,sort:r,value:n}=el((0,m.ql)("signatureHex",e,48)),i=J.ORDER,s=(0,m.bytesToNumberBE)(n);if(t)return ey.G1.ProjectivePoint.ZERO;let a=J.create(s&J.MASK),o=J.add(J.pow(a,G),J.create(ey.params.G1b)),u=J.sqrt(o);if(!u)throw Error("invalid compressed G1 point");let c=BigInt(r);u*K/i!==c&&(u=J.neg(u));let f=ey.G1.ProjectivePoint.fromAffine({x:a,y:u});return f.assertValidity(),f},toRawBytes:e=>ed(e),toHex:e=>(0,m.ci)(ed(e))}},G2:{Fp:Q,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),Gx:Q.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:Q.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")]),a:Q.ZERO,b:Q.fromBigTuple([W,W]),hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...ec},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:e=>{let{x:t,y:r}=es(Q.fromBigTuple(e));return en(t,r)},isTorsionFree:(e,t)=>t.multiplyUnsafe(Z).negate().equals(eo(e,t)),clearCofactor:(e,t)=>{let r=t.multiplyUnsafe(Z).negate(),n=eo(e,t),i=t.double();i=(i=eu(e,i)).subtract(n),n=(n=r.add(n)).multiplyUnsafe(Z).negate(),i=(i=i.add(n)).subtract(r);let s=i.subtract(t);return s},fromBytes:e=>{let{compressed:t,infinity:r,sort:n,value:i}=el(e);if(!t&&!r&&n||!t&&r&&n||n&&r&&t)throw Error("invalid encoding flag: "+(224&e[0]));let s=J.BYTES,a=(e,t,r)=>(0,m.bytesToNumberBE)(e.slice(t,r));if(96===i.length&&t){let e=ey.params.G2b,t=J.ORDER;if(r){if(i.reduce((e,t)=>0!==e?t+1:t,0)>0)throw Error("invalid compressed G2 point");return{x:Q.ZERO,y:Q.ZERO}}let o=a(i,0,s),u=a(i,s,2*s),c=Q.create({c0:J.create(u),c1:J.create(o)}),f=Q.add(Q.pow(c,G),e),l=Q.sqrt(f),h=l.c1===z?l.c0*K/t:l.c1*K/t?H:z;return{x:c,y:l=n&&h>0?l:Q.neg(l)}}if(192!==i.length||t)throw Error("invalid point G2, expected 96/192 bytes");{if(r){if(i.reduce((e,t)=>0!==e?t+1:t,0)>0)throw Error("invalid uncompressed G2 point");return{x:Q.ZERO,y:Q.ZERO}}let e=a(i,0,s),t=a(i,s,2*s),n=a(i,2*s,3*s),o=a(i,3*s,4*s);return{x:Q.fromBigTuple([t,e]),y:Q.fromBigTuple([o,n])}}},toBytes:(e,t,r)=>{let{BYTES:n,ORDER:i}=J,s=t.equals(e.ZERO),{x:a,y:o}=t.toAffine();if(r){if(s)return(0,m.eV)(ef,(0,m.tL)(z,n));let e=!!(o.c1===z?o.c0*K/i:o.c1*K/i);return(0,m.eV)(eh((0,m.tL)(a.c1,n),{compressed:!0,sort:e}),(0,m.tL)(a.c0,n))}{if(s)return(0,m.eV)(new Uint8Array([64]),new Uint8Array(4*n-1));let{re:e,im:t}=Q.reim(a),{re:r,im:i}=Q.reim(o);return(0,m.eV)((0,m.tL)(t,n),(0,m.tL)(e,n),(0,m.tL)(i,n),(0,m.tL)(r,n))}},Signature:{fromHex(e){let{infinity:t,sort:r,value:n}=el((0,m.ql)("signatureHex",e)),i=J.ORDER,s=n.length/2;if(48!==s&&96!==s)throw Error("invalid compressed signature length, must be 96 or 192");let a=(0,m.bytesToNumberBE)(n.slice(0,s)),o=(0,m.bytesToNumberBE)(n.slice(s));if(t)return ey.G2.ProjectivePoint.ZERO;let u=J.create(a&J.MASK),c=J.create(o),f=Q.create({c0:c,c1:u}),l=Q.add(Q.pow(f,G),ey.params.G2b),h=Q.sqrt(l);if(!h)throw Error("Failed to find a square root");let{re:d,im:p}=Q.reim(h),y=BigInt(r),g=p>z&&p*K/i!==y,b=p===z&&d*K/i!==y;(g||b)&&(h=Q.neg(h));let w=ey.G2.ProjectivePoint.fromAffine({x:f,y:h});return w.assertValidity(),w},toRawBytes:e=>ep(e),toHex:e=>(0,m.ci)(ep(e))}},params:{ateLoopSize:Z,r:er.ORDER,xNegative:!0,twistType:"multiplicative"},htfDefaults:ec,hash:y.JQ,randomBytes:g.O6});function eg(e,t,r){let n="string"==typeof e?e:(0,d.NC)(e),i="string"==typeof t?t:(0,d.NC)(t),s="string"==typeof r?r:(0,d.NC)(r);return ey.verifyShortSignature(i,s,n)}var eb=r(792),em=r(1183),ew=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},ev=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class eE extends l.e${constructor(e){super(`Invalid certificate: ${e}`)}}(n=o||(o={}))[n.Empty=0]="Empty",n[n.Fork=1]="Fork",n[n.Labeled=2]="Labeled",n[n.Leaf=3]="Leaf",n[n.Pruned=4]="Pruned";class e_{constructor(e,t,r,n,i=5,s=!1){this._rootKey=t,this._canisterId=r,this._blsVerify=n,this._maxAgeInMinutes=i,a.set(this,!1),ew(this,a,s,"f"),this.cert=f.Jx(new Uint8Array(e))}static async create(e){let t=e_.createUnverified(e);return await t.verify(),t}static createUnverified(e){let t=e.blsVerify;return t||(t=eg),new e_(e.certificate,e.rootKey,e.canisterId,t,e.maxAgeInMinutes,e.disableTimeVerification)}lookup(e){return eT(e,this.cert.tree)}lookup_label(e){return this.lookup([e])}async verify(){let e=await ex(this.cert.tree),t=await this._checkDelegationAndGetKey(this.cert.delegation),r=this.cert.signature,n=function(e){let t=eB.byteLength+96;if(e.byteLength!==t)throw TypeError(`BLS DER-encoded public key must be ${t} bytes long`);let r=e.slice(0,eB.byteLength);if(!(0,d.IA)(r,eB))throw TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${eB}, but get ${r}`);return e.slice(eB.byteLength)}(t),i=(0,d.zo)(eA("ic-state-root"),e),s=!1,o=eI(this.lookup(["time"]));if(!o)throw new eE("Certificate does not contain a time");if(!ev(this,a,"f")){let e=6e4*this._maxAgeInMinutes,t=Date.now(),r=(0,eb.b)(o);if(r.getTime()<t-e)throw new eE(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+r.toISOString()+" Current time: "+new Date(t).toISOString());if(r.getTime()>t+3e5)throw new eE("Certificate is signed more than 5 minutes in the future. Certificate time: "+r.toISOString()+" Current time: "+new Date(t).toISOString())}try{s=await this._blsVerify(new Uint8Array(n),new Uint8Array(r),new Uint8Array(i))}catch(e){s=!1}if(!s)throw new eE("Signature verification failed")}async _checkDelegationAndGetKey(e){if(!e)return this._rootKey;let t=await e_.createUnverified({certificate:e.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(t.cert.delegation)throw new eE("Delegation certificates cannot be nested");if(await t.verify(),this._canisterId.toString()!==em.t_){let r=eS({canisterId:this._canisterId,subnetId:p.R.fromUint8Array(new Uint8Array(e.subnet_id)),tree:t.cert.tree});if(!r)throw new eE(`Canister ${this._canisterId} not in range of delegations for subnet 0x${(0,d.NC)(e.subnet_id)}`)}let r=eI(t.lookup(["subnet",e.subnet_id,"public_key"]));if(!r)throw Error(`Could not find subnet key for subnet 0x${(0,d.NC)(e.subnet_id)}`);return r}}a=new WeakMap;let eB=(0,d.H_)("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100");function eI(e){return e.status!==u.Found?void 0:e.value instanceof ArrayBuffer?e.value:e.value instanceof Uint8Array?e.value.buffer:void 0}async function ex(e){switch(e[0]){case o.Empty:return(0,h.vp)(eA("ic-hashtree-empty"));case o.Pruned:return e[1];case o.Leaf:return(0,h.vp)((0,d.zo)(eA("ic-hashtree-leaf"),e[1]));case o.Labeled:return(0,h.vp)((0,d.zo)(eA("ic-hashtree-labeled"),e[1],await ex(e[2])));case o.Fork:return(0,h.vp)((0,d.zo)(eA("ic-hashtree-fork"),await ex(e[1]),await ex(e[2])));default:throw Error("unreachable")}}function eA(e){let t=new Uint8Array([e.length]),r=new TextEncoder().encode(e);return(0,d.zo)(t,r)}function eT(e,t){if(0===e.length){if(t[0]===o.Leaf){if(!t[1])throw Error("Invalid tree structure for leaf");return t[1]instanceof ArrayBuffer?{status:u.Found,value:t[1]}:t[1]instanceof Uint8Array?{status:u.Found,value:t[1].buffer}:{status:u.Found,value:t[1]}}return{status:u.Found,value:t}}let r="string"==typeof e[0]?new TextEncoder().encode(e[0]):e[0],n=function e(t,r){switch(r[0]){case o.Labeled:if(function(e,t){let r=new Uint8Array(e),n=new Uint8Array(t);for(let e=0;e<r.length;e++)if(r[e]>n[e])return!0;return!1}(t,r[1]))return{status:c.Greater};if((0,d.IA)(t,r[1]))return{status:u.Found,value:r[2]};return{status:c.Less};case o.Fork:let n=e(t,r[1]);switch(n.status){case c.Greater:{let n=e(t,r[2]);if(n.status===c.Less)return{status:u.Absent};return n}case u.Unknown:{let n=e(t,r[2]);if(n.status===c.Less)return{status:u.Unknown};return n}default:return n}case o.Pruned:return{status:u.Unknown};default:return{status:u.Absent}}}(r,t);switch(n.status){case u.Found:return eT(e.slice(1),n.value);case c.Greater:case c.Less:return{status:u.Absent};default:return n}}function eS(e){let{canisterId:t,subnetId:r,tree:n}=e,i=eT(["subnet",r.toUint8Array(),"canister_ranges"],n);if(i.status!==u.Found||!(i.value instanceof ArrayBuffer))throw Error(`Could not find canister ranges for subnet ${r}`);let s=f.Jx(i.value),a=s.map(e=>[p.R.fromUint8Array(e[0]),p.R.fromUint8Array(e[1])]),o=a.some(e=>e[0].ltEq(t)&&e[1].gtEq(t));return o}(i=u||(u={})).Unknown="unknown",i.Absent="absent",i.Found="found",(s=c||(c={})).Less="less",s.Greater="greater"},139:function(e,t,r){"use strict";r.d(t,{BM:function(){return u},eZ:function(){return f},nt:function(){return c}});var n=r(76);let i=e=>{if(e<=127)return 1;if(e<=255)return 2;if(e<=65535)return 3;if(e<=16777215)return 4;throw Error("Length too long (> 4 bytes)")},s=(e,t,r)=>{if(r<=127)return e[t]=r,1;if(r<=255)return e[t]=129,e[t+1]=r,2;if(r<=65535)return e[t]=130,e[t+1]=r>>8,e[t+2]=r,3;if(r<=16777215)return e[t]=131,e[t+1]=r>>16,e[t+2]=r>>8,e[t+3]=r,4;throw Error("Length too long (> 4 bytes)")},a=(e,t)=>{if(e[t]<128)return 1;if(128===e[t])throw Error("Invalid length 0");if(129===e[t])return 2;if(130===e[t])return 3;if(131===e[t])return 4;throw Error("Length too long (> 4 bytes)")},o=(e,t)=>{let r=a(e,t);if(1===r)return e[t];if(2===r)return e[t+1];if(3===r)return(e[t+1]<<8)+e[t+2];if(4===r)return(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];throw Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);let u=Uint8Array.from([48,5,6,3,43,101,112]);function c(e,t){let r=2+i(e.byteLength+1),n=t.byteLength+r+e.byteLength,a=0,o=new Uint8Array(1+i(n)+n);return o[a++]=48,a+=s(o,a,n),o.set(t,a),a+=t.byteLength,o[a++]=3,a+=s(o,a,e.byteLength+1),o[a++]=0,o.set(new Uint8Array(e),a),o}Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);let f=(e,t)=>{let r=0,i=(e,t)=>{if(s[r++]!==e)throw Error("Expected: "+t)},s=new Uint8Array(e);if(i(48,"sequence"),r+=a(s,r),!(0,n.IA)(s.slice(r,r+t.byteLength),t))throw Error("Not the expected OID.");r+=t.byteLength,i(3,"bit string");let u=o(s,r)-1;r+=a(s,r),i(0,"0 padding");let c=s.slice(r);if(u!==c.length)throw Error(`DER payload mismatch: Expected length ${u} actual length ${c.length}`);return c}},158:function(e,t,r){"use strict";r.d(t,{e$:function(){return n}}),r(8615),r(9201);class n extends Error{constructor(e){super(e),this.message=e,this.name="AgentError",this.__proto__=n.prototype,Object.setPrototypeOf(this,n.prototype)}}},1794:function(e,t,r){"use strict";r.d(t,{vt:function(){return b},ed:function(){return B.ed},BM:function(){return I.BM},i7:function(){return i.i7},$4:function(){return B.$4},IA:function(){return u.IA},rS:function(){return u.rS},H_:function(){return u.H_},vH:function(){return x.vH},NC:function(){return u.NC},wy:function(){return u.wy},eZ:function(){return I.eZ},nt:function(){return I.nt}});var n=r(7133),i=r(1183),s=r(158),a=r(8435),o=r(5934),u=r(76);function c(){var e;let t,r;return function(...e){return async(t,r,n)=>{for(let i of e)await i(t,r,n)}}((t=!0,e=async()=>!!t&&(t=!1,!0),async(t,r,n)=>{if(await e(t,r,n))return new Promise(e=>setTimeout(e,1e3))}),(r=1e3,()=>new Promise(e=>setTimeout(()=>{r*=1.2,e()},r))),function(e){let t=Date.now()+e;return async(r,n,i)=>{if(Date.now()>t)throw Error(`Request timed out after ${e} msec:
  Request ID: ${(0,u.NC)(n)}
  Request status: ${i}
`)}}(3e5))}async function f(e,t,r,n=c(),s,a){var l;let h;let d=[new TextEncoder().encode("request_status"),r],p=null!=s?s:await (null===(l=e.createReadStateRequest)||void 0===l?void 0:l.call(e,{paths:[d]})),y=await e.readState(t,{paths:[d]},void 0,p);if(null==e.rootKey)throw Error("Agent root key not initialized before polling");let g=await o.KB.create({certificate:y.certificate,rootKey:e.rootKey,canisterId:t,blsVerify:a}),b=(0,o.ti)(g.lookup([...d,new TextEncoder().encode("status")]));switch(h=void 0===b?i.bN.Unknown:new TextDecoder().decode(b)){case i.bN.Replied:return{reply:(0,o.ti)(g.lookup([...d,"reply"])),certificate:g};case i.bN.Received:case i.bN.Unknown:case i.bN.Processing:return await n(t,r,h),f(e,t,r,n,p,a);case i.bN.Rejected:{let e=new Uint8Array((0,o.ti)(g.lookup([...d,"reject_code"])))[0],t=new TextDecoder().decode((0,o.ti)(g.lookup([...d,"reject_message"])));throw Error(`Call was rejected:
  Request ID: ${(0,u.NC)(r)}
  Reject code: ${e}
  Reject text: ${t}
`)}case i.bN.Done:throw Error(`Call was marked as done but we never saw the reply:
  Request ID: ${(0,u.NC)(r)}
`)}throw Error("unreachable")}var l=r(8615),h=({IDL:e})=>{let t=e.Variant({mainnet:e.Null,testnet:e.Null}),r=e.Text,n=e.Record({network:t,address:r,min_confirmations:e.Opt(e.Nat32)}),i=e.Nat64,s=e.Nat32,a=e.Record({start_height:s,end_height:e.Opt(s),network:t}),o=e.Vec(e.Nat8),u=e.Record({tip_height:s,block_headers:e.Vec(o)}),c=e.Record({network:t}),f=e.Nat64,l=e.Vec(f),h=e.Record({network:t,filter:e.Opt(e.Variant({page:e.Vec(e.Nat8),min_confirmations:e.Nat32})),address:r}),d=e.Vec(e.Nat8),p=e.Record({txid:e.Vec(e.Nat8),vout:e.Nat32}),y=e.Record({height:e.Nat32,value:i,outpoint:p}),g=e.Record({next_page:e.Opt(e.Vec(e.Nat8)),tip_height:s,tip_block_hash:d,utxos:e.Vec(y)}),b=e.Record({transaction:e.Vec(e.Nat8),network:t}),m=e.Principal,w=e.Record({canister_id:m,num_requested_changes:e.Opt(e.Nat64)}),v=e.Variant({from_user:e.Record({user_id:e.Principal}),from_canister:e.Record({canister_version:e.Opt(e.Nat64),canister_id:e.Principal})}),E=e.Vec(e.Nat8),_=e.Variant({creation:e.Record({controllers:e.Vec(e.Principal)}),code_deployment:e.Record({mode:e.Variant({reinstall:e.Null,upgrade:e.Null,install:e.Null}),module_hash:e.Vec(e.Nat8)}),load_snapshot:e.Record({canister_version:e.Nat64,taken_at_timestamp:e.Nat64,snapshot_id:E}),controllers_change:e.Record({controllers:e.Vec(e.Principal)}),code_uninstall:e.Null}),B=e.Record({timestamp_nanos:e.Nat64,canister_version:e.Nat64,origin:v,details:_}),I=e.Record({controllers:e.Vec(e.Principal),module_hash:e.Opt(e.Vec(e.Nat8)),recent_changes:e.Vec(B),total_num_changes:e.Nat64}),x=e.Record({canister_id:m}),A=e.Variant({controllers:e.Null,public:e.Null,allowed_viewers:e.Vec(e.Principal)}),T=e.Record({freezing_threshold:e.Nat,controllers:e.Vec(e.Principal),reserved_cycles_limit:e.Nat,log_visibility:A,wasm_memory_limit:e.Nat,memory_allocation:e.Nat,compute_allocation:e.Nat}),S=e.Record({status:e.Variant({stopped:e.Null,stopping:e.Null,running:e.Null}),memory_size:e.Nat,cycles:e.Nat,settings:T,query_stats:e.Record({response_payload_bytes_total:e.Nat,num_instructions_total:e.Nat,num_calls_total:e.Nat,request_payload_bytes_total:e.Nat}),idle_cycles_burned_per_day:e.Nat,module_hash:e.Opt(e.Vec(e.Nat8)),reserved_cycles:e.Nat}),N=e.Record({canister_id:m}),O=e.Record({freezing_threshold:e.Opt(e.Nat),controllers:e.Opt(e.Vec(e.Principal)),reserved_cycles_limit:e.Opt(e.Nat),log_visibility:e.Opt(A),wasm_memory_limit:e.Opt(e.Nat),memory_allocation:e.Opt(e.Nat),compute_allocation:e.Opt(e.Nat)}),R=e.Record({settings:e.Opt(O),sender_canister_version:e.Opt(e.Nat64)}),U=e.Record({canister_id:m}),P=e.Record({canister_id:m}),L=e.Record({canister_id:m,snapshot_id:E}),k=e.Record({canister_id:m}),F=e.Variant({secp256k1:e.Null}),j=e.Record({key_id:e.Record({name:e.Text,curve:F}),canister_id:e.Opt(m),derivation_path:e.Vec(e.Vec(e.Nat8))}),C=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),D=e.Record({canister_id:m}),M=e.Record({idx:e.Nat64,timestamp_nanos:e.Nat64,content:e.Vec(e.Nat8)}),V=e.Record({canister_log_records:e.Vec(M)}),q=e.Record({value:e.Text,name:e.Text}),$=e.Record({status:e.Nat,body:e.Vec(e.Nat8),headers:e.Vec(q)}),z=e.Record({url:e.Text,method:e.Variant({get:e.Null,head:e.Null,post:e.Null}),max_response_bytes:e.Opt(e.Nat64),body:e.Opt(e.Vec(e.Nat8)),transform:e.Opt(e.Record({function:e.Func([e.Record({context:e.Vec(e.Nat8),response:$})],[$],["query"]),context:e.Vec(e.Nat8)})),headers:e.Vec(q)}),H=e.Variant({reinstall:e.Null,upgrade:e.Opt(e.Record({wasm_memory_persistence:e.Opt(e.Variant({keep:e.Null,replace:e.Null})),skip_pre_upgrade:e.Opt(e.Bool)})),install:e.Null}),K=e.Record({hash:e.Vec(e.Nat8)}),G=e.Record({arg:e.Vec(e.Nat8),wasm_module_hash:e.Vec(e.Nat8),mode:H,chunk_hashes_list:e.Vec(K),target_canister:m,store_canister:e.Opt(m),sender_canister_version:e.Opt(e.Nat64)}),W=e.Vec(e.Nat8),Z=e.Record({arg:e.Vec(e.Nat8),wasm_module:W,mode:H,canister_id:m,sender_canister_version:e.Opt(e.Nat64)}),Y=e.Record({canister_id:m}),J=e.Record({id:E,total_size:e.Nat64,taken_at_timestamp:e.Nat64}),Q=e.Vec(J),X=e.Record({canister_id:m,sender_canister_version:e.Opt(e.Nat64),snapshot_id:E}),ee=e.Record({start_at_timestamp_nanos:e.Nat64,subnet_id:e.Principal}),et=e.Record({num_block_failures_total:e.Nat64,node_id:e.Principal,num_blocks_proposed_total:e.Nat64}),er=e.Vec(e.Record({timestamp_nanos:e.Nat64,node_metrics:e.Vec(et)})),en=e.Record({settings:e.Opt(O),specified_id:e.Opt(m),amount:e.Opt(e.Nat),sender_canister_version:e.Opt(e.Nat64)}),ei=e.Record({canister_id:m}),es=e.Record({canister_id:m,amount:e.Nat}),ea=e.Vec(e.Nat8),eo=e.Variant({ed25519:e.Null,bip340secp256k1:e.Null}),eu=e.Record({key_id:e.Record({algorithm:eo,name:e.Text}),canister_id:e.Opt(m),derivation_path:e.Vec(e.Vec(e.Nat8))}),ec=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),ef=e.Record({key_id:e.Record({name:e.Text,curve:F}),derivation_path:e.Vec(e.Vec(e.Nat8)),message_hash:e.Vec(e.Nat8)}),el=e.Record({signature:e.Vec(e.Nat8)}),eh=e.Variant({bip341:e.Record({merkle_root_hash:e.Vec(e.Nat8)})}),ed=e.Record({aux:e.Opt(eh),key_id:e.Record({algorithm:eo,name:e.Text}),derivation_path:e.Vec(e.Vec(e.Nat8)),message:e.Vec(e.Nat8)}),ep=e.Record({signature:e.Vec(e.Nat8)}),ey=e.Record({canister_id:m}),eg=e.Record({canister_id:m}),eb=e.Record({canister_id:m}),em=e.Vec(K),ew=e.Record({subnet_id:e.Principal}),ev=e.Record({replica_version:e.Text}),eE=e.Record({replace_snapshot:e.Opt(E),canister_id:m}),e_=e.Record({canister_id:m,sender_canister_version:e.Opt(e.Nat64)}),eB=e.Record({canister_id:e.Principal,settings:O,sender_canister_version:e.Opt(e.Nat64)}),eI=e.Record({chunk:e.Vec(e.Nat8),canister_id:e.Principal});return e.Service({bitcoin_get_balance:e.Func([n],[i],[]),bitcoin_get_block_headers:e.Func([a],[u],[]),bitcoin_get_current_fee_percentiles:e.Func([c],[l],[]),bitcoin_get_utxos:e.Func([h],[g],[]),bitcoin_send_transaction:e.Func([b],[],[]),canister_info:e.Func([w],[I],[]),canister_status:e.Func([x],[S],[]),clear_chunk_store:e.Func([N],[],[]),create_canister:e.Func([R],[U],[]),delete_canister:e.Func([P],[],[]),delete_canister_snapshot:e.Func([L],[],[]),deposit_cycles:e.Func([k],[],[]),ecdsa_public_key:e.Func([j],[C],[]),fetch_canister_logs:e.Func([D],[V],["query"]),http_request:e.Func([z],[$],[]),install_chunked_code:e.Func([G],[],[]),install_code:e.Func([Z],[],[]),list_canister_snapshots:e.Func([Y],[Q],[]),load_canister_snapshot:e.Func([X],[],[]),node_metrics_history:e.Func([ee],[er],[]),provisional_create_canister_with_cycles:e.Func([en],[ei],[]),provisional_top_up_canister:e.Func([es],[],[]),raw_rand:e.Func([],[ea],[]),schnorr_public_key:e.Func([eu],[ec],[]),sign_with_ecdsa:e.Func([ef],[el],[]),sign_with_schnorr:e.Func([ed],[ep],[]),start_canister:e.Func([ey],[],[]),stop_canister:e.Func([eg],[],[]),stored_chunks:e.Func([eb],[em],[]),subnet_info:e.Func([ew],[ev],[]),take_canister_snapshot:e.Func([eE],[J],[]),uninstall_code:e.Func([e_],[],[]),update_settings:e.Func([eB],[],[]),upload_chunk:e.Func([eI],[K],[])})};class d extends s.e${constructor(e,t,r,n){super(["Call failed:",`  Canister: ${e.toText()}`,`  Method: ${t} (${r})`,...Object.getOwnPropertyNames(n).map(e=>`  "${e}": ${JSON.stringify(n[e])}`)].join("\n")),this.canisterId=e,this.methodName=t,this.type=r,this.props=n}}class p extends d{constructor(e,t,r){var n;super(e,t,"query",{Status:r.status,Code:null!==(n=i.ur[r.reject_code])&&void 0!==n?n:`Unknown Code "${r.reject_code}"`,Message:r.reject_message}),this.result=r}}class y extends d{constructor(e,t,r,n,i,s,a){super(e,t,"update",Object.assign({"Request ID":(0,u.NC)(r)},n.body?Object.assign(Object.assign({},a?{"Error code":a}:{}),{"Reject code":String(i),"Reject message":s}):{"HTTP status code":n.status.toString(),"HTTP status text":n.statusText})),this.requestId=r,this.response=n,this.reject_code=i,this.reject_message=s,this.error_code=a}}let g=Symbol.for("ic-agent-metadata");class b{constructor(e){this[g]=Object.freeze(e)}static agentOf(e){return e[g].config.agent}static interfaceOf(e){return e[g].service}static canisterIdOf(e){return l.R.from(e[g].config.canisterId)}static async install(e,t){let r=void 0===e.mode?{install:null}:e.mode,n=e.arg?[...new Uint8Array(e.arg)]:[],i=[...new Uint8Array(e.module)],s="string"==typeof t.canisterId?l.R.fromText(t.canisterId):t.canisterId;await _(t).install_code({mode:r,arg:n,wasm_module:i,canister_id:s,sender_canister_version:[]})}static async createCanister(e,t){var r;let{canister_id:n}=await _(e||{}).provisional_create_canister_with_cycles({amount:[],settings:[{controllers:(r=t||{}).controllers?[r.controllers]:[],compute_allocation:r.compute_allocation?[r.compute_allocation]:[],freezing_threshold:r.freezing_threshold?[r.freezing_threshold]:[],memory_allocation:r.memory_allocation?[r.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}],specified_id:[],sender_canister_version:[]});return n}static async createAndInstallCanister(e,t,r){let n=await this.createCanister(r);return await this.install(Object.assign({},t),Object.assign(Object.assign({},r),{canisterId:n})),this.createActor(e,Object.assign(Object.assign({},r),{canisterId:n}))}static createActorClass(e,t){let r=e({IDL:a.xO});return class extends b{constructor(e){if(!e.canisterId)throw new s.e$(`Canister ID is required, but received ${typeof e.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);let n="string"==typeof e.canisterId?l.R.fromText(e.canisterId):e.canisterId;for(let[s,u]of(super({config:Object.assign(Object.assign(Object.assign({},w),e),{canisterId:n}),service:r}),r._fields))(null==t?void 0:t.httpDetails)&&u.annotations.push(v),(null==t?void 0:t.certificate)&&u.annotations.push(E),this[s]=function(e,t,r,n){let s;s=r.annotations.includes("query")||r.annotations.includes("composite_query")?async(n,...s)=>{var o,u;n=Object.assign(Object.assign({},n),null===(u=(o=e[g].config).queryTransform)||void 0===u?void 0:u.call(o,t,s,Object.assign(Object.assign({},e[g].config),n)));let c=n.agent||e[g].config.agent||(0,i.us)(),f=l.R.from(n.canisterId||e[g].config.canisterId),h=a.xO.encode(r.argTypes,s),d=await c.query(f,{methodName:t,arg:h,effectiveCanisterId:n.effectiveCanisterId}),y=Object.assign(Object.assign({},d.httpDetails),{requestDetails:d.requestDetails});switch(d.status){case"rejected":throw new p(f,t,d);case"replied":return r.annotations.includes(v)?{httpDetails:y,result:m(r.retTypes,d.reply.arg)}:m(r.retTypes,d.reply.arg)}}:async(s,...u)=>{var c,h;let d,p;s=Object.assign(Object.assign({},s),null===(h=(c=e[g].config).callTransform)||void 0===h?void 0:h.call(c,t,u,Object.assign(Object.assign({},e[g].config),s)));let b=s.agent||e[g].config.agent||(0,i.us)(),{canisterId:_,effectiveCanisterId:B,pollingStrategyFactory:I}=Object.assign(Object.assign(Object.assign({},w),e[g].config),s),x=l.R.from(_),A=void 0!==B?l.R.from(B):x,T=a.xO.encode(r.argTypes,u),{requestId:S,response:N,requestDetails:O}=await b.call(x,{methodName:t,arg:T,effectiveCanisterId:A});if(N.body&&N.body.certificate){if(null==b.rootKey)throw Error("Agent is missing root key");let e=N.body.certificate;p=await o.KB.create({certificate:(0,a.rS)(e),rootKey:b.rootKey,canisterId:l.R.from(_),blsVerify:n});let r=[new TextEncoder().encode("request_status"),S],i=new TextDecoder().decode((0,o.ti)(p.lookup([...r,"status"])));switch(i){case"replied":d=(0,o.ti)(p.lookup([...r,"reply"]));break;case"rejected":{let e=new Uint8Array((0,o.ti)(p.lookup([...r,"reject_code"])))[0],n=new TextDecoder().decode((0,o.ti)(p.lookup([...r,"reject_message"]))),i=(0,o.ti)(p.lookup([...r,"error_code"])),s=i?new TextDecoder().decode(i):void 0;throw new y(x,t,S,N,e,n,s)}}}else if(N.body&&"reject_message"in N.body){let{reject_code:e,reject_message:r,error_code:n}=N.body;throw new y(x,t,S,N,e,r,n)}if(202===N.status){let e=I(),t=await f(b,A,S,e,n);p=t.certificate,d=t.reply}let R=r.annotations.includes(v),U=r.annotations.includes(E),P=Object.assign(Object.assign({},N),{requestDetails:O});if(void 0!==d)return R&&U?{httpDetails:P,certificate:p,result:m(r.retTypes,d)}:U?{certificate:p,result:m(r.retTypes,d)}:R?{httpDetails:P,result:m(r.retTypes,d)}:m(r.retTypes,d);if(0===r.retTypes.length)return R?{httpDetails:N,result:void 0}:void 0;throw Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};let u=(...e)=>s({},...e);return u.withOptions=e=>(...t)=>s(e,...t),u}(this,s,u,e.blsVerify)}}}static createActor(e,t){if(!t.canisterId)throw new s.e$(`Canister ID is required, but received ${typeof t.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(e))(t)}static createActorWithHttpDetails(e,t){return new(this.createActorClass(e,{httpDetails:!0}))(t)}static createActorWithExtendedDetails(e,t,r={httpDetails:!0,certificate:!0}){return new(this.createActorClass(e,r))(t)}}function m(e,t){let r=a.xO.decode(e,n.lW.from(t));switch(r.length){case 0:return;case 1:return r[0];default:return r}}let w={pollingStrategyFactory:c},v="http-details",E="certificate";function _(e){function t(t,r){if(e.effectiveCanisterId)return{effectiveCanisterId:l.R.from(e.effectiveCanisterId)};let n=r[0],i=l.R.fromHex("");return n&&"object"==typeof n&&n.target_canister&&"install_chunked_code"===t&&(i=l.R.from(n.target_canister)),n&&"object"==typeof n&&n.canister_id&&(i=l.R.from(n.canister_id)),{effectiveCanisterId:i}}return b.createActor(h,Object.assign(Object.assign(Object.assign({},e),{canisterId:l.R.fromHex("")}),{callTransform:t,queryTransform:t}))}r(5617),r(5754);var B=r(4401),I=r(139);r(6814),r(6464),r(6412);var x=r(7543);r(352)},6412:function(e,t,r){"use strict";r.d(t,{E:function(){return u}});var n,i,s=r(139),a=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},o=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class u{constructor(e){if(n.set(this,void 0),i.set(this,void 0),e.byteLength!==u.RAW_KEY_LENGTH)throw Error("An Ed25519 public key must be exactly 32bytes long");a(this,n,e,"f"),a(this,i,u.derEncode(e),"f")}static from(e){return this.fromDer(e.toDer())}static fromRaw(e){return new u(e)}static fromDer(e){return new u(this.derDecode(e))}static derEncode(e){return(0,s.nt)(e,s.BM).buffer}static derDecode(e){let t=(0,s.eZ)(e,s.BM);if(t.length!==this.RAW_KEY_LENGTH)throw Error("An Ed25519 public key must be exactly 32bytes long");return t}get rawKey(){return o(this,n,"f")}get derKey(){return o(this,i,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}n=new WeakMap,i=new WeakMap,u.RAW_KEY_LENGTH=32},7543:function(e,t,r){"use strict";r.d(t,{E$:function(){return f},vH:function(){return c},vp:function(){return o}});var n=r(8435),i=r(8849),s=r(9802),a=r(76);function o(e){return(0,a.wy)(s.JQ.create().update(new Uint8Array(e)).digest())}let u=e=>{let t=new TextEncoder().encode(e);return o(t)};function c(e){return f(e)}function f(e){let t=Object.entries(e).filter(([,e])=>void 0!==e).map(([e,t])=>{let r=u(e),s=function e(t){if(t instanceof i.Tagged)return e(t.value);if("string"==typeof t)return u(t);if("number"==typeof t)return o((0,n.dZ)(t));if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return o(t);if(Array.isArray(t)){let r=t.map(e);return o((0,a.zo)(...r))}if(t&&"object"==typeof t&&t._isPrincipal)return o(t.toUint8Array());if("object"==typeof t&&null!==t&&"function"==typeof t.toHash)return e(t.toHash());else if("object"==typeof t)return f(t);else if("bigint"==typeof t)return o((0,n.dZ)(t));throw Object.assign(Error(`Attempt to hash a value of unsupported type: ${t}`),{value:t})}(t);return[r,s]}),r=t.sort(([e],[t])=>(0,a.qu)(e,t)),s=(0,a.zo)(...r.map(e=>(0,a.zo)(...e))),c=o(s);return c}},76:function(e,t,r){"use strict";function n(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.byteLength,0)),r=0;for(let n of e)t.set(new Uint8Array(n),r),r+=n.byteLength;return t.buffer}function i(e){return[...new Uint8Array(e)].map(e=>e.toString(16).padStart(2,"0")).join("")}r.d(t,{H_:function(){return a},IA:function(){return u},NC:function(){return i},qu:function(){return o},rS:function(){return function e(t){return t instanceof Uint8Array?c(t):t instanceof ArrayBuffer?t:Array.isArray(t)?c(new Uint8Array(t)):"buffer"in t?e(t.buffer):c(new Uint8Array(t))}},wy:function(){return c},zo:function(){return n}});let s=new RegExp(/^[0-9a-fA-F]+$/);function a(e){if(!s.test(e))throw Error("Invalid hexadecimal string.");let t=[...e].reduce((e,t,r)=>(e[r/2|0]=(e[r/2|0]||"")+t,e),[]).map(e=>Number.parseInt(e,16));return new Uint8Array(t).buffer}function o(e,t){if(e.byteLength!==t.byteLength)return e.byteLength-t.byteLength;let r=new Uint8Array(e),n=new Uint8Array(t);for(let e=0;e<r.length;e++)if(r[e]!==n[e])return r[e]-n[e];return 0}function u(e,t){return 0===o(e,t)}function c(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}},792:function(e,t,r){"use strict";r.d(t,{b:function(){return s},o:function(){return i}});var n=r(8435);let i=e=>(0,n.aC)(new n.P8(e)),s=e=>{let t=i(e);return new Date(Number(t)/1e6)}},1928:function(e,t,r){"use strict";let n,i;r.d(t,{LY:function(){return ew}});var s,a,o,u,c,f,l,h,d,p,y=r(1794),g=r(7815),b=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},m=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};function w(e){return null!==e&&"object"==typeof e}class v{constructor(e){if(o.set(this,void 0),u.set(this,void 0),e.byteLength!==v.RAW_KEY_LENGTH)throw Error("An Ed25519 public key must be exactly 32bytes long");b(this,o,e,"f"),b(this,u,v.derEncode(e),"f")}static from(e){if("string"==typeof e){let t=(0,y.H_)(e);return this.fromRaw(t)}if(w(e)){if(w(e)&&Object.hasOwnProperty.call(e,"__derEncodedPublicKey__"))return this.fromDer(e);if(ArrayBuffer.isView(e))return this.fromRaw((0,y.rS)(e.buffer));if(e instanceof ArrayBuffer)return this.fromRaw(e);if("rawKey"in e)return this.fromRaw(e.rawKey);else if("derKey"in e)return this.fromDer(e.derKey);else if("toDer"in e)return this.fromDer(e.toDer())}throw Error("Cannot construct Ed25519PublicKey from the provided key.")}static fromRaw(e){return new v(e)}static fromDer(e){return new v(this.derDecode(e))}static derEncode(e){let t=(0,y.nt)(e,y.BM).buffer;return t.__derEncodedPublicKey__=void 0,t}static derDecode(e){let t=(0,y.eZ)(e,y.BM);if(t.length!==this.RAW_KEY_LENGTH)throw Error("An Ed25519 public key must be exactly 32bytes long");return t}get rawKey(){return m(this,o,"f")}get derKey(){return m(this,u,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}o=new WeakMap,u=new WeakMap,v.RAW_KEY_LENGTH=32;class E extends y.$4{constructor(e,t){super(),c.set(this,void 0),f.set(this,void 0),b(this,c,v.from(e),"f"),b(this,f,new Uint8Array(t),"f")}static generate(e){if(e&&32!==e.length)throw Error("Ed25519 Seed needs to be 32 bytes long.");e||(e=g.UN.utils.randomPrivateKey()),(0,y.IA)(e,new Uint8Array(Array(32).fill(0)))&&console.warn("Seed is all zeros. This is not a secure seed. Please provide a seed with sufficient entropy if this is a production environment.");let t=new Uint8Array(32);for(let r=0;r<32;r++)t[r]=new Uint8Array(e)[r];let r=g.UN.getPublicKey(t);return E.fromKeyPair(r,t)}static fromParsedJson(e){let[t,r]=e;return new E(v.fromDer((0,y.H_)(t)),(0,y.H_)(r))}static fromJSON(e){let t=JSON.parse(e);if(Array.isArray(t)){if("string"==typeof t[0]&&"string"==typeof t[1])return this.fromParsedJson([t[0],t[1]]);throw Error("Deserialization error: JSON must have at least 2 items.")}throw Error(`Deserialization error: Invalid JSON type for string: ${JSON.stringify(e)}`)}static fromKeyPair(e,t){return new E(v.fromRaw(e),t)}static fromSecretKey(e){let t=g.UN.getPublicKey(new Uint8Array(e));return E.fromKeyPair(t,e)}toJSON(){return[(0,y.NC)(m(this,c,"f").toDer()),(0,y.NC)(m(this,f,"f"))]}getKeyPair(){return{secretKey:m(this,f,"f"),publicKey:m(this,c,"f")}}getPublicKey(){return m(this,c,"f")}async sign(e){let t=new Uint8Array(e),r=(0,y.wy)(g.UN.sign(t,m(this,f,"f").slice(0,32)));return Object.defineProperty(r,"__signature__",{enumerable:!1,value:void 0}),r}static verify(e,t,r){let[n,i,s]=[e,t,r].map(e=>("string"==typeof e&&(e=(0,y.H_)(e)),e instanceof Uint8Array&&(e=e.buffer),new Uint8Array(e)));return g.UN.verify(i,n,s)}}c=new WeakMap,f=new WeakMap;class _ extends Error{constructor(e){super(e),this.message=e,Object.setPrototypeOf(this,_.prototype)}}function B(e){if(void 0!==r.g&&r.g.crypto&&r.g.crypto.subtle)return r.g.crypto.subtle;if(e)return e;if("undefined"!=typeof crypto&&crypto.subtle)return crypto.subtle;throw new _("Global crypto was not available and none was provided. Please inlcude a SubtleCrypto implementation. See https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto")}class I extends y.$4{constructor(e,t,r){super(),this._keyPair=e,this._derKey=t,this._subtleCrypto=r}static async generate(e){let{extractable:t=!1,keyUsages:r=["sign","verify"],subtleCrypto:n}=null!=e?e:{},i=B(n),s=await i.generateKey({name:"ECDSA",namedCurve:"P-256"},t,r),a=await i.exportKey("spki",s.publicKey);return new this(s,a,i)}static async fromKeyPair(e,t){let r=B(t),n=await r.exportKey("spki",e.publicKey);return new I(e,n,r)}getKeyPair(){return this._keyPair}getPublicKey(){let e=this._derKey,t=Object.create(this._keyPair.publicKey);return t.toDer=function(){return e},t}async sign(e){let t=await this._subtleCrypto.sign({name:"ECDSA",hash:{name:"SHA-256"}},this._keyPair.privateKey,e);return t}}var x=r(8615),A=r(9185),T=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},S=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class N{constructor(e){l.set(this,void 0),T(this,l,e,"f")}get rawKey(){return S(this,l,"f").rawKey}get derKey(){return S(this,l,"f").derKey}toDer(){return S(this,l,"f").toDer()}getPublicKey(){return S(this,l,"f")}getPrincipal(){return x.R.from(S(this,l,"f").rawKey)}transformRequest(){return Promise.reject("Not implemented. You are attempting to use a partial identity to sign calls, but this identity only has access to the public key.To sign calls, use a DelegationIdentity instead.")}}l=new WeakMap;var O=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},R=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},U=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};let P=new TextEncoder().encode("\x1aic-request-auth-delegation"),L=new TextEncoder().encode("\nic-request");function k(e){if("string"!=typeof e||e.length<64)throw Error("Invalid public key.");return(0,y.H_)(e)}class F{constructor(e,t,r){this.pubkey=e,this.expiration=t,this.targets=r}toCBOR(){return A.value.map(Object.assign({pubkey:A.value.bytes(this.pubkey),expiration:A.value.u64(this.expiration.toString(16),16)},this.targets&&{targets:A.value.array(this.targets.map(e=>A.value.bytes(e.toUint8Array())))}))}toJSON(){return Object.assign({expiration:this.expiration.toString(16),pubkey:(0,y.NC)(this.pubkey)},this.targets&&{targets:this.targets.map(e=>e.toHex())})}}async function j(e,t,r,n){let i=new F(t.toDer(),BigInt(+r)*BigInt(1e6),n),s=new Uint8Array([...P,...new Uint8Array((0,y.vH)(Object.assign({},i)))]),a=await e.sign(s);return{delegation:i,signature:a}}class C{constructor(e,t){this.delegations=e,this.publicKey=t}static async create(e,t,r=new Date(Date.now()+9e5),n={}){var i,s;let a=await j(e,t,r,n.targets);return new C([...(null===(i=n.previous)||void 0===i?void 0:i.delegations)||[],a],(null===(s=n.previous)||void 0===s?void 0:s.publicKey)||e.getPublicKey().toDer())}static fromJSON(e){let{publicKey:t,delegations:r}="string"==typeof e?JSON.parse(e):e;if(!Array.isArray(r))throw Error("Invalid delegations.");let n=r.map(e=>{let{delegation:t,signature:r}=e,{pubkey:n,expiration:i,targets:s}=t;if(void 0!==s&&!Array.isArray(s))throw Error("Invalid targets.");return{delegation:new F(k(n),BigInt("0x"+i),s&&s.map(e=>{if("string"!=typeof e)throw Error("Invalid target.");return x.R.fromHex(e)})),signature:k(r)}});return new this(n,k(t))}static fromDelegations(e,t){return new this(e,t)}toJSON(){return{delegations:this.delegations.map(e=>{let{delegation:t,signature:r}=e,{targets:n}=t;return{delegation:Object.assign({expiration:t.expiration.toString(16),pubkey:(0,y.NC)(t.pubkey)},n&&{targets:n.map(e=>e.toHex())}),signature:(0,y.NC)(r)}}),publicKey:(0,y.NC)(this.publicKey)}}}class D extends y.$4{constructor(e,t){super(),this._inner=e,this._delegation=t}static fromDelegation(e,t){return new this(e,t)}getDelegation(){return this._delegation}getPublicKey(){return{derKey:this._delegation.publicKey,toDer:()=>this._delegation.publicKey}}sign(e){return this._inner.sign(e)}async transformRequest(e){let{body:t}=e,r=U(e,["body"]),n=await (0,y.vH)(t);return Object.assign(Object.assign({},r),{body:{content:t,sender_sig:await this.sign(new Uint8Array([...L,...new Uint8Array(n)])),sender_delegation:this._delegation.delegations,sender_pubkey:this._delegation.publicKey}})}}class M extends N{constructor(e,t){super(e),h.set(this,void 0),O(this,h,t,"f")}get delegation(){return R(this,h,"f")}static fromDelegation(e,t){return new M(e,t)}}h=new WeakMap,r(8849),r(8435),(a=d||(d={}))[a.ECDSA_WITH_SHA256=-7]="ECDSA_WITH_SHA256";let V=["mousedown","mousemove","keydown","touchstart","wheel"];class q{constructor(e={}){var t;this.callbacks=[],this.idleTimeout=6e5,this.timeoutID=void 0;let{onIdle:r,idleTimeout:n=6e5}=e||{};this.callbacks=r?[r]:[],this.idleTimeout=n;let i=this._resetTimer.bind(this);if(window.addEventListener("load",i,!0),V.forEach(function(e){document.addEventListener(e,i,!0)}),null==e?void 0:e.captureScroll){let r=((e,t)=>{let r;return(...n)=>{let i=this;clearTimeout(r),r=window.setTimeout(function(){r=void 0,e.apply(i,n)},t)}})(i,null!==(t=null==e?void 0:e.scrollDebounce)&&void 0!==t?t:100);window.addEventListener("scroll",r,!0)}i()}static create(e={}){return new this(e)}registerCallback(e){this.callbacks.push(e)}exit(){clearTimeout(this.timeoutID),window.removeEventListener("load",this._resetTimer,!0);let e=this._resetTimer.bind(this);V.forEach(function(t){document.removeEventListener(t,e,!0)}),this.callbacks.forEach(e=>e())}_resetTimer(){let e=this.exit.bind(this);window.clearTimeout(this.timeoutID),this.timeoutID=window.setTimeout(e,this.idleTimeout)}}let $=(e,t)=>t.some(t=>e instanceof t),z=new WeakMap,H=new WeakMap,K=new WeakMap,G=new WeakMap,W=new WeakMap,Z={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return H.get(e);if("objectStoreNames"===t)return e.objectStoreNames||K.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Y(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Y(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Y(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&z.set(t,e)}).catch(()=>{}),W.set(t,e),t}(e);if(G.has(e))return G.get(e);let r="function"==typeof(t=e)?t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(J(this),e),Y(z.get(this))}:function(...e){return Y(t.apply(J(this),e))}:function(e,...r){let n=t.call(J(this),e,...r);return K.set(n,e.sort?e.sort():[e]),Y(n)}:(t instanceof IDBTransaction&&function(e){if(H.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});H.set(e,t)}(t),$(t,n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,Z):t;return r!==e&&(G.set(e,r),W.set(r,e)),r}let J=e=>W.get(e),Q=["get","getKey","getAll","getAllKeys","count"],X=["put","add","delete","clear"],ee=new Map;function et(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(ee.get(t))return ee.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=X.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Q.includes(r)))return;let s=async function(e,...t){let s=this.transaction(e,i?"readwrite":"readonly"),a=s.store;return n&&(a=a.index(t.shift())),(await Promise.all([a[r](...t),i&&s.done]))[0]};return ee.set(t,s),s}Z={...s=Z,get:(e,t,r)=>et(e,t)||s.get(e,t,r),has:(e,t)=>!!et(e,t)||s.has(e,t)};let er="auth-client-db",en="ic-keyval",ei=async(e=er,t=en,r)=>(ep&&(null==localStorage?void 0:localStorage.getItem(eh))&&(localStorage.removeItem(eh),localStorage.removeItem(el)),await function(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){let a=indexedDB.open(e,t),o=Y(a);return n&&a.addEventListener("upgradeneeded",e=>{n(Y(a.result),e.oldVersion,e.newVersion,Y(a.transaction),e)}),r&&a.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}(e,r,{upgrade:e=>{e.objectStoreNames.contains(t)&&e.clear(t),e.createObjectStore(t)}}));async function es(e,t,r){return await e.get(t,r)}async function ea(e,t,r,n){return await e.put(t,n,r)}async function eo(e,t,r){return await e.delete(t,r)}class eu{constructor(e,t){this._db=e,this._storeName=t}static async create(e){let{dbName:t=er,storeName:r=en,version:n=ed}=null!=e?e:{},i=await ei(t,r,n);return new eu(i,r)}async set(e,t){return await ea(this._db,this._storeName,e,t)}async get(e){var t;return null!==(t=await es(this._db,this._storeName,e))&&void 0!==t?t:null}async remove(e){return await eo(this._db,this._storeName,e)}}var ec=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},ef=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};let el="identity",eh="delegation",ed=1,ep="undefined"!=typeof window;class ey{constructor(e="ic-",t){this.prefix=e,this._localStorage=t}get(e){return Promise.resolve(this._getLocalStorage().getItem(this.prefix+e))}set(e,t){return this._getLocalStorage().setItem(this.prefix+e,t),Promise.resolve()}remove(e){return this._getLocalStorage().removeItem(this.prefix+e),Promise.resolve()}_getLocalStorage(){if(this._localStorage)return this._localStorage;let e="undefined"==typeof window?void 0===r.g?"undefined"==typeof self?void 0:self.localStorage:r.g.localStorage:window.localStorage;if(!e)throw Error("Could not find local storage.");return e}}class eg{constructor(e){p.set(this,void 0),ec(this,p,null!=e?e:{},"f")}get _db(){return new Promise(e=>{if(this.initializedDb){e(this.initializedDb);return}eu.create(ef(this,p,"f")).then(t=>{this.initializedDb=t,e(t)})})}async get(e){let t=await this._db;return await t.get(e)}async set(e,t){let r=await this._db;await r.set(e,t)}async remove(e){let t=await this._db;await t.remove(e)}}p=new WeakMap;let eb="ECDSA",em="Ed25519";class ew{constructor(e,t,r,n,i,s,a,o){this._identity=e,this._key=t,this._chain=r,this._storage=n,this.idleManager=i,this._createOptions=s,this._idpWindow=a,this._eventHandler=o,this._registerDefaultIdleCallback()}static async create(e={}){var t,r,n;let i;let s=null!==(t=e.storage)&&void 0!==t?t:new eg,a=null!==(r=e.keyType)&&void 0!==r?r:eb,o=null;if(e.identity)o=e.identity;else{let e=await s.get(el);if(!e&&ep)try{let t=new ey,r=await t.get(eh),n=await t.get(el);r&&n&&a===eb&&(console.log("Discovered an identity stored in localstorage. Migrating to IndexedDB"),await s.set(eh,r),await s.set(el,n),e=r,await t.remove(eh),await t.remove(el))}catch(e){console.error("error while attempting to recover localstorage: "+e)}if(e)try{"object"==typeof e?o=a===em&&"string"==typeof e?await E.fromJSON(e):await I.fromKeyPair(e):"string"==typeof e&&(o=E.fromJSON(e))}catch(e){}}let u=new y.ed,c=null;if(o)try{let t=await s.get(eh);if("object"==typeof t&&null!==t)throw Error("Delegation chain is incorrectly stored. A delegation chain should be stored as a string.");e.identity?u=e.identity:t&&(c=C.fromJSON(t),function(e,t){for(let{delegation:t}of e.delegations)if(+new Date(Number(t.expiration/BigInt(1e6)))<=+Date.now())return!1;let r=[],n=null==t?void 0:t.scope;for(let t of(n&&(Array.isArray(n)?r.push(...n.map(e=>"string"==typeof e?x.R.fromText(e):e)):r.push("string"==typeof n?x.R.fromText(n):n)),r)){let r=t.toText();for(let{delegation:t}of e.delegations){if(void 0===t.targets)continue;let e=!0;for(let n of t.targets)if(n.toText()===r){e=!1;break}if(e)return!1}}return!0}(c)?u="toDer"in o?M.fromDelegation(o,c):D.fromDelegation(o,c):(await ev(s),o=null))}catch(e){console.error(e),await ev(s),o=null}return(null===(n=e.idleOptions)||void 0===n?void 0:n.disableIdle)?i=void 0:(c||e.identity)&&(i=q.create(e.idleOptions)),o||(a===em?(o=await E.generate(),await s.set(el,JSON.stringify(o.toJSON()))):(e.storage&&a===eb&&console.warn(`You are using a custom storage provider that may not support CryptoKey storage. If you are using a custom storage provider that does not support CryptoKey storage, you should use '${em}' as the key type, as it can serialize to a string`),o=await I.generate(),await s.set(el,o.getKeyPair()))),new this(u,o,c,s,i,e)}_registerDefaultIdleCallback(){var e,t;let r=null===(e=this._createOptions)||void 0===e?void 0:e.idleOptions;(null==r?void 0:r.onIdle)||(null==r?void 0:r.disableDefaultIdleCallback)||null===(t=this.idleManager)||void 0===t||t.registerCallback(()=>{this.logout(),location.reload()})}async _handleSuccess(e,t){var r,n;let i=e.delegations.map(e=>({delegation:new F(e.delegation.pubkey,e.delegation.expiration,e.delegation.targets),signature:e.signature.buffer})),s=C.fromDelegations(i,e.userPublicKey.buffer),a=this._key;if(!a)return;this._chain=s,"toDer"in a?this._identity=M.fromDelegation(a,this._chain):this._identity=D.fromDelegation(a,this._chain),null===(r=this._idpWindow)||void 0===r||r.close();let o=null===(n=this._createOptions)||void 0===n?void 0:n.idleOptions;this.idleManager||(null==o?void 0:o.disableIdle)||(this.idleManager=q.create(o),this._registerDefaultIdleCallback()),this._removeEventListener(),delete this._idpWindow,this._chain&&await this._storage.set(eh,JSON.stringify(this._chain.toJSON())),null==t||t(e)}getIdentity(){return this._identity}async isAuthenticated(){return!this.getIdentity().getPrincipal().isAnonymous()&&null!==this._chain}async login(e){var t,r,n,i;let s=BigInt(8)*BigInt(36e11),a=new URL((null===(t=null==e?void 0:e.identityProvider)||void 0===t?void 0:t.toString())||"https://identity.ic0.app");a.hash="#authorize",null===(r=this._idpWindow)||void 0===r||r.close(),this._removeEventListener(),this._eventHandler=this._getEventHandler(a,Object.assign({maxTimeToLive:null!==(n=null==e?void 0:e.maxTimeToLive)&&void 0!==n?n:s},e)),window.addEventListener("message",this._eventHandler),this._idpWindow=null!==(i=window.open(a.toString(),"idpWindow",null==e?void 0:e.windowOpenerFeatures))&&void 0!==i?i:void 0;let o=()=>{this._idpWindow&&(this._idpWindow.closed?this._handleFailure("UserInterrupt",null==e?void 0:e.onError):setTimeout(o,500))};o()}_getEventHandler(e,t){return async r=>{var n,i,s;if(r.origin!==e.origin)return;let a=r.data;switch(a.kind){case"authorize-ready":{let r=Object.assign({kind:"authorize-client",sessionPublicKey:new Uint8Array(null===(n=this._key)||void 0===n?void 0:n.getPublicKey().toDer()),maxTimeToLive:null==t?void 0:t.maxTimeToLive,allowPinAuthentication:null==t?void 0:t.allowPinAuthentication,derivationOrigin:null===(i=null==t?void 0:t.derivationOrigin)||void 0===i?void 0:i.toString()},null==t?void 0:t.customValues);null===(s=this._idpWindow)||void 0===s||s.postMessage(r,e.origin);break}case"authorize-client-success":try{await this._handleSuccess(a,null==t?void 0:t.onSuccess)}catch(e){this._handleFailure(e.message,null==t?void 0:t.onError)}break;case"authorize-client-failure":this._handleFailure(a.text,null==t?void 0:t.onError)}}}_handleFailure(e,t){var r;null===(r=this._idpWindow)||void 0===r||r.close(),null==t||t(e),this._removeEventListener(),delete this._idpWindow}_removeEventListener(){this._eventHandler&&window.removeEventListener("message",this._eventHandler),this._eventHandler=void 0}async logout(e={}){if(await ev(this._storage),this._identity=new y.ed,this._chain=null,e.returnTo)try{window.history.pushState({},"",e.returnTo)}catch(t){window.location.href=e.returnTo}}}async function ev(e){await e.remove(el),await e.remove(eh),await e.remove("iv")}},8435:function(e,t,r){"use strict";r.d(t,{xO:function(){return n},P8:function(){return a},rS:function(){return u},aC:function(){return p},dZ:function(){return d}});var n={};r.r(n),r.d(n,{Bool:function(){return ee},BoolClass:function(){return N},ConstructType:function(){return A},Empty:function(){return J},EmptyClass:function(){return T},FixedIntClass:function(){return F},FixedNatClass:function(){return j},Float32:function(){return es},Float64:function(){return ea},FloatClass:function(){return k},Func:function(){return e_},FuncClass:function(){return K},Int:function(){return en},Int16:function(){return eu},Int32:function(){return ec},Int64:function(){return ef},Int8:function(){return eo},IntClass:function(){return P},Nat:function(){return ei},Nat16:function(){return eh},Nat32:function(){return ed},Nat64:function(){return ep},Nat8:function(){return el},NatClass:function(){return L},Null:function(){return et},NullClass:function(){return O},Opt:function(){return em},OptClass:function(){return D},PrimitiveType:function(){return x},Principal:function(){return ey},PrincipalClass:function(){return H},Rec:function(){return eE},RecClass:function(){return $},Record:function(){return ew},RecordClass:function(){return M},Reserved:function(){return Q},ReservedClass:function(){return R},Service:function(){return eB},ServiceClass:function(){return G},Text:function(){return er},TextClass:function(){return U},Tuple:function(){return eg},TupleClass:function(){return V},Type:function(){return I},Unknown:function(){return X},UnknownClass:function(){return S},Variant:function(){return ev},VariantClass:function(){return q},Vec:function(){return eb},VecClass:function(){return C},Visitor:function(){return B},decode:function(){return Y},encode:function(){return Z}});var i=r(8615);function s(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.byteLength,0)),r=0;for(let n of e)t.set(new Uint8Array(n),r),r+=n.byteLength;return t}class a{constructor(e,t=(null==e?void 0:e.byteLength)||0){this._buffer=u(e||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,t)}get buffer(){return u(this._view.slice())}get byteLength(){return this._view.byteLength}read(e){let t=this._view.subarray(0,e);return this._view=this._view.subarray(e),t.slice().buffer}readUint8(){let e=this._view[0];return this._view=this._view.subarray(1),e}write(e){let t=new Uint8Array(e),r=this._view.byteLength;this._view.byteOffset+this._view.byteLength+t.byteLength>=this._buffer.byteLength?this.alloc(t.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+t.byteLength),this._view.set(t,r)}get end(){return 0===this._view.byteLength}alloc(e){let t=new ArrayBuffer((this._buffer.byteLength+e)*1.2|0),r=new Uint8Array(t,0,this._view.byteLength+e);r.set(this._view),this._buffer=t,this._view=r}}function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}function u(e){return e instanceof Uint8Array?o(e):e instanceof ArrayBuffer?e:Array.isArray(e)?o(new Uint8Array(e)):"buffer"in e?u(e.buffer):o(new Uint8Array(e))}function c(e){if(/^_\d+_$/.test(e)||/^_0x[0-9a-fA-F]+_$/.test(e)){let t=+e.slice(1,-1);if(Number.isSafeInteger(t)&&t>=0&&t<4294967296)return t}return function(e){let t=new TextEncoder,r=t.encode(e),n=0;for(let e of r)n=(223*n+e)%4294967296;return n}(e)}function f(){throw Error("unexpected end of buffer")}function l(e,t){return e.byteLength<t&&f(),e.read(t)}function h(e){let t=e.readUint8();return void 0===t&&f(),t}function d(e){if("number"==typeof e&&(e=BigInt(e)),e<BigInt(0))throw Error("Cannot leb encode negative values.");let t=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,r=new a(new ArrayBuffer(t),0);for(;;){let t=Number(e&BigInt(127));if((e/=BigInt(128))===BigInt(0)){r.write(new Uint8Array([t]));break}r.write(new Uint8Array([128|t]))}return r.buffer}function p(e){let t,r=BigInt(1),n=BigInt(0);do n+=BigInt(127&(t=h(e))).valueOf()*r,r*=BigInt(128);while(t>=128);return n}function y(e){"number"==typeof e&&(e=BigInt(e));let t=e<BigInt(0);t&&(e=-e-BigInt(1));let r=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,n=new a(new ArrayBuffer(r),0);for(;;){let r=function(e){let r=e%BigInt(128);return t?Number(BigInt(128)-r-BigInt(1)):Number(r)}(e);if(e/=BigInt(128),t&&e===BigInt(0)&&(64&r)!=0||!t&&e===BigInt(0)&&(64&r)==0){n.write(new Uint8Array([r]));break}n.write(new Uint8Array([128|r]))}return n.buffer}function g(e){let t=new Uint8Array(e.buffer),r=0;for(;r<t.byteLength;r++)if(t[r]<128){if((64&t[r])==0)return p(e);break}let n=new Uint8Array(l(e,r+1)),i=BigInt(0);for(let e=n.byteLength-1;e>=0;e--)i=i*BigInt(128)+BigInt(128-(127&n[e])-1);return-i-BigInt(1)}function b(e,t){e=BigInt(e);let r=new a(new ArrayBuffer(Math.min(1,t)),0),n=0,i=BigInt(256),s=BigInt(0),o=Number(e%i);for(r.write(new Uint8Array([o]));++n<t;)e<0&&s===BigInt(0)&&0!==o&&(s=BigInt(1)),o=Number((e/i-s)%BigInt(256)),r.write(new Uint8Array([o])),i*=BigInt(256);return r.buffer}function m(e,t){let r=BigInt(h(e)),n=BigInt(1),i=0;for(;++i<t;){n*=BigInt(256);let t=BigInt(h(e));r+=n*t}return r}function w(e){let t=BigInt(e);if(e<0)throw RangeError("Input must be non-negative");return BigInt(1)<<t}let v="DIDL";function E(e,t,r){return e.map((e,n)=>r(e,t[n]))}class _{constructor(){this._typs=[],this._idx=new Map}has(e){return this._idx.has(e.name)}add(e,t){let r=this._typs.length;this._idx.set(e.name,r),this._typs.push(t)}merge(e,t){let r=this._idx.get(e.name),n=this._idx.get(t);if(void 0===r)throw Error("Missing type index for "+e);if(void 0===n)throw Error("Missing type index for "+t);this._typs[r]=this._typs[n],this._typs.splice(n,1),this._idx.delete(t)}encode(){let e=d(this._typs.length),t=s(...this._typs);return s(e,t)}indexOf(e){if(!this._idx.has(e))throw Error("Missing type index for "+e);return y(this._idx.get(e)||0)}}class B{visitType(e,t){throw Error("Not implemented")}visitPrimitive(e,t){return this.visitType(e,t)}visitEmpty(e,t){return this.visitPrimitive(e,t)}visitBool(e,t){return this.visitPrimitive(e,t)}visitNull(e,t){return this.visitPrimitive(e,t)}visitReserved(e,t){return this.visitPrimitive(e,t)}visitText(e,t){return this.visitPrimitive(e,t)}visitNumber(e,t){return this.visitPrimitive(e,t)}visitInt(e,t){return this.visitNumber(e,t)}visitNat(e,t){return this.visitNumber(e,t)}visitFloat(e,t){return this.visitPrimitive(e,t)}visitFixedInt(e,t){return this.visitNumber(e,t)}visitFixedNat(e,t){return this.visitNumber(e,t)}visitPrincipal(e,t){return this.visitPrimitive(e,t)}visitConstruct(e,t){return this.visitType(e,t)}visitVec(e,t,r){return this.visitConstruct(e,r)}visitOpt(e,t,r){return this.visitConstruct(e,r)}visitRecord(e,t,r){return this.visitConstruct(e,r)}visitTuple(e,t,r){let n=t.map((e,t)=>[`_${t}_`,e]);return this.visitRecord(e,n,r)}visitVariant(e,t,r){return this.visitConstruct(e,r)}visitRec(e,t,r){return this.visitConstruct(t,r)}visitFunc(e,t){return this.visitConstruct(e,t)}visitService(e,t){return this.visitConstruct(e,t)}}class I{display(){return this.name}valueToString(e){return W(e)}buildTypeTable(e){e.has(this)||this._buildTypeTableImpl(e)}}class x extends I{checkType(e){if(this.name!==e.name)throw Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`);return e}_buildTypeTableImpl(e){}}class A extends I{checkType(e){if(e instanceof $){let t=e.getType();if(void 0===t)throw Error("type mismatch with uninitialized type");return t}throw Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`)}encodeType(e){return e.indexOf(this.name)}}class T extends x{accept(e,t){return e.visitEmpty(this,t)}covariant(e){throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(){throw Error("Empty cannot appear as a function argument")}valueToString(){throw Error("Empty cannot appear as a value")}encodeType(){return y(-17)}decodeValue(){throw Error("Empty cannot appear as an output")}get name(){return"empty"}}class S extends I{checkType(e){throw Error("Method not implemented for unknown.")}accept(e,t){throw e.visitType(this,t)}covariant(e){throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(){throw Error("Unknown cannot appear as a function argument")}valueToString(){throw Error("Unknown cannot appear as a value")}encodeType(){throw Error("Unknown cannot be serialized")}decodeValue(e,t){let r=t.decodeValue(e,t);return Object(r)!==r&&(r=Object(r)),Object.defineProperty(r,"type",{value:t instanceof $?()=>t.getType():()=>t,writable:!0,enumerable:!1,configurable:!0}),r}_buildTypeTableImpl(){throw Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class N extends x{accept(e,t){return e.visitBool(this,t)}covariant(e){if("boolean"==typeof e)return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){return new Uint8Array([e?1:0])}encodeType(){return y(-2)}decodeValue(e,t){switch(this.checkType(t),h(e)){case 0:return!1;case 1:return!0;default:throw Error("Boolean value out of range")}}get name(){return"bool"}}class O extends x{accept(e,t){return e.visitNull(this,t)}covariant(e){if(null===e)return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return y(-1)}decodeValue(e,t){return this.checkType(t),null}get name(){return"null"}}class R extends x{accept(e,t){return e.visitReserved(this,t)}covariant(e){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return y(-16)}decodeValue(e,t){return t.name!==this.name&&t.decodeValue(e,t),null}get name(){return"reserved"}}class U extends x{accept(e,t){return e.visitText(this,t)}covariant(e){if("string"==typeof e)return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){let t=new TextEncoder().encode(e),r=d(t.byteLength);return s(r,t)}encodeType(){return y(-15)}decodeValue(e,t){this.checkType(t);let r=p(e),n=l(e,Number(r)),i=new TextDecoder("utf8",{fatal:!0});return i.decode(n)}get name(){return"text"}valueToString(e){return'"'+e+'"'}}class P extends x{accept(e,t){return e.visitInt(this,t)}covariant(e){if("bigint"==typeof e||Number.isInteger(e))return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){return y(e)}encodeType(){return y(-4)}decodeValue(e,t){return this.checkType(t),g(e)}get name(){return"int"}valueToString(e){return e.toString()}}class L extends x{accept(e,t){return e.visitNat(this,t)}covariant(e){if("bigint"==typeof e&&e>=BigInt(0)||Number.isInteger(e)&&e>=0)return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){return d(e)}encodeType(){return y(-3)}decodeValue(e,t){return this.checkType(t),p(e)}get name(){return"nat"}valueToString(e){return e.toString()}}class k extends x{constructor(e){if(super(),this._bits=e,32!==e&&64!==e)throw Error("not a valid float type")}accept(e,t){return e.visitFloat(this,t)}covariant(e){if("number"==typeof e||e instanceof Number)return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){let t=new ArrayBuffer(this._bits/8),r=new DataView(t);return 32===this._bits?r.setFloat32(0,e,!0):r.setFloat64(0,e,!0),t}encodeType(){let e=32===this._bits?-13:-14;return y(e)}decodeValue(e,t){this.checkType(t);let r=l(e,this._bits/8),n=new DataView(r);return 32===this._bits?n.getFloat32(0,!0):n.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(e){return e.toString()}}class F extends x{constructor(e){super(),this._bits=e}accept(e,t){return e.visitFixedInt(this,t)}covariant(e){let t=w(this._bits-1)*BigInt(-1),r=w(this._bits-1)-BigInt(1),n=!1;if("bigint"==typeof e)n=e>=t&&e<=r;else if(Number.isInteger(e)){let i=BigInt(e);n=i>=t&&i<=r}else n=!1;if(n)return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){return b(e,this._bits/8)}encodeType(){let e=Math.log2(this._bits)-3;return y(-9-e)}decodeValue(e,t){this.checkType(t);let r=function(e,t){let r=m(e,t),n=BigInt(2)**(BigInt(8)*BigInt(t-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}(e,this._bits/8);return this._bits<=32?Number(r):r}get name(){return`int${this._bits}`}valueToString(e){return e.toString()}}class j extends x{constructor(e){super(),this._bits=e}accept(e,t){return e.visitFixedNat(this,t)}covariant(e){let t=w(this._bits),r=!1;if("bigint"==typeof e&&e>=BigInt(0))r=e<t;else if(Number.isInteger(e)&&e>=0){let n=BigInt(e);r=n<t}else r=!1;if(r)return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){return function(e,t){if(BigInt(e)<BigInt(0))throw Error("Cannot write negative values.");return b(e,t)}(e,this._bits/8)}encodeType(){let e=Math.log2(this._bits)-3;return y(-5-e)}decodeValue(e,t){this.checkType(t);let r=m(e,this._bits/8);return this._bits<=32?Number(r):r}get name(){return`nat${this._bits}`}valueToString(e){return e.toString()}}class C extends A{constructor(e){super(),this._type=e,this._blobOptimization=!1,e instanceof j&&8===e._bits&&(this._blobOptimization=!0)}accept(e,t){return e.visitVec(this,this._type,t)}covariant(e){let t=this._type instanceof j?this._type._bits:this._type instanceof F?this._type._bits:0;if(ArrayBuffer.isView(e)&&t==8*e.BYTES_PER_ELEMENT||Array.isArray(e)&&e.every((e,t)=>{try{return this._type.covariant(e)}catch(e){throw Error(`Invalid ${this.display()} argument: 

index ${t} -> ${e.message}`)}}))return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){let t=d(e.length);if(this._blobOptimization)return s(t,new Uint8Array(e));if(ArrayBuffer.isView(e))return s(t,new Uint8Array(e.buffer));let r=new a(new ArrayBuffer(t.byteLength+e.length),0);for(let n of(r.write(t),e)){let e=this._type.encodeValue(n);r.write(new Uint8Array(e))}return r.buffer}_buildTypeTableImpl(e){this._type.buildTypeTable(e);let t=y(-19),r=this._type.encodeType(e);e.add(this,s(t,r))}decodeValue(e,t){let r=this.checkType(t);if(!(r instanceof C))throw Error("Not a vector type");let n=Number(p(e));if(this._type instanceof j){if(8==this._type._bits)return new Uint8Array(e.read(n));if(16==this._type._bits)return new Uint16Array(e.read(2*n));if(32==this._type._bits)return new Uint32Array(e.read(4*n));if(64==this._type._bits)return new BigUint64Array(e.read(8*n))}if(this._type instanceof F){if(8==this._type._bits)return new Int8Array(e.read(n));if(16==this._type._bits)return new Int16Array(e.read(2*n));if(32==this._type._bits)return new Int32Array(e.read(4*n));if(64==this._type._bits)return new BigInt64Array(e.read(8*n))}let i=[];for(let t=0;t<n;t++)i.push(this._type.decodeValue(e,r._type));return i}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(e){let t=e.map(e=>this._type.valueToString(e));return"vec {"+t.join("; ")+"}"}}class D extends A{constructor(e){super(),this._type=e}accept(e,t){return e.visitOpt(this,this._type,t)}covariant(e){try{if(Array.isArray(e)&&(0===e.length||1===e.length&&this._type.covariant(e[0])))return!0}catch(t){throw Error(`Invalid ${this.display()} argument: ${W(e)} 

-> ${t.message}`)}throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){return 0===e.length?new Uint8Array([0]):s(new Uint8Array([1]),this._type.encodeValue(e[0]))}_buildTypeTableImpl(e){this._type.buildTypeTable(e);let t=y(-18),r=this._type.encodeType(e);e.add(this,s(t,r))}decodeValue(e,t){let r=this.checkType(t);if(!(r instanceof D))throw Error("Not an option type");switch(h(e)){case 0:return[];case 1:return[this._type.decodeValue(e,r._type)];default:throw Error("Not an option value")}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(e){return 0===e.length?"null":`opt ${this._type.valueToString(e[0])}`}}class M extends A{constructor(e={}){super(),this._fields=Object.entries(e).sort((e,t)=>c(e[0])-c(t[0]))}accept(e,t){return e.visitRecord(this,this._fields,t)}tryAsTuple(){let e=[];for(let t=0;t<this._fields.length;t++){let[r,n]=this._fields[t];if(r!==`_${t}_`)return null;e.push(n)}return e}covariant(e){if("object"==typeof e&&this._fields.every(([t,r])=>{if(!e.hasOwnProperty(t))throw Error(`Record is missing key "${t}".`);try{return r.covariant(e[t])}catch(e){throw Error(`Invalid ${this.display()} argument: 

field ${t} -> ${e.message}`)}}))return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){let t=this._fields.map(([t])=>e[t]),r=E(this._fields,t,([,e],t)=>e.encodeValue(t));return s(...r)}_buildTypeTableImpl(e){this._fields.forEach(([t,r])=>r.buildTypeTable(e));let t=y(-20),r=d(this._fields.length),n=this._fields.map(([t,r])=>s(d(c(t)),r.encodeType(e)));e.add(this,s(t,r,s(...n)))}decodeValue(e,t){let r=this.checkType(t);if(!(r instanceof M))throw Error("Not a record type");let n={},i=0,s=0;for(;s<r._fields.length;){let[t,a]=r._fields[s];if(i>=this._fields.length){a.decodeValue(e,a),s++;continue}let[o,u]=this._fields[i],f=c(this._fields[i][0]),l=c(t);if(f===l)n[o]=u.decodeValue(e,a),i++,s++;else if(l>f){if(u instanceof D||u instanceof R)n[o]=[],i++;else throw Error("Cannot find required field "+o)}else a.decodeValue(e,a),s++}for(let[e,t]of this._fields.slice(i))if(t instanceof D||t instanceof R)n[e]=[];else throw Error("Cannot find required field "+e);return n}get name(){let e=this._fields.map(([e,t])=>e+":"+t.name);return`record {${e.join("; ")}}`}display(){let e=this._fields.map(([e,t])=>e+":"+t.display());return`record {${e.join("; ")}}`}valueToString(e){let t=this._fields.map(([t])=>e[t]),r=E(this._fields,t,([e,t],r)=>e+"="+t.valueToString(r));return`record {${r.join("; ")}}`}}class V extends M{constructor(e){let t={};e.forEach((e,r)=>t["_"+r+"_"]=e),super(t),this._components=e}accept(e,t){return e.visitTuple(this,this._components,t)}covariant(e){if(Array.isArray(e)&&e.length>=this._fields.length&&this._components.every((t,r)=>{try{return t.covariant(e[r])}catch(e){throw Error(`Invalid ${this.display()} argument: 

index ${r} -> ${e.message}`)}}))return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){let t=E(this._components,e,(e,t)=>e.encodeValue(t));return s(...t)}decodeValue(e,t){let r=this.checkType(t);if(!(r instanceof V))throw Error("not a tuple type");if(r._components.length<this._components.length)throw Error("tuple mismatch");let n=[];for(let[t,i]of r._components.entries())t>=this._components.length?i.decodeValue(e,i):n.push(this._components[t].decodeValue(e,i));return n}display(){let e=this._components.map(e=>e.display());return`record {${e.join("; ")}}`}valueToString(e){let t=E(this._components,e,(e,t)=>e.valueToString(t));return`record {${t.join("; ")}}`}}class q extends A{constructor(e={}){super(),this._fields=Object.entries(e).sort((e,t)=>c(e[0])-c(t[0]))}accept(e,t){return e.visitVariant(this,this._fields,t)}covariant(e){if("object"==typeof e&&1===Object.entries(e).length&&this._fields.every(([t,r])=>{try{return!e.hasOwnProperty(t)||r.covariant(e[t])}catch(e){throw Error(`Invalid ${this.display()} argument: 

variant ${t} -> ${e.message}`)}}))return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){for(let t=0;t<this._fields.length;t++){let[r,n]=this._fields[t];if(e.hasOwnProperty(r)){let i=d(t),a=n.encodeValue(e[r]);return s(i,a)}}throw Error("Variant has no data: "+e)}_buildTypeTableImpl(e){this._fields.forEach(([,t])=>{t.buildTypeTable(e)});let t=y(-21),r=d(this._fields.length),n=this._fields.map(([t,r])=>s(d(c(t)),r.encodeType(e)));e.add(this,s(t,r,...n))}decodeValue(e,t){let r=this.checkType(t);if(!(r instanceof q))throw Error("Not a variant type");let n=Number(p(e));if(n>=r._fields.length)throw Error("Invalid variant index: "+n);let[i,s]=r._fields[n];for(let[t,r]of this._fields)if(c(i)===c(t)){let n=r.decodeValue(e,s);return{[t]:n}}throw Error("Cannot find field hash "+i)}get name(){let e=this._fields.map(([e,t])=>e+":"+t.name);return`variant {${e.join("; ")}}`}display(){let e=this._fields.map(([e,t])=>e+("null"===t.name?"":`:${t.display()}`));return`variant {${e.join("; ")}}`}valueToString(e){for(let[t,r]of this._fields)if(e.hasOwnProperty(t)){let n=r.valueToString(e[t]);if("null"===n)return`variant {${t}}`;return`variant {${t}=${n}}`}throw Error("Variant has no data: "+e)}}class $ extends A{constructor(){super(...arguments),this._id=$._counter++,this._type=void 0}accept(e,t){if(!this._type)throw Error("Recursive type uninitialized.");return e.visitRec(this,this._type,t)}fill(e){this._type=e}getType(){return this._type}covariant(e){if(this._type&&this._type.covariant(e))return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(e)}_buildTypeTableImpl(e){if(!this._type)throw Error("Recursive type uninitialized.");e.add(this,new Uint8Array([])),this._type.buildTypeTable(e),e.merge(this,this._type.name)}decodeValue(e,t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(e,t)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`μ${this.name}.${this._type.name}`}valueToString(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(e)}}function z(e){let t=h(e);if(1!==t)throw Error("Cannot decode principal");let r=Number(p(e));return i.R.fromUint8Array(new Uint8Array(l(e,r)))}$._counter=0;class H extends x{accept(e,t){return e.visitPrincipal(this,t)}covariant(e){if(e&&e._isPrincipal)return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){let t=e.toUint8Array(),r=d(t.byteLength);return s(new Uint8Array([1]),r,t)}encodeType(){return y(-24)}decodeValue(e,t){return this.checkType(t),z(e)}get name(){return"principal"}valueToString(e){return`${this.name} "${e.toText()}"`}}class K extends A{constructor(e,t,r=[]){super(),this.argTypes=e,this.retTypes=t,this.annotations=r}static argsToString(e,t){if(e.length!==t.length)throw Error("arity mismatch");return"("+e.map((e,r)=>e.valueToString(t[r])).join(", ")+")"}accept(e,t){return e.visitFunc(this,t)}covariant(e){if(Array.isArray(e)&&2===e.length&&e[0]&&e[0]._isPrincipal&&"string"==typeof e[1])return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue([e,t]){let r=e.toUint8Array(),n=d(r.byteLength),i=s(new Uint8Array([1]),n,r),a=new TextEncoder().encode(t),o=d(a.byteLength);return s(new Uint8Array([1]),i,o,a)}_buildTypeTableImpl(e){this.argTypes.forEach(t=>t.buildTypeTable(e)),this.retTypes.forEach(t=>t.buildTypeTable(e));let t=y(-22),r=d(this.argTypes.length),n=s(...this.argTypes.map(t=>t.encodeType(e))),i=d(this.retTypes.length),a=s(...this.retTypes.map(t=>t.encodeType(e))),o=d(this.annotations.length),u=s(...this.annotations.map(e=>this.encodeAnnotation(e)));e.add(this,s(t,r,n,i,a,o,u))}decodeValue(e){let t=h(e);if(1!==t)throw Error("Cannot decode function reference");let r=z(e),n=Number(p(e)),i=l(e,n),s=new TextDecoder("utf8",{fatal:!0}),a=s.decode(i);return[r,a]}get name(){let e=this.argTypes.map(e=>e.name).join(", "),t=this.retTypes.map(e=>e.name).join(", "),r=" "+this.annotations.join(" ");return`(${e}) -> (${t})${r}`}valueToString([e,t]){return`func "${e.toText()}".${t}`}display(){let e=this.argTypes.map(e=>e.display()).join(", "),t=this.retTypes.map(e=>e.display()).join(", "),r=" "+this.annotations.join(" ");return`(${e}) → (${t})${r}`}encodeAnnotation(e){if("query"===e)return new Uint8Array([1]);if("oneway"===e)return new Uint8Array([2]);if("composite_query"===e)return new Uint8Array([3]);throw Error("Illegal function annotation")}}class G extends A{constructor(e){super(),this._fields=Object.entries(e).sort((e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:0)}accept(e,t){return e.visitService(this,t)}covariant(e){if(e&&e._isPrincipal)return!0;throw Error(`Invalid ${this.display()} argument: ${W(e)}`)}encodeValue(e){let t=e.toUint8Array(),r=d(t.length);return s(new Uint8Array([1]),r,t)}_buildTypeTableImpl(e){this._fields.forEach(([t,r])=>r.buildTypeTable(e));let t=y(-23),r=d(this._fields.length),n=this._fields.map(([t,r])=>{let n=new TextEncoder().encode(t),i=d(n.length);return s(i,n,r.encodeType(e))});e.add(this,s(t,r,...n))}decodeValue(e){return z(e)}get name(){let e=this._fields.map(([e,t])=>e+":"+t.name);return`service {${e.join("; ")}}`}valueToString(e){return`service "${e.toText()}"`}}function W(e){let t=JSON.stringify(e,(e,t)=>"bigint"==typeof t?`BigInt(${t})`:t);return t&&t.length>400?t.substring(0,397)+"...":t}function Z(e,t){if(t.length<e.length)throw Error("Wrong number of message arguments");let r=new _;e.forEach(e=>e.buildTypeTable(r));let n=new TextEncoder().encode(v),i=r.encode(),a=d(t.length),o=s(...e.map(e=>e.encodeType(r))),u=s(...E(e,t,(e,t)=>{try{e.covariant(t)}catch(t){let e=Error(t.message+"\n\n");throw e}return e.encodeValue(t)}));return s(n,i,a,o,u)}function Y(e,t){let r=new a(t);if(t.byteLength<v.length)throw Error("Message length smaller than magic number");let n=l(r,v.length),i=new TextDecoder().decode(n);if(i!==v)throw Error("Wrong magic number: "+JSON.stringify(i));let[s,o]=function(e){let t=[],r=Number(p(e));for(let n=0;n<r;n++){let r=Number(g(e));switch(r){case -18:case -19:{let n=Number(g(e));t.push([r,n]);break}case -20:case -21:{let n;let i=[],s=Number(p(e));for(;s--;){let t=Number(p(e));if(t>=4294967296)throw Error("field id out of 32-bit range");if("number"==typeof n&&n>=t)throw Error("field id collision or not sorted");n=t;let r=Number(g(e));i.push([t,r])}t.push([r,i]);break}case -22:{let n=[],i=Number(p(e));for(;i--;)n.push(Number(g(e)));let s=[],a=Number(p(e));for(;a--;)s.push(Number(g(e)));let o=[],u=Number(p(e));for(;u--;){let t=Number(p(e));switch(t){case 1:o.push("query");break;case 2:o.push("oneway");break;case 3:o.push("composite_query");break;default:throw Error("unknown annotation")}}t.push([r,[n,s,o]]);break}case -23:{let n=Number(p(e)),i=[];for(;n--;){let t=Number(p(e)),r=new TextDecoder().decode(l(e,t)),n=g(e);i.push([r,n])}t.push([r,i]);break}default:throw Error("Illegal op_code: "+r)}}let n=[],i=Number(p(e));for(let t=0;t<i;t++)n.push(Number(g(e)));return[t,n]}(r);if(o.length<e.length)throw Error("Wrong number of return values");let u=s.map(e=>eE());function c(e){if(e<-24)throw Error("future value not supported");if(e<0)switch(e){case -1:return et;case -2:return ee;case -3:return ei;case -4:return en;case -5:return el;case -6:return eh;case -7:return ed;case -8:return ep;case -9:return eo;case -10:return eu;case -11:return ec;case -12:return ef;case -13:return es;case -14:return ea;case -15:return er;case -16:return Q;case -17:return J;case -24:return ey;default:throw Error("Illegal op_code: "+e)}if(e>=s.length)throw Error("type index out of range");return u[e]}function f(e){switch(e[0]){case -19:{let t=c(e[1]);return eb(t)}case -18:{let t=c(e[1]);return em(t)}case -20:{let t={};for(let[r,n]of e[1]){let e=`_${r}_`;t[e]=c(n)}let r=ew(t),n=r.tryAsTuple();if(Array.isArray(n))return eg(...n);return r}case -21:{let t={};for(let[r,n]of e[1]){let e=`_${r}_`;t[e]=c(n)}return ev(t)}case -22:{let[t,r,n]=e[1];return e_(t.map(e=>c(e)),r.map(e=>c(e)),n)}case -23:{let t={},r=e[1];for(let[e,n]of r){let r=c(n);if(r instanceof $&&(r=r.getType()),!(r instanceof K))throw Error("Illegal service definition: services can only contain functions");t[e]=r}return eB(t)}default:throw Error("Illegal op_code: "+e[0])}}s.forEach((e,t)=>{if(-22===e[0]){let r=f(e);u[t].fill(r)}}),s.forEach((e,t)=>{if(-22!==e[0]){let r=f(e);u[t].fill(r)}});let h=o.map(e=>c(e)),d=e.map((e,t)=>e.decodeValue(r,h[t]));for(let t=e.length;t<h.length;t++)h[t].decodeValue(r,h[t]);if(r.byteLength>0)throw Error("decode: Left-over bytes");return d}let J=new T,Q=new R,X=new S,ee=new N,et=new O,er=new U,en=new P,ei=new L,es=new k(32),ea=new k(64),eo=new F(8),eu=new F(16),ec=new F(32),ef=new F(64),el=new j(8),eh=new j(16),ed=new j(32),ep=new j(64),ey=new H;function eg(...e){return new V(e)}function eb(e){return new C(e)}function em(e){return new D(e)}function ew(e){return new M(e)}function ev(e){return new q(e)}function eE(){return new $}function e_(e,t,r=[]){return new K(e,t,r)}function eB(e){return new G(e)}class eI{constructor(e,t){this.idl=e,this.ui=t,this.label=null,this.value=void 0;let r=document.createElement("span");r.className="status",this.status=r,t.input&&(t.input.addEventListener("blur",()=>{""!==t.input.value&&this.parse()}),t.input.addEventListener("input",()=>{r.style.display="none",t.input.classList.remove("reject")}))}isRejected(){return void 0===this.value}parse(e={}){if(this.ui.form){let t=this.ui.form.parse(e);return this.value=t,t}if(this.ui.input){let t=this.ui.input;try{let r=this.ui.parse(this.idl,e,t.value);if(!this.idl.covariant(r))throw Error(`${t.value} is not of type ${this.idl.display()}`);return this.status.style.display="none",this.value=r,r}catch(e){t.classList.add("reject"),this.status.style.display="block",this.status.innerHTML="InputError: "+e.message,this.value=void 0;return}}return null}render(e){let t=document.createElement("span");if(this.label){let e=document.createElement("label");e.innerText=this.label,t.appendChild(e)}this.ui.input&&(t.appendChild(this.ui.input),t.appendChild(this.status)),this.ui.form&&this.ui.form.render(t),e.appendChild(t)}}class ex{constructor(e){this.ui=e,this.form=[]}renderForm(e){this.ui.container?(this.form.forEach(e=>e.render(this.ui.container)),e.appendChild(this.ui.container)):this.form.forEach(t=>t.render(e))}render(e){if(this.ui.open&&this.ui.event){e.appendChild(this.ui.open);let t=this;t.ui.open.addEventListener(t.ui.event,()=>{if(t.ui.container)t.ui.container.innerHTML="";else{let e=t.ui.open.nextElementSibling;e&&e.parentNode.removeChild(e)}t.generateForm(),t.renderForm(e)})}else this.generateForm(),this.renderForm(e)}}class eA extends ex{constructor(e,t){super(t),this.fields=e,this.ui=t}generateForm(){this.form=this.fields.map(([e,t])=>{let r=this.ui.render(t);return this.ui.labelMap&&this.ui.labelMap.hasOwnProperty(e)?r.label=this.ui.labelMap[e]+" ":r.label=e+" ",r})}parse(e){let t={};if(this.fields.forEach(([r,n],i)=>{let s=this.form[i].parse(e);t[r]=s}),!this.form.some(e=>e.isRejected()))return t}}class eT extends ex{constructor(e,t){super(t),this.components=e,this.ui=t}generateForm(){this.form=this.components.map(e=>{let t=this.ui.render(e);return t})}parse(e){let t=[];if(this.components.forEach((r,n)=>{let i=this.form[n].parse(e);t.push(i)}),!this.form.some(e=>e.isRejected()))return t}}class eS extends ex{constructor(e,t){super(t),this.fields=e,this.ui=t}generateForm(){let e=this.ui.open.selectedIndex,[t,r]=this.fields[e],n=this.ui.render(r);this.form=[n]}parse(e){let t=this.ui.open,r=t.options[t.selectedIndex].value,n=this.form[0].parse(e);if(void 0===n)return;let i={};return i[r]=n,i}}class eN extends ex{constructor(e,t){super(t),this.ty=e,this.ui=t}generateForm(){if(this.ui.open.checked){let e=this.ui.render(this.ty);this.form=[e]}else this.form=[]}parse(e){if(0===this.form.length)return[];{let t=this.form[0].parse(e);if(void 0===t)return;return[t]}}}class eO extends ex{constructor(e,t){super(t),this.ty=e,this.ui=t}generateForm(){let e=+this.ui.open.value;this.form=[];for(let t=0;t<e;t++){let e=this.ui.render(this.ty);this.form.push(e)}}parse(e){let t=this.form.map(t=>t.parse(e));if(!this.form.some(e=>e.isRejected()))return t}}let eR={parse:function(e,t,r){return t.random&&""===r?e.accept(new eV,r):e.accept(new eM,r)}},eU={render:eq},eP=(e,t)=>new eI(e,Object.assign(Object.assign({},eR),t)),eL=(e,t)=>new eA(e,Object.assign(Object.assign({},eU),t)),ek=(e,t)=>new eT(e,Object.assign(Object.assign({},eU),t)),eF=(e,t)=>new eS(e,Object.assign(Object.assign({},eU),t)),ej=(e,t)=>new eN(e,Object.assign(Object.assign({},eU),t)),eC=(e,t)=>new eO(e,Object.assign(Object.assign({},eU),t));class eD extends B{visitType(e,t){let r=document.createElement("input");return r.classList.add("argument"),r.placeholder=e.display(),eP(e,{input:r})}visitNull(e,t){return eP(e,{})}visitRecord(e,t,r){let n={};if(t.length>1){let e=document.createElement("div");e.classList.add("popup-form"),n={container:e}}let i=eL(t,n);return eP(e,{form:i})}visitTuple(e,t,r){let n={};if(t.length>1){let e=document.createElement("div");e.classList.add("popup-form"),n={container:e}}let i=ek(t,n);return eP(e,{form:i})}visitVariant(e,t,r){let n=document.createElement("select");for(let[e,r]of t){let t=new Option(e);n.add(t)}n.selectedIndex=-1,n.classList.add("open");let i=eF(t,{open:n,event:"change"});return eP(e,{form:i})}visitOpt(e,t,r){let n=document.createElement("input");n.type="checkbox",n.classList.add("open");let i=ej(t,{open:n,event:"change"});return eP(e,{form:i})}visitVec(e,t,r){let n=document.createElement("input");n.type="number",n.min="0",n.max="100",n.style.width="8rem",n.placeholder="len",n.classList.add("open");let i=document.createElement("div");i.classList.add("popup-form");let s=eC(t,{open:n,event:"change",container:i});return eP(e,{form:s})}visitRec(e,t,r){return eq(t)}}class eM extends B{visitNull(e,t){return null}visitBool(e,t){if("true"===t)return!0;if("false"===t)return!1;throw Error(`Cannot parse ${t} as boolean`)}visitText(e,t){return t}visitFloat(e,t){return parseFloat(t)}visitFixedInt(e,t){return e._bits<=32?parseInt(t,10):BigInt(t)}visitFixedNat(e,t){return e._bits<=32?parseInt(t,10):BigInt(t)}visitNumber(e,t){return BigInt(t)}visitPrincipal(e,t){return i.R.fromText(t)}visitService(e,t){return i.R.fromText(t)}visitFunc(e,t){let r=t.split(".",2);return[i.R.fromText(r[0]),r[1]]}}class eV extends B{visitNull(e,t){return null}visitBool(e,t){return .5>Math.random()}visitText(e,t){return Math.random().toString(36).substring(6)}visitFloat(e,t){return Math.random()}visitInt(e,t){return BigInt(this.generateNumber(!0))}visitNat(e,t){return BigInt(this.generateNumber(!1))}visitFixedInt(e,t){let r=this.generateNumber(!0);return e._bits<=32?r:BigInt(t)}visitFixedNat(e,t){let r=this.generateNumber(!1);return e._bits<=32?r:BigInt(t)}generateNumber(e){let t=Math.floor(100*Math.random());return e&&.5>Math.random()?-t:t}}function eq(e){return e.accept(new eD,null)}},8615:function(e,t,r){"use strict";r.d(t,{R:function(){return f}});let n="abcdefghijklmnopqrstuvwxyz234567",i=Object.create(null);for(let e=0;e<n.length;e++)i[n[e]]=e;i["0"]=i.o,i["1"]=i.i;let s=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);var a=r(9802);let o="__principal__",u=e=>{var t;return new Uint8Array((null!==(t=e.match(/.{1,2}/g))&&void 0!==t?t:[]).map(e=>parseInt(e,16)))},c=e=>e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"");class f{constructor(e){this._arr=e,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([4]))}static managementCanister(){return this.fromHex("aaaaa-aa")}static selfAuthenticating(e){let t=a.gX.create().update(new Uint8Array(e)).digest();return new this(new Uint8Array([...t,2]))}static from(e){if("string"==typeof e)return f.fromText(e);if(Object.getPrototypeOf(e)===Uint8Array.prototype)return new f(e);if("object"==typeof e&&null!==e&&!0===e._isPrincipal)return new f(e._arr);throw Error(`Impossible to convert ${JSON.stringify(e)} to Principal.`)}static fromHex(e){return new this(u(e))}static fromText(e){let t=e;if(e.includes(o)){let r=JSON.parse(e);o in r&&(t=r[o])}let r=t.toLowerCase().replace(/-/g,""),n=function(e){let t=0,r=0,n=new Uint8Array(4*e.length/3|0),s=0;for(let a of e)!function(e){let a=i[e.toLowerCase()];if(void 0===a)throw Error(`Invalid character: ${JSON.stringify(e)}`);a<<=3,r|=a>>>t,(t+=5)>=8&&(n[s++]=r,t-=8,r=t>0?a<<5-t&255:0)}(a);return n.slice(0,s)}(r);n=n.slice(4,n.length);let s=new this(n);if(s.toText()!==t)throw Error(`Principal "${s.toText()}" does not have a valid checksum (original value "${t}" may not be a valid Principal ID).`);return s}static fromUint8Array(e){return new this(e)}isAnonymous(){return 1===this._arr.byteLength&&4===this._arr[0]}toUint8Array(){return this._arr}toHex(){return c(this._arr).toUpperCase()}toText(){let e=new ArrayBuffer(4),t=new DataView(e);t.setUint32(0,function(e){let t=new Uint8Array(e),r=-1;for(let e=0;e<t.length;e++){let n=t[e],i=(n^r)&255;r=s[i]^r>>>8}return(-1^r)>>>0}(this._arr));let r=new Uint8Array(e),i=Uint8Array.from(this._arr),a=new Uint8Array([...r,...i]),o=function(e){let t=0,r=0,i="";for(let a=0;a<e.length;){var s;a+=(s=e[a],(t<0?r|=s>>-t:r=s<<t&248,t>3)?(t-=8,1):(t<4&&(i+=n[r>>3],t+=5),0))}return i+(t<0?n[r>>3]:"")}(a),u=o.match(/.{1,5}/g);if(!u)throw Error();return u.join("-")}toString(){return this.toText()}toJSON(){return{[o]:this.toText()}}compareTo(e){for(let t=0;t<Math.min(this._arr.length,e._arr.length);t++){if(this._arr[t]<e._arr[t])return"lt";if(this._arr[t]>e._arr[t])return"gt"}return this._arr.length<e._arr.length?"lt":this._arr.length>e._arr.length?"gt":"eq"}ltEq(e){let t=this.compareTo(e);return"lt"==t||"eq"==t}gtEq(e){let t=this.compareTo(e);return"gt"==t||"eq"==t}}},4699:function(e,t){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,s=u(e),a=s[0],o=s[1],c=new i((a+o)*3/4-o),f=0,l=o>0?a-4:a;for(r=0;r<l;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[f++]=t>>16&255,c[f++]=t>>8&255,c[f++]=255&t;return 2===o&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[f++]=255&t),1===o&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[f++]=t>>8&255,c[f++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],a=0,o=n-i;a<o;a+=16383)s.push(function(e,t,n){for(var i,s=[],a=t;a<n;a+=3)s.push(r[(i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}(e,a,a+16383>o?o:a+16383));return 1===i?s.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&s.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=s.length;a<o;++a)r[a]=s[a],n[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},5209:function(e,t,r){var n;!function(i){"use strict";var s,a=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,u=Math.floor,c="[BigNumber Error] ",f=c+"Number primitive has more than 15 significant digits: ",l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function h(e){var t=0|e;return e>0||e===t?t:t-1}function d(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(r=14-(t=e[n++]+"").length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function p(e,t){var r,n,i=e.c,s=t.c,a=e.s,o=t.s,u=e.e,c=t.e;if(!a||!o)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-o:a;if(a!=o)return a;if(r=a<0,n=u==c,!i||!s)return n?0:!i^r?1:-1;if(!n)return u>c^r?1:-1;for(a=0,o=(u=i.length)<(c=s.length)?u:c;a<o;a++)if(i[a]!=s[a])return i[a]>s[a]^r?1:-1;return u==c?0:u>c^r?1:-1}function y(e,t,r,n){if(e<t||e>r||e!==u(e))throw Error(c+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function g(e){var t=e.c.length-1;return h(e.e/14)==t&&e.c[t]%2!=0}function b(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function m(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(n=e.length,++t>n){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(s=function e(t){var r,n,i,s,w,v,E,_,B,I=C.prototype={constructor:C,toString:null,valueOf:null},x=new C(1),A=20,T=4,S=-7,N=21,O=-1e7,R=1e7,U=!1,P=1,L=0,k={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},F="0123456789abcdefghijklmnopqrstuvwxyz",j=!0;function C(e,t){var r,n,i,s,o,c,l,h,d=this;if(!(d instanceof C))return new C(e,t);if(null==t){if(e&&!0===e._isBigNumber){d.s=e.s,!e.c||e.e>R?d.c=d.e=null:e.e<O?d.c=[d.e=0]:(d.e=e.e,d.c=e.c.slice());return}if((c="number"==typeof e)&&0*e==0){if(d.s=1/e<0?(e=-e,-1):1,e===~~e){for(s=0,o=e;o>=10;o/=10,s++);s>R?d.c=d.e=null:(d.e=s,d.c=[e]);return}h=String(e)}else{if(!a.test(h=String(e)))return B(d,h,c);d.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(s=h.indexOf("."))>-1&&(h=h.replace(".","")),(o=h.search(/e/i))>0?(s<0&&(s=o),s+=+h.slice(o+1),h=h.substring(0,o)):s<0&&(s=h.length)}else{if(y(t,2,F.length,"Base"),10==t&&j)return q(d=new C(e),A+d.e+1,T);if(h=String(e),c="number"==typeof e){if(0*e!=0)return B(d,h,c,t);if(d.s=1/e<0?(h=h.slice(1),-1):1,C.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(f+e)}else d.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(r=F.slice(0,t),s=o=0,l=h.length;o<l;o++)if(0>r.indexOf(n=h.charAt(o))){if("."==n){if(o>s){s=l;continue}}else if(!i&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){i=!0,o=-1,s=0;continue}return B(d,String(e),c,t)}c=!1,(s=(h=_(h,t,10,d.s)).indexOf("."))>-1?h=h.replace(".",""):s=h.length}for(o=0;48===h.charCodeAt(o);o++);for(l=h.length;48===h.charCodeAt(--l););if(h=h.slice(o,++l)){if(l-=o,c&&C.DEBUG&&l>15&&(e>9007199254740991||e!==u(e)))throw Error(f+d.s*e);if((s=s-o-1)>R)d.c=d.e=null;else if(s<O)d.c=[d.e=0];else{if(d.e=s,d.c=[],o=(s+1)%14,s<0&&(o+=14),o<l){for(o&&d.c.push(+h.slice(0,o)),l-=14;o<l;)d.c.push(+h.slice(o,o+=14));o=14-(h=h.slice(o)).length}else o-=l;for(;o--;h+="0");d.c.push(+h)}}else d.c=[d.e=0]}function D(e,t,r,n){var i,s,a,o,u;if(null==r?r=T:y(r,0,8),!e.c)return e.toString();if(i=e.c[0],a=e.e,null==t)u=d(e.c),u=1==n||2==n&&(a<=S||a>=N)?b(u,a):m(u,a,"0");else if(s=(e=q(new C(e),t,r)).e,o=(u=d(e.c)).length,1==n||2==n&&(t<=s||s<=S)){for(;o<t;u+="0",o++);u=b(u,s)}else if(t-=a,u=m(u,s,"0"),s+1>o){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=s-o)>0)for(s+1==o&&(u+=".");t--;u+="0");return e.s<0&&i?"-"+u:u}function M(e,t){for(var r,n,i=1,s=new C(e[0]);i<e.length;i++)(n=new C(e[i])).s&&(r=p(s,n))!==t&&(0!==r||s.s!==t)||(s=n);return s}function V(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+14*r-1)>R?e.c=e.e=null:r<O?e.c=[e.e=0]:(e.e=r,e.c=t),e}function q(e,t,r,n){var i,s,a,c,f,h,d,p=e.c;if(p){e:{for(i=1,c=p[0];c>=10;c/=10,i++);if((s=t-i)<0)s+=14,a=t,d=u((f=p[h=0])/l[i-a-1]%10);else if((h=o((s+1)/14))>=p.length){if(n){for(;p.length<=h;p.push(0));f=d=0,i=1,s%=14,a=s-14+1}else break e}else{for(i=1,f=c=p[h];c>=10;c/=10,i++);s%=14,d=(a=s-14+i)<0?0:u(f/l[i-a-1]%10)}if(n=n||t<0||null!=p[h+1]||(a<0?f:f%l[i-a-1]),n=r<4?(d||n)&&(0==r||r==(e.s<0?3:2)):d>5||5==d&&(4==r||n||6==r&&(s>0?a>0?f/l[i-a]:0:p[h-1])%10&1||r==(e.s<0?8:7)),t<1||!p[0])return p.length=0,n?(t-=e.e+1,p[0]=l[(14-t%14)%14],e.e=-t||0):p[0]=e.e=0,e;if(0==s?(p.length=h,c=1,h--):(p.length=h+1,c=l[14-s],p[h]=a>0?u(f/l[i-a]%l[a])*c:0),n)for(;;){if(0==h){for(s=1,a=p[0];a>=10;a/=10,s++);for(a=p[0]+=c,c=1;a>=10;a/=10,c++);s!=c&&(e.e++,1e14==p[0]&&(p[0]=1));break}if(p[h]+=c,1e14!=p[h])break;p[h--]=0,c=1}for(s=p.length;0===p[--s];p.pop());}e.e>R?e.c=e.e=null:e.e<O&&(e.c=[e.e=0])}return e}function $(e){var t,r=e.e;return null===r?e.toString():(t=d(e.c),t=r<=S||r>=N?b(t,r):m(t,r,"0"),e.s<0?"-"+t:t)}return C.clone=e,C.ROUND_UP=0,C.ROUND_DOWN=1,C.ROUND_CEIL=2,C.ROUND_FLOOR=3,C.ROUND_HALF_UP=4,C.ROUND_HALF_DOWN=5,C.ROUND_HALF_EVEN=6,C.ROUND_HALF_CEIL=7,C.ROUND_HALF_FLOOR=8,C.EUCLID=9,C.config=C.set=function(e){var t,r;if(null!=e){if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(y(r=e[t],0,1e9,t),A=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(y(r=e[t],0,8,t),T=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(y(r[0],-1e9,0,t),y(r[1],0,1e9,t),S=r[0],N=r[1]):(y(r,-1e9,1e9,t),S=-(N=r<0?-r:r))),e.hasOwnProperty(t="RANGE")){if((r=e[t])&&r.pop)y(r[0],-1e9,-1,t),y(r[1],1,1e9,t),O=r[0],R=r[1];else if(y(r,-1e9,1e9,t),r)O=-(R=r<0?-r:r);else throw Error(c+t+" cannot be zero: "+r)}if(e.hasOwnProperty(t="CRYPTO")){if(!!(r=e[t])===r){if(r){if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))U=r;else throw U=!r,Error(c+"crypto unavailable")}else U=r}else throw Error(c+t+" not true or false: "+r)}if(e.hasOwnProperty(t="MODULO_MODE")&&(y(r=e[t],0,9,t),P=r),e.hasOwnProperty(t="POW_PRECISION")&&(y(r=e[t],0,1e9,t),L=r),e.hasOwnProperty(t="FORMAT")){if("object"==typeof(r=e[t]))k=r;else throw Error(c+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(c+t+" invalid: "+r);j="0123456789"==r.slice(0,10),F=r}}else throw Error(c+"Object expected: "+e)}return{DECIMAL_PLACES:A,ROUNDING_MODE:T,EXPONENTIAL_AT:[S,N],RANGE:[O,R],CRYPTO:U,MODULO_MODE:P,POW_PRECISION:L,FORMAT:k,ALPHABET:F}},C.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!C.DEBUG)return!0;var t,r,n=e.c,i=e.e,s=e.s;e:if("[object Array]"==({}).toString.call(n)){if((1===s||-1===s)&&i>=-1e9&&i<=1e9&&i===u(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%14)<1&&(t+=14),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=1e14||r!==u(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(c+"Invalid BigNumber: "+e)},C.maximum=C.max=function(){return M(arguments,-1)},C.minimum=C.min=function(){return M(arguments,1)},C.random=(r=9007199254740992*Math.random()&2097151?function(){return u(9007199254740992*Math.random())}:function(){return(1073741824*Math.random()|0)*8388608+(8388608*Math.random()|0)},function(e){var t,n,i,s,a,f=0,h=[],d=new C(x);if(null==e?e=A:y(e,0,1e9),s=o(e/14),U){if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(s*=2));f<s;)(a=131072*t[f]+(t[f+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[f]=n[0],t[f+1]=n[1]):(h.push(a%1e14),f+=2);f=s/2}else if(crypto.randomBytes){for(t=crypto.randomBytes(s*=7);f<s;)(a=(31&t[f])*281474976710656+1099511627776*t[f+1]+4294967296*t[f+2]+16777216*t[f+3]+(t[f+4]<<16)+(t[f+5]<<8)+t[f+6])>=9e15?crypto.randomBytes(7).copy(t,f):(h.push(a%1e14),f+=7);f=s/7}else throw U=!1,Error(c+"crypto unavailable")}if(!U)for(;f<s;)(a=r())<9e15&&(h[f++]=a%1e14);for(s=h[--f],e%=14,s&&e&&(a=l[14-e],h[f]=u(s/a)*a);0===h[f];h.pop(),f--);if(f<0)h=[i=0];else{for(i=-1;0===h[0];h.splice(0,1),i-=14);for(f=1,a=h[0];a>=10;a/=10,f++);f<14&&(i-=14-f)}return d.e=i,d.c=h,d}),C.sum=function(){for(var e=1,t=arguments,r=new C(t[0]);e<t.length;)r=r.plus(t[e++]);return r},_=function(){var e="0123456789";function t(e,t,r,n){for(var i,s,a=[0],o=0,u=e.length;o<u;){for(s=a.length;s--;a[s]*=t);for(a[0]+=n.indexOf(e.charAt(o++)),i=0;i<a.length;i++)a[i]>r-1&&(null==a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/r|0,a[i]%=r)}return a.reverse()}return function(r,n,i,s,a){var o,u,c,f,l,h,p,y,g=r.indexOf("."),b=A,w=T;for(g>=0&&(f=L,L=0,r=r.replace(".",""),h=(y=new C(n)).pow(r.length-g),L=f,y.c=t(m(d(h.c),h.e,"0"),10,i,e),y.e=y.c.length),c=f=(p=t(r,n,i,a?(o=F,e):(o=e,F))).length;0==p[--f];p.pop());if(!p[0])return o.charAt(0);if(g<0?--c:(h.c=p,h.e=c,h.s=s,p=(h=E(h,y,b,w,i)).c,l=h.r,c=h.e),g=p[u=c+b+1],f=i/2,l=l||u<0||null!=p[u+1],l=w<4?(null!=g||l)&&(0==w||w==(h.s<0?3:2)):g>f||g==f&&(4==w||l||6==w&&1&p[u-1]||w==(h.s<0?8:7)),u<1||!p[0])r=l?m(o.charAt(1),-b,o.charAt(0)):o.charAt(0);else{if(p.length=u,l)for(--i;++p[--u]>i;)p[u]=0,u||(++c,p=[1].concat(p));for(f=p.length;!p[--f];);for(g=0,r="";g<=f;r+=o.charAt(p[g++]));r=m(r,c,o.charAt(0))}return r}}(),E=function(){function e(e,t,r){var n,i,s,a,o=0,u=e.length,c=t%1e7,f=t/1e7|0;for(e=e.slice();u--;)n=f*(s=e[u]%1e7)+(a=e[u]/1e7|0)*c,o=((i=c*s+n%1e7*1e7+o)/r|0)+(n/1e7|0)+f*a,e[u]=i%r;return o&&(e=[o].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,s,a,o){var c,f,l,d,p,y,g,b,m,w,v,E,_,B,I,x,A,T=n.s==i.s?1:-1,S=n.c,N=i.c;if(!S||!S[0]||!N||!N[0])return new C(n.s&&i.s&&(S?!N||S[0]!=N[0]:N)?S&&0==S[0]||!N?0*T:T/0:NaN);for(m=(b=new C(T)).c=[],T=s+(f=n.e-i.e)+1,o||(o=1e14,f=h(n.e/14)-h(i.e/14),T=T/14|0),l=0;N[l]==(S[l]||0);l++);if(N[l]>(S[l]||0)&&f--,T<0)m.push(1),d=!0;else{for(B=S.length,x=N.length,l=0,T+=2,(p=u(o/(N[0]+1)))>1&&(N=e(N,p,o),S=e(S,p,o),x=N.length,B=S.length),_=x,v=(w=S.slice(0,x)).length;v<x;w[v++]=0);A=[0].concat(A=N.slice()),I=N[0],N[1]>=o/2&&I++;do{if(p=0,(c=t(N,w,x,v))<0){if(E=w[0],x!=v&&(E=E*o+(w[1]||0)),(p=u(E/I))>1)for(p>=o&&(p=o-1),g=(y=e(N,p,o)).length,v=w.length;1==t(y,w,g,v);)p--,r(y,x<g?A:N,g,o),g=y.length,c=1;else 0==p&&(c=p=1),g=(y=N.slice()).length;if(g<v&&(y=[0].concat(y)),r(w,y,v,o),v=w.length,-1==c)for(;1>t(N,w,x,v);)p++,r(w,x<v?A:N,v,o),v=w.length}else 0===c&&(p++,w=[0]);m[l++]=p,w[0]?w[v++]=S[_]||0:(w=[S[_]],v=1)}while((_++<B||null!=w[0])&&T--);d=null!=w[0],m[0]||m.splice(0,1)}if(1e14==o){for(l=1,T=m[0];T>=10;T/=10,l++);q(b,s+(b.e=l+14*f-1)+1,a,d)}else b.e=f,b.r=+d;return b}}(),n=/^(-?)0([xbo])(?=\w[\w.]*$)/i,i=/^([^.]+)\.$/,s=/^\.([^.]+)$/,w=/^-?(Infinity|NaN)$/,v=/^\s*\+(?=[\w.])|^\s+|\s+$/g,B=function(e,t,r,a){var o,u=r?t:t.replace(v,"");if(w.test(u))e.s=isNaN(u)?null:u<0?-1:1;else{if(!r&&(u=u.replace(n,function(e,t,r){return o="x"==(r=r.toLowerCase())?16:"b"==r?2:8,a&&a!=o?e:t}),a&&(o=a,u=u.replace(i,"$1").replace(s,"0.$1")),t!=u))return new C(u,o);if(C.DEBUG)throw Error(c+"Not a"+(a?" base "+a:"")+" number: "+t);e.s=null}e.c=e.e=null},I.absoluteValue=I.abs=function(){var e=new C(this);return e.s<0&&(e.s=1),e},I.comparedTo=function(e,t){return p(this,new C(e,t))},I.decimalPlaces=I.dp=function(e,t){var r,n,i;if(null!=e)return y(e,0,1e9),null==t?t=T:y(t,0,8),q(new C(this),e+this.e+1,t);if(!(r=this.c))return null;if(n=((i=r.length-1)-h(this.e/14))*14,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},I.dividedBy=I.div=function(e,t){return E(this,new C(e,t),A,T)},I.dividedToIntegerBy=I.idiv=function(e,t){return E(this,new C(e,t),0,1)},I.exponentiatedBy=I.pow=function(e,t){var r,n,i,s,a,f,l,h,d,p=this;if((e=new C(e)).c&&!e.isInteger())throw Error(c+"Exponent not an integer: "+$(e));if(null!=t&&(t=new C(t)),f=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return d=new C(Math.pow(+$(p),f?e.s*(2-g(e)):+$(e))),t?d.mod(t):d;if(l=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new C(NaN);(n=!l&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||f&&p.c[1]>=24e7:p.c[0]<8e13||f&&p.c[0]<=9999975e7)))return s=p.s<0&&g(e)?-0:0,p.e>-1&&(s=1/s),new C(l?1/s:s);L&&(s=o(L/14+2))}for(f?(r=new C(.5),l&&(e.s=1),h=g(e)):h=(i=Math.abs(+$(e)))%2,d=new C(x);;){if(h){if(!(d=d.times(p)).c)break;s?d.c.length>s&&(d.c.length=s):n&&(d=d.mod(t))}if(i){if(0===(i=u(i/2)))break;h=i%2}else if(q(e=e.times(r),e.e+1,1),e.e>14)h=g(e);else{if(0==(i=+$(e)))break;h=i%2}p=p.times(p),s?p.c&&p.c.length>s&&(p.c.length=s):n&&(p=p.mod(t))}return n?d:(l&&(d=x.div(d)),t?d.mod(t):s?q(d,L,T,a):d)},I.integerValue=function(e){var t=new C(this);return null==e?e=T:y(e,0,8),q(t,t.e+1,e)},I.isEqualTo=I.eq=function(e,t){return 0===p(this,new C(e,t))},I.isFinite=function(){return!!this.c},I.isGreaterThan=I.gt=function(e,t){return p(this,new C(e,t))>0},I.isGreaterThanOrEqualTo=I.gte=function(e,t){return 1===(t=p(this,new C(e,t)))||0===t},I.isInteger=function(){return!!this.c&&h(this.e/14)>this.c.length-2},I.isLessThan=I.lt=function(e,t){return 0>p(this,new C(e,t))},I.isLessThanOrEqualTo=I.lte=function(e,t){return -1===(t=p(this,new C(e,t)))||0===t},I.isNaN=function(){return!this.s},I.isNegative=function(){return this.s<0},I.isPositive=function(){return this.s>0},I.isZero=function(){return!!this.c&&0==this.c[0]},I.minus=function(e,t){var r,n,i,s,a=this.s;if(t=(e=new C(e,t)).s,!a||!t)return new C(NaN);if(a!=t)return e.s=-t,this.plus(e);var o=this.e/14,u=e.e/14,c=this.c,f=e.c;if(!o||!u){if(!c||!f)return c?(e.s=-t,e):new C(f?this:NaN);if(!c[0]||!f[0])return f[0]?(e.s=-t,e):new C(c[0]?this:3==T?-0:0)}if(o=h(o),u=h(u),c=c.slice(),a=o-u){for((s=a<0)?(a=-a,i=c):(u=o,i=f),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(s=(a=c.length)<(t=f.length))?a:t,a=t=0;t<n;t++)if(c[t]!=f[t]){s=c[t]<f[t];break}if(s&&(i=c,c=f,f=i,e.s=-e.s),(t=(n=f.length)-(r=c.length))>0)for(;t--;c[r++]=0);for(t=1e14-1;n>a;){if(c[--n]<f[n]){for(r=n;r&&!c[--r];c[r]=t);--c[r],c[n]+=1e14}c[n]-=f[n]}for(;0==c[0];c.splice(0,1),--u);return c[0]?V(e,c,u):(e.s=3==T?-1:1,e.c=[e.e=0],e)},I.modulo=I.mod=function(e,t){var r,n;return(e=new C(e,t),this.c&&e.s&&(!e.c||e.c[0]))?e.c&&(!this.c||this.c[0])?(9==P?(n=e.s,e.s=1,r=E(this,e,0,3),e.s=n,r.s*=n):r=E(this,e,0,P),(e=this.minus(r.times(e))).c[0]||1!=P||(e.s=this.s),e):new C(this):new C(NaN)},I.multipliedBy=I.times=function(e,t){var r,n,i,s,a,o,u,c,f,l,d,p,y,g=this.c,b=(e=new C(e,t)).c;if(!g||!b||!g[0]||!b[0])return this.s&&e.s&&(!g||g[0]||b)&&(!b||b[0]||g)?(e.s*=this.s,g&&b?(e.c=[0],e.e=0):e.c=e.e=null):e.c=e.e=e.s=null,e;for(n=h(this.e/14)+h(e.e/14),e.s*=this.s,(u=g.length)<(l=b.length)&&(y=g,g=b,b=y,i=u,u=l,l=i),i=u+l,y=[];i--;y.push(0));for(i=l;--i>=0;){for(r=0,d=b[i]%1e7,p=b[i]/1e7|0,s=i+(a=u);s>i;)o=p*(c=g[--a]%1e7)+(f=g[a]/1e7|0)*d,r=((c=d*c+o%1e7*1e7+y[s]+r)/1e14|0)+(o/1e7|0)+p*f,y[s--]=c%1e14;y[s]=r}return r?++n:y.splice(0,1),V(e,y,n)},I.negated=function(){var e=new C(this);return e.s=-e.s||null,e},I.plus=function(e,t){var r,n=this.s;if(t=(e=new C(e,t)).s,!n||!t)return new C(NaN);if(n!=t)return e.s=-t,this.minus(e);var i=this.e/14,s=e.e/14,a=this.c,o=e.c;if(!i||!s){if(!a||!o)return new C(n/0);if(!a[0]||!o[0])return o[0]?e:new C(a[0]?this:0*n)}if(i=h(i),s=h(s),a=a.slice(),n=i-s){for(n>0?(s=i,r=o):(n=-n,r=a),r.reverse();n--;r.push(0));r.reverse()}for((n=a.length)-(t=o.length)<0&&(r=o,o=a,a=r,t=n),n=0;t;)n=(a[--t]=a[t]+o[t]+n)/1e14|0,a[t]=1e14===a[t]?0:a[t]%1e14;return n&&(a=[n].concat(a),++s),V(e,a,s)},I.precision=I.sd=function(e,t){var r,n,i;if(null!=e&&!!e!==e)return y(e,1,1e9),null==t?t=T:y(t,0,8),q(new C(this),e,t);if(!(r=this.c))return null;if(n=14*(i=r.length-1)+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&this.e+1>n&&(n=this.e+1),n},I.shiftedBy=function(e){return y(e,-9007199254740991,9007199254740991),this.times("1e"+e)},I.squareRoot=I.sqrt=function(){var e,t,r,n,i,s=this.c,a=this.s,o=this.e,u=A+4,c=new C("0.5");if(1!==a||!s||!s[0])return new C(!a||a<0&&(!s||s[0])?NaN:s?this:1/0);if(0==(a=Math.sqrt(+$(this)))||a==1/0?(((t=d(s)).length+o)%2==0&&(t+="0"),a=Math.sqrt(+t),o=h((o+1)/2)-(o<0||o%2),t=a==1/0?"5e"+o:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+o,r=new C(t)):r=new C(a+""),r.c[0]){for((a=(o=r.e)+u)<3&&(a=0);;)if(i=r,r=c.times(i.plus(E(this,i,u,1))),d(i.c).slice(0,a)===(t=d(r.c)).slice(0,a)){if(r.e<o&&--a,"9999"!=(t=t.slice(a-3,a+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(q(r,r.e+A+2,1),e=!r.times(r).eq(this));break}if(!n&&(q(i,i.e+A+2,0),i.times(i).eq(this))){r=i;break}u+=4,a+=4,n=1}}return q(r,r.e+A+1,T,e)},I.toExponential=function(e,t){return null!=e&&(y(e,0,1e9),e++),D(this,e,t,1)},I.toFixed=function(e,t){return null!=e&&(y(e,0,1e9),e=e+this.e+1),D(this,e,t)},I.toFormat=function(e,t,r){var n;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=k;else if("object"!=typeof r)throw Error(c+"Argument not an object: "+r);if(n=this.toFixed(e,t),this.c){var i,s=n.split("."),a=+r.groupSize,o=+r.secondaryGroupSize,u=r.groupSeparator||"",f=s[0],l=s[1],h=this.s<0,d=h?f.slice(1):f,p=d.length;if(o&&(i=a,a=o,o=i,p-=i),a>0&&p>0){for(i=p%a||a,f=d.substr(0,i);i<p;i+=a)f+=u+d.substr(i,a);o>0&&(f+=u+d.slice(i)),h&&(f="-"+f)}n=l?f+(r.decimalSeparator||"")+((o=+r.fractionGroupSize)?l.replace(RegExp("\\d{"+o+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):l):f}return(r.prefix||"")+n+(r.suffix||"")},I.toFraction=function(e){var t,r,n,i,s,a,o,u,f,h,p,y,g=this.c;if(null!=e&&(!(o=new C(e)).isInteger()&&(o.c||1!==o.s)||o.lt(x)))throw Error(c+"Argument "+(o.isInteger()?"out of range: ":"not an integer: ")+$(o));if(!g)return new C(this);for(t=new C(x),f=r=new C(x),n=u=new C(x),y=d(g),s=t.e=y.length-this.e-1,t.c[0]=l[(a=s%14)<0?14+a:a],e=!e||o.comparedTo(t)>0?s>0?t:f:o,a=R,R=1/0,o=new C(y),u.c[0]=0;h=E(o,t,0,1),1!=(i=r.plus(h.times(n))).comparedTo(e);)r=n,n=i,f=u.plus(h.times(i=f)),u=i,t=o.minus(h.times(i=t)),o=i;return i=E(e.minus(r),n,0,1),u=u.plus(i.times(f)),r=r.plus(i.times(n)),u.s=f.s=this.s,s*=2,p=1>E(f,n,s,T).minus(this).abs().comparedTo(E(u,r,s,T).minus(this).abs())?[f,n]:[u,r],R=a,p},I.toNumber=function(){return+$(this)},I.toPrecision=function(e,t){return null!=e&&y(e,1,1e9),D(this,e,t,2)},I.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=S||i>=N?b(d(r.c),i):m(d(r.c),i,"0"):10===e&&j?t=m(d((r=q(new C(r),A+i+1,T)).c),r.e,"0"):(y(e,2,F.length,"Base"),t=_(m(d(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},I.valueOf=I.toJSON=function(){return $(this)},I._isBigNumber=!0,null!=t&&C.set(t),C}()).default=s.BigNumber=s,void 0!==(n=(function(){return s}).call(t,r,t,e))&&(e.exports=n)}(0)},6366:function(e,t,r){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var n=r(4699),i=r(9087),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return f(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw TypeError("Unknown encoding: "+t);var r=0|p(e,t),n=a(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(N(e,Uint8Array)){var t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return l(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(N(e,ArrayBuffer)||e&&N(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(N(e,SharedArrayBuffer)||e&&N(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,r);var i=function(e){if(o.isBuffer(e)){var t,r=0|d(e.length),n=a(r);return 0===n.length||e.copy(n,0,0,r),n}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?a(0):l(e):"Buffer"===e.type&&Array.isArray(e.data)?l(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return c(e),a(e<0?0:0|d(e))}function l(e){for(var t=e.length<0?0:0|d(e.length),r=a(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.prototype),n}function d(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||N(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return A(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return T(e).length;default:if(i)return n?-1:A(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,r){var i,s,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=O[e[s]];return i}(this,t,r);case"utf8":case"utf-8":return w(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return i=t,s=r,0===i&&s===this.length?n.fromByteArray(this):n.fromByteArray(this.slice(i,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}(this,t,r);default:if(a)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){var s;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(s=r=+r)!=s&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,i);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function m(e,t,r,n,i){var s,a=1,o=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;a=2,o/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var f=-1;for(s=r;s<o;s++)if(c(e,s)===c(t,-1===f?0:s-f)){if(-1===f&&(f=s),s-f+1===u)return f*a}else -1!==f&&(s-=s-f),f=-1}else for(r+u>o&&(r=o-u),s=r;s>=0;s--){for(var l=!0,h=0;h<u;h++)if(c(e,s+h)!==c(t,h)){l=!1;break}if(l)return s}return -1}function w(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,a,o,u,c=e[i],f=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=r)switch(l){case 1:c<128&&(f=c);break;case 2:(192&(s=e[i+1]))==128&&(u=(31&c)<<6|63&s)>127&&(f=u);break;case 3:s=e[i+1],a=e[i+2],(192&s)==128&&(192&a)==128&&(u=(15&c)<<12|(63&s)<<6|63&a)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:s=e[i+1],a=e[i+2],o=e[i+3],(192&s)==128&&(192&a)==128&&(192&o)==128&&(u=(15&c)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=l}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function v(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function E(e,t,r,n,i,s){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function _(e,t,r,n,i,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function B(e,t,r,n,s){return t=+t,r>>>=0,s||_(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function I(e,t,r,n,s){return t=+t,r>>>=0,s||_(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=2147483647,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return(c(e),e<=0)?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)},o.allocUnsafe=function(e){return f(e)},o.allocUnsafeSlow=function(e){return f(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(N(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),N(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(N(s,Uint8Array))i+s.length>n.length?o.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else if(o.isBuffer(s))s.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=s.length}return n},o.byteLength=p,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?w(this,0,e):y.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(e,t,r,n,i){if(N(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var s=i-n,a=r-t,u=Math.min(s,a),c=this.slice(n,i),f=e.slice(t,r),l=0;l<u;++l)if(c[l]!==f[l]){s=c[l],a=f[l];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,s,a,o,u,c,f,l,h=this.length-t;if((void 0===r||r>h)&&(r=h),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var d=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;n>s/2&&(n=s/2);for(var a=0;a<n;++a){var o=parseInt(t.substr(2*a,2),16);if(o!=o)break;e[r+a]=o}return a}(this,e,t,r);case"utf8":case"utf-8":return i=t,s=r,S(A(e,this.length-i),this,i,s);case"ascii":case"latin1":case"binary":return a=t,o=r,S(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,a,o);case"base64":return u=t,c=r,S(T(e),this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f=t,l=r,S(function(e,t){for(var r,n,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}(e,this.length-f),this,f,l);default:if(d)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),d=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},o.prototype.readInt8=function(e,t){return(e>>>=0,t||v(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),i.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),i.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),i.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),i.read(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;E(this,e,t,r,i,0)}var s=1,a=0;for(this[t]=255&e;++a<r&&(s*=256);)this[t+a]=e/s&255;return t+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;E(this,e,t,r,i,0)}var s=r-1,a=1;for(this[t+s]=255&e;--s>=0&&(a*=256);)this[t+s]=e/a&255;return t+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);E(this,e,t,r,i-1,-i)}var s=0,a=1,o=0;for(this[t]=255&e;++s<r&&(a*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);E(this,e,t,r,i-1,-i)}var s=r-1,a=1,o=0;for(this[t+s]=255&e;--s>=0&&(a*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return I(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return I(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var i,s=e.charCodeAt(0);("utf8"===n&&s<128||"latin1"===n)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=o.isBuffer(e)?e:o.from(e,n),u=a.length;if(0===u)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=a[i%u]}return this};var x=/[^+/0-9A-Za-z-_]/g;function A(e,t){t=t||1/0;for(var r,n=e.length,i=null,s=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319||a+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function T(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(x,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function S(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function N(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var O=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},7135:function(e,t,r){"use strict";let n=r(5209).BigNumber;t.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},t.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},t.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},t.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},t.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},t.SHIFT32=4294967296,t.SHIFT16=65536,t.MAX_SAFE_HIGH=2097151,t.NEG_ONE=new n(-1),t.TEN=new n(10),t.TWO=new n(2),t.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5}},5487:function(e){e.exports=function(e,t,r){"use asm";var n=new e.Uint8Array(r);var i=t.pushInt;var s=t.pushInt32;var a=t.pushInt32Neg;var o=t.pushInt64;var u=t.pushInt64Neg;var c=t.pushFloat;var f=t.pushFloatSingle;var l=t.pushFloatDouble;var h=t.pushTrue;var d=t.pushFalse;var p=t.pushUndefined;var y=t.pushNull;var g=t.pushInfinity;var b=t.pushInfinityNeg;var m=t.pushNaN;var w=t.pushNaNNeg;var v=t.pushArrayStart;var E=t.pushArrayStartFixed;var _=t.pushArrayStartFixed32;var B=t.pushArrayStartFixed64;var I=t.pushObjectStart;var x=t.pushObjectStartFixed;var A=t.pushObjectStartFixed32;var T=t.pushObjectStartFixed64;var S=t.pushByteString;var N=t.pushByteStringStart;var O=t.pushUtf8String;var R=t.pushUtf8StringStart;var U=t.pushSimpleUnassigned;var P=t.pushTagStart;var L=t.pushTagStart4;var k=t.pushTagStart8;var F=t.pushTagUnassigned;var j=t.pushBreak;var C=e.Math.pow;var D=0;var M=0;var V=0;function q(e){e=e|0;D=0;M=e;while((D|0)<(M|0)){V=eY[n[D]&255](n[D]|0)|0;if((V|0)>0)break}return V|0}function $(e){e=e|0;if(((D|0)+(e|0)|0)<(M|0))return 0;return 1}function z(e){e=e|0;return n[e|0]<<8|n[e+1|0]|0}function H(e){e=e|0;return n[e|0]<<24|n[e+1|0]<<16|n[e+2|0]<<8|n[e+3|0]|0}function K(e){e=e|0;i(e|0);D=D+1|0;return 0}function G(e){e=e|0;if($(1)|0)return 1;i(n[D+1|0]|0);D=D+2|0;return 0}function W(e){e=e|0;if($(2)|0)return 1;i(z(D+1|0)|0);D=D+3|0;return 0}function Z(e){e=e|0;if($(4)|0)return 1;s(z(D+1|0)|0,z(D+3|0)|0);D=D+5|0;return 0}function Y(e){e=e|0;if($(8)|0)return 1;o(z(D+1|0)|0,z(D+3|0)|0,z(D+5|0)|0,z(D+7|0)|0);D=D+9|0;return 0}function J(e){e=e|0;i(-1-(e-32|0)|0);D=D+1|0;return 0}function Q(e){e=e|0;if($(1)|0)return 1;i(-1-(n[D+1|0]|0)|0);D=D+2|0;return 0}function X(e){e=e|0;var t=0;if($(2)|0)return 1;t=z(D+1|0)|0;i(-1-(t|0)|0);D=D+3|0;return 0}function ee(e){e=e|0;if($(4)|0)return 1;a(z(D+1|0)|0,z(D+3|0)|0);D=D+5|0;return 0}function et(e){e=e|0;if($(8)|0)return 1;u(z(D+1|0)|0,z(D+3|0)|0,z(D+5|0)|0,z(D+7|0)|0);D=D+9|0;return 0}function er(e){e=e|0;var t=0;var r=0;var n=0;n=e-64|0;if($(n|0)|0)return 1;t=D+1|0;r=(D+1|0)+(n|0)|0;S(t|0,r|0);D=r|0;return 0}function en(e){e=e|0;var t=0;var r=0;var i=0;if($(1)|0)return 1;i=n[D+1|0]|0;t=D+2|0;r=(D+2|0)+(i|0)|0;if($(i+1|0)|0)return 1;S(t|0,r|0);D=r|0;return 0}function ei(e){e=e|0;var t=0;var r=0;var n=0;if($(2)|0)return 1;n=z(D+1|0)|0;t=D+3|0;r=(D+3|0)+(n|0)|0;if($(n+2|0)|0)return 1;S(t|0,r|0);D=r|0;return 0}function es(e){e=e|0;var t=0;var r=0;var n=0;if($(4)|0)return 1;n=H(D+1|0)|0;t=D+5|0;r=(D+5|0)+(n|0)|0;if($(n+4|0)|0)return 1;S(t|0,r|0);D=r|0;return 0}function ea(e){e=e|0;return 1}function eo(e){e=e|0;N();D=D+1|0;return 0}function eu(e){e=e|0;var t=0;var r=0;var n=0;n=e-96|0;if($(n|0)|0)return 1;t=D+1|0;r=(D+1|0)+(n|0)|0;O(t|0,r|0);D=r|0;return 0}function ec(e){e=e|0;var t=0;var r=0;var i=0;if($(1)|0)return 1;i=n[D+1|0]|0;t=D+2|0;r=(D+2|0)+(i|0)|0;if($(i+1|0)|0)return 1;O(t|0,r|0);D=r|0;return 0}function ef(e){e=e|0;var t=0;var r=0;var n=0;if($(2)|0)return 1;n=z(D+1|0)|0;t=D+3|0;r=(D+3|0)+(n|0)|0;if($(n+2|0)|0)return 1;O(t|0,r|0);D=r|0;return 0}function el(e){e=e|0;var t=0;var r=0;var n=0;if($(4)|0)return 1;n=H(D+1|0)|0;t=D+5|0;r=(D+5|0)+(n|0)|0;if($(n+4|0)|0)return 1;O(t|0,r|0);D=r|0;return 0}function eh(e){e=e|0;return 1}function ed(e){e=e|0;R();D=D+1|0;return 0}function ep(e){e=e|0;E(e-128|0);D=D+1|0;return 0}function ey(e){e=e|0;if($(1)|0)return 1;E(n[D+1|0]|0);D=D+2|0;return 0}function eg(e){e=e|0;if($(2)|0)return 1;E(z(D+1|0)|0);D=D+3|0;return 0}function eb(e){e=e|0;if($(4)|0)return 1;_(z(D+1|0)|0,z(D+3|0)|0);D=D+5|0;return 0}function em(e){e=e|0;if($(8)|0)return 1;B(z(D+1|0)|0,z(D+3|0)|0,z(D+5|0)|0,z(D+7|0)|0);D=D+9|0;return 0}function ew(e){e=e|0;v();D=D+1|0;return 0}function ev(e){e=e|0;var t=0;t=e-160|0;if($(t|0)|0)return 1;x(t|0);D=D+1|0;return 0}function eE(e){e=e|0;if($(1)|0)return 1;x(n[D+1|0]|0);D=D+2|0;return 0}function e_(e){e=e|0;if($(2)|0)return 1;x(z(D+1|0)|0);D=D+3|0;return 0}function eB(e){e=e|0;if($(4)|0)return 1;A(z(D+1|0)|0,z(D+3|0)|0);D=D+5|0;return 0}function eI(e){e=e|0;if($(8)|0)return 1;T(z(D+1|0)|0,z(D+3|0)|0,z(D+5|0)|0,z(D+7|0)|0);D=D+9|0;return 0}function ex(e){e=e|0;I();D=D+1|0;return 0}function eA(e){e=e|0;P(e-192|0);D=D+1|0;return 0}function eT(e){e=e|0;P(e|0);D=D+1|0;return 0}function eS(e){e=e|0;P(e|0);D=D+1|0;return 0}function eN(e){e=e|0;P(e|0);D=D+1|0;return 0}function eO(e){e=e|0;P(e|0);D=D+1|0;return 0}function eR(e){e=e|0;P(e-192|0);D=D+1|0;return 0}function eU(e){e=e|0;P(e|0);D=D+1|0;return 0}function eP(e){e=e|0;P(e|0);D=D+1|0;return 0}function eL(e){e=e|0;P(e|0);D=D+1|0;return 0}function ek(e){e=e|0;if($(1)|0)return 1;P(n[D+1|0]|0);D=D+2|0;return 0}function eF(e){e=e|0;if($(2)|0)return 1;P(z(D+1|0)|0);D=D+3|0;return 0}function ej(e){e=e|0;if($(4)|0)return 1;L(z(D+1|0)|0,z(D+3|0)|0);D=D+5|0;return 0}function eC(e){e=e|0;if($(8)|0)return 1;k(z(D+1|0)|0,z(D+3|0)|0,z(D+5|0)|0,z(D+7|0)|0);D=D+9|0;return 0}function eD(e){e=e|0;U((e|0)-224|0);D=D+1|0;return 0}function eM(e){e=e|0;d();D=D+1|0;return 0}function eV(e){e=e|0;h();D=D+1|0;return 0}function eq(e){e=e|0;y();D=D+1|0;return 0}function e$(e){e=e|0;p();D=D+1|0;return 0}function ez(e){e=e|0;if($(1)|0)return 1;U(n[D+1|0]|0);D=D+2|0;return 0}function eH(e){e=e|0;var t=0;var r=0;var i=1;var s=0;var a=0;var o=0;if($(2)|0)return 1;t=n[D+1|0]|0;r=n[D+2|0]|0;if((t|0)&128)i=-1;s=+(((t|0)&124)>>2);a=+(((t|0)&3)<<8|r);if(+s==0)c(+(+i*5960464477539063e-23*+a));else if(+s==31){if(+i==1){if(+a>0)m();else g()}else if(+a>0)w();else b()}else c(+(+i*C(2,+(+s-25))*+(1024+a)));D=D+3|0;return 0}function eK(e){e=e|0;if($(4)|0)return 1;f(n[D+1|0]|0,n[D+2|0]|0,n[D+3|0]|0,n[D+4|0]|0);D=D+5|0;return 0}function eG(e){e=e|0;if($(8)|0)return 1;l(n[D+1|0]|0,n[D+2|0]|0,n[D+3|0]|0,n[D+4|0]|0,n[D+5|0]|0,n[D+6|0]|0,n[D+7|0]|0,n[D+8|0]|0);D=D+9|0;return 0}function eW(e){e=e|0;return 1}function eZ(e){e=e|0;j();D=D+1|0;return 0}var eY=[K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,G,W,Z,Y,eW,eW,eW,eW,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,Q,X,ee,et,eW,eW,eW,eW,er,er,er,er,er,er,er,er,er,er,er,er,er,er,er,er,er,er,er,er,er,er,er,er,en,ei,es,ea,eW,eW,eW,eo,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,eu,ec,ef,el,eh,eW,eW,eW,ed,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ep,ey,eg,eb,em,eW,eW,eW,ew,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,ev,eE,e_,eB,eI,eW,eW,eW,ex,eA,eA,eA,eA,eA,eA,eR,eR,eR,eR,eR,eR,eR,eR,eR,eR,eR,eR,eR,eR,eR,eR,eR,eR,ek,eF,ej,eC,eW,eW,eW,eW,eD,eD,eD,eD,eD,eD,eD,eD,eD,eD,eD,eD,eD,eD,eD,eD,eD,eD,eD,eD,eM,eV,eq,e$,ez,eH,eK,eG,eW,eW,eW,eZ];return{parse:q}}},9152:function(e,t,r){"use strict";let{Buffer:n}=r(6366),i=r(9087),s=r(5209).BigNumber,a=r(5487),o=r(881),u=r(7135),c=r(9729),f=r(2066),{URL:l}=r(2543);class h{constructor(e){!(e=e||{}).size||e.size<65536?e.size=65536:e.size=o.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=n.from(this._heap),this._reset(),this._knownTags=Object.assign({0:e=>new Date(e),1:e=>new Date(1e3*e),2:e=>o.arrayBufferToBignumber(e),3:e=>u.NEG_ONE.minus(o.arrayBufferToBignumber(e)),4:e=>u.TEN.pow(e[0]).times(e[1]),5:e=>u.TWO.pow(e[0]).times(e[1]),32:e=>new l(e),35:e=>new RegExp(e)},e.tags),this.parser=a(r.g,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw Error(`Missing ${e.length} elements`);switch(e.type){case u.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case u.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case u.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case u.PARENT.MAP:if(e.values%2>0)throw Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case u.PARENT.OBJECT:if(e.values%2>0)throw Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case u.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length))}this._currentParent&&this._currentParent.type===u.PARENT.TAG&&this._dec()}_dec(){let e=this._currentParent;e.length<0||(e.length--,0===e.length&&this._closeParent())}_push(e,t){let r=this._currentParent;switch(r.values++,r.type){case u.PARENT.ARRAY:case u.PARENT.BYTE_STRING:case u.PARENT.UTF8_STRING:r.length>-1?this._ref[this._ref.length-r.length]=e:this._ref.push(e),this._dec();break;case u.PARENT.OBJECT:null!=r.tmpKey?(this._ref[r.tmpKey]=e,r.tmpKey=null,this._dec()):(r.tmpKey=e,"string"!=typeof r.tmpKey&&(r.type=u.PARENT.MAP,r.ref=o.buildMap(r.ref)));break;case u.PARENT.MAP:null!=r.tmpKey?(this._ref.set(r.tmpKey,e),r.tmpKey=null,this._dec()):r.tmpKey=e;break;case u.PARENT.TAG:this._ref.push(e),t||this._dec();break;default:throw Error("Unknown parent type")}}_createParent(e,t,r){this._parents[this._depth]={type:t,length:r,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:u.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,t){let r=this._knownTags[e];return r?r(t):new f(e,t)}createMap(e,t){return e}createObject(e,t){return e}createArray(e,t){return e}createByteString(e,t){return n.concat(e)}createByteStringFromHeap(e,t){return e===t?n.alloc(0):n.from(this._heap.slice(e,t))}createInt(e){return e}createInt32(e,t){return o.buildInt32(e,t)}createInt64(e,t,r,n){return o.buildInt64(e,t,r,n)}createFloat(e){return e}createFloatSingle(e,t,r,n){return i.read([e,t,r,n],0,!1,23,4)}createFloatDouble(e,t,r,n,s,a,o,u){return i.read([e,t,r,n,s,a,o,u],0,!1,52,8)}createInt32Neg(e,t){return -1-o.buildInt32(e,t)}createInt64Neg(e,t,r,n){let i=o.buildInt32(e,t),a=o.buildInt32(r,n);return i>u.MAX_SAFE_HIGH?u.NEG_ONE.minus(new s(i).times(u.SHIFT32).plus(a)):-1-(i*u.SHIFT32+a)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,t){return e.join("")}createUtf8StringFromHeap(e,t){return e===t?"":this._buffer.toString("utf8",e,t)}createSimpleUnassigned(e){return new c(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,t){this._push(this.createInt32(e,t))}pushInt64(e,t,r,n){this._push(this.createInt64(e,t,r,n))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,t,r,n){this._push(this.createFloatSingle(e,t,r,n))}pushFloatDouble(e,t,r,n,i,s,a,o){this._push(this.createFloatDouble(e,t,r,n,i,s,a,o))}pushInt32Neg(e,t){this._push(this.createInt32Neg(e,t))}pushInt64Neg(e,t,r,n){this._push(this.createInt64Neg(e,t,r,n))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],u.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,t){let r=o.buildInt32(e,t);this._createArrayStartFixed(r)}pushArrayStartFixed64(e,t,r,n){let i=o.buildInt64(e,t,r,n);this._createArrayStartFixed(i)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,t){let r=o.buildInt32(e,t);this._createObjectStartFixed(r)}pushObjectStartFixed64(e,t,r,n){let i=o.buildInt64(e,t,r,n);this._createObjectStartFixed(i)}pushByteStringStart(){this._parents[this._depth]={type:u.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,t){this._push(this.createByteStringFromHeap(e,t))}pushUtf8StringStart(){this._parents[this._depth]={type:u.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,t){this._push(this.createUtf8StringFromHeap(e,t))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:u.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,t){this.pushTagStart(o.buildInt32(e,t))}pushTagStart8(e,t,r,n){this.pushTagStart(o.buildInt64(e,t,r,n))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){if(0===e){this._push(this.createObject({}));return}this._createParent({},u.PARENT.OBJECT,e)}_createArrayStartFixed(e){if(0===e){this._push(this.createArray([]));return}this._createParent(Array(e),u.PARENT.ARRAY,e)}_decode(e){if(0===e.byteLength)throw Error("Input too short");this._reset(),this._heap8.set(e);let t=this.parser.parse(e.byteLength);if(this._depth>1){for(;0===this._currentParent.length;)this._closeParent();if(this._depth>1)throw Error("Undeterminated nesting")}if(t>0)throw Error("Failed to parse");if(0===this._res.length)throw Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,t){"string"==typeof e&&(e=n.from(e,t||"hex"));let r=new h({size:e.length});return r.decodeFirst(e)}static decodeAll(e,t){"string"==typeof e&&(e=n.from(e,t||"hex"));let r=new h({size:e.length});return r.decodeAll(e)}}h.decodeFirst=h.decode,e.exports=h},3225:function(e,t,r){"use strict";let{Buffer:n}=r(6366),i=r(9152),s=r(881);class a extends i{createTag(e,t){return`${e}(${t})`}createInt(e){return super.createInt(e).toString()}createInt32(e,t){return super.createInt32(e,t).toString()}createInt64(e,t,r,n){return super.createInt64(e,t,r,n).toString()}createInt32Neg(e,t){return super.createInt32Neg(e,t).toString()}createInt64Neg(e,t,r,n){return super.createInt64Neg(e,t,r,n).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){let t=super.createFloat(e);return s.isNegativeZero(e)?"-0_1":`${t}_1`}createFloatSingle(e,t,r,n){let i=super.createFloatSingle(e,t,r,n);return`${i}_2`}createFloatDouble(e,t,r,n,i,s,a,o){let u=super.createFloatDouble(e,t,r,n,i,s,a,o);return`${u}_3`}createByteString(e,t){let r=e.join(", ");return -1===t?`(_ ${r})`:`h'${r}`}createByteStringFromHeap(e,t){let r=n.from(super.createByteStringFromHeap(e,t)).toString("hex");return`h'${r}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,t){let r=super.createArray(e,t);return -1===t?`[_ ${r.join(", ")}]`:`[${r.join(", ")}]`}createMap(e,t){let r=super.createMap(e),n=Array.from(r.keys()).reduce(o(r),"");return -1===t?`{_ ${n}}`:`{${n}}`}createObject(e,t){let r=super.createObject(e),n=Object.keys(r).reduce(o(r),"");return -1===t?`{_ ${n}}`:`{${n}}`}createUtf8String(e,t){let r=e.join(", ");return -1===t?`(_ ${r})`:`"${r}"`}createUtf8StringFromHeap(e,t){let r=n.from(super.createUtf8StringFromHeap(e,t)).toString("utf8");return`"${r}"`}static diagnose(e,t){"string"==typeof e&&(e=n.from(e,t||"hex"));let r=new a;return r.decodeFirst(e)}}function o(e){return(t,r)=>t?`${t}, ${r}: ${e[r]}`:`${r}: ${e[r]}`}e.exports=a},7552:function(e,t,r){"use strict";let{Buffer:n}=r(6366),{URL:i}=r(2543),s=r(5209).BigNumber,a=r(881),o=r(7135),u=o.MT,c=o.NUMBYTES,f=o.SHIFT32,l=o.SYMS,h=o.TAG,d=o.MT.SIMPLE_FLOAT<<5|o.NUMBYTES.TWO,p=o.MT.SIMPLE_FLOAT<<5|o.NUMBYTES.FOUR,y=o.MT.SIMPLE_FLOAT<<5|o.NUMBYTES.EIGHT,g=o.MT.SIMPLE_FLOAT<<5|o.SIMPLE.TRUE,b=o.MT.SIMPLE_FLOAT<<5|o.SIMPLE.FALSE,m=o.MT.SIMPLE_FLOAT<<5|o.SIMPLE.UNDEFINED,w=o.MT.SIMPLE_FLOAT<<5|o.SIMPLE.NULL,v=new s("0x20000000000000"),E=n.from("f97e00","hex"),_=n.from("f9fc00","hex"),B=n.from("f97c00","hex");class I{constructor(e){e=e||{},this.streaming="function"==typeof e.stream,this.onData=e.stream,this.semanticTypes=[[i,this._pushUrl],[s,this._pushBigNumber]];let t=e.genTypes||[],r=t.length;for(let e=0;e<r;e++)this.addSemanticType(t[e][0],t[e][1]);this._reset()}addSemanticType(e,t){let r=this.semanticTypes.length;for(let n=0;n<r;n++){let r=this.semanticTypes[n][0];if(r===e){let e=this.semanticTypes[n][1];return this.semanticTypes[n][1]=t,e}}return this.semanticTypes.push([e,t]),null}push(e){return!e||(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize()),!0)}pushWrite(e,t,r){return this.result[this.offset]=e,this.resultMethod[this.offset]=t,this.resultLength[this.offset]=r,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(E)}_pushInfinity(e){let t=e<0?_:B;return this.push(t)}_pushFloat(e){let t=n.allocUnsafe(2);if(a.writeHalf(t,e)&&a.parseHalf(t)===e)return this._pushUInt8(d)&&this.push(t);let r=n.allocUnsafe(4);return(r.writeFloatBE(e,0),r.readFloatBE(0)===e)?this._pushUInt8(p)&&this.push(r):this._pushUInt8(y)&&this._pushDoubleBE(e)}_pushInt(e,t,r){let n=t<<5;return e<24?this._pushUInt8(n|e):e<=255?this._pushUInt8(n|c.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(n|c.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(n|c.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(n|c.EIGHT)&&this._pushUInt32BE(Math.floor(e/f))&&this._pushUInt32BE(e%f):t===u.NEG_INT?this._pushFloat(r):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,u.NEG_INT,e):this._pushInt(e,u.POS_INT)}_pushNumber(e){switch(!1){case e==e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!=0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){let t=n.byteLength(e,"utf8");return this._pushInt(t,u.UTF8_STRING)&&this.pushWrite(e,5,t)}_pushBoolean(e){return this._pushUInt8(e?g:b)}_pushUndefined(e){return this._pushUInt8(m)}_pushArray(e,t){let r=t.length;if(!e._pushInt(r,u.ARRAY))return!1;for(let n=0;n<r;n++)if(!e.pushAny(t[n]))return!1;return!0}_pushTag(e){return this._pushInt(e,u.TAG)}_pushDate(e,t){return e._pushTag(h.DATE_EPOCH)&&e.pushAny(Math.round(t/1e3))}_pushBuffer(e,t){return e._pushInt(t.length,u.BYTE_STRING)&&e.push(t)}_pushNoFilter(e,t){return e._pushBuffer(e,t.slice())}_pushRegexp(e,t){return e._pushTag(h.REGEXP)&&e.pushAny(t.source)}_pushSet(e,t){if(!e._pushInt(t.size,u.ARRAY))return!1;for(let r of t)if(!e.pushAny(r))return!1;return!0}_pushUrl(e,t){return e._pushTag(h.URI)&&e.pushAny(t.format())}_pushBigint(e){let t=h.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),t=h.NEG_BIGINT);let r=e.toString(16);r.length%2&&(r="0"+r);let i=n.from(r,"hex");return this._pushTag(t)&&this._pushBuffer(this,i)}_pushBigNumber(e,t){if(t.isNaN())return e._pushNaN();if(!t.isFinite())return e._pushInfinity(t.isNegative()?-1/0:1/0);if(t.isInteger())return e._pushBigint(t);if(!(e._pushTag(h.DECIMAL_FRAC)&&e._pushInt(2,u.ARRAY)))return!1;let r=t.decimalPlaces(),n=t.multipliedBy(new s(10).pow(r));return!!e._pushIntNum(-r)&&(n.abs().isLessThan(v)?e._pushIntNum(n.toNumber()):e._pushBigint(n))}_pushMap(e,t){return!!e._pushInt(t.size,u.MAP)&&this._pushRawMap(t.size,Array.from(t))}_pushObject(e){if(!e)return this._pushUInt8(w);for(var t=this.semanticTypes.length,r=0;r<t;r++)if(e instanceof this.semanticTypes[r][0])return this.semanticTypes[r][1].call(e,this,e);var n=e.encodeCBOR;if("function"==typeof n)return n.call(e,this);var i=Object.keys(e),s=i.length;return!!this._pushInt(s,u.MAP)&&this._pushRawMap(s,i.map(t=>[t,e[t]]))}_pushRawMap(e,t){t=t.map(function(e){return e[0]=I.encode(e[0]),e}).sort(a.keySorter);for(var r=0;r<e;r++)if(!this.push(t[r][0])||!this.pushAny(t[r][1]))return!1;return!0}write(e){return this.pushAny(e)}pushAny(e){switch(({}).toString.call(e).slice(8,-1)){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,n.isBuffer(e)?e:n.from(e));case"Null":return this._pushUInt8(w);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case l.NULL:return this._pushObject(null);case l.UNDEFINED:return this._pushUndefined(void 0);default:throw Error("Unknown symbol: "+e.toString())}default:throw Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(0===this.offset)return null;for(var e=this.result,t=this.resultLength,r=this.resultMethod,i=this.offset,s=0,a=0;a<i;a++)s+=t[a];var o=n.allocUnsafe(s),u=0,c=0;for(a=0;a<i;a++){switch(c=t[a],r[a]){case 0:e[a].copy(o,u);break;case 1:o.writeUInt8(e[a],u,!0);break;case 2:o.writeUInt16BE(e[a],u,!0);break;case 3:o.writeUInt32BE(e[a],u,!0);break;case 4:o.writeDoubleBE(e[a],u,!0);break;case 5:o.write(e[a],u,c,"utf8");break;default:throw Error("unkown method")}u+=c}return this._reset(),o}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){let t=new I,r=t.pushAny(e);if(!r)throw Error("Failed to encode input");return t.finalize()}}e.exports=I},8849:function(e,t,r){"use strict";t.Diagnose=r(3225),t.Decoder=r(9152),t.Encoder=r(7552),r(9729),t.Tagged=r(2066),t.Decoder.decodeAll,t.Decoder.decodeFirst,t.Diagnose.diagnose,t.Encoder.encode,t.Decoder.decode,t.Decoder.decodeAll,t.Encoder.encode},9729:function(e,t,r){"use strict";let n=r(7135),i=n.MT,s=n.SIMPLE,a=n.SYMS;class o{constructor(e){if("number"!=typeof e)throw Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(0|e)!==e)throw Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,i.SIMPLE_FLOAT)}static isSimple(e){return e instanceof o}static decode(e,t){switch(null==t&&(t=!0),e){case s.FALSE:return!1;case s.TRUE:return!0;case s.NULL:if(t)return null;return a.NULL;case s.UNDEFINED:if(t)return;return a.UNDEFINED;case -1:if(!t)throw Error("Invalid BREAK");return a.BREAK;default:return new o(e)}}}e.exports=o},2066:function(e){"use strict";class t{constructor(e,t,r){if(this.tag=e,this.value=t,this.err=r,"number"!=typeof this.tag)throw Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(0|this.tag)!==this.tag)throw Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var r;if("function"!=typeof(r=null!=e?e[this.tag]:void 0)&&"function"!=typeof(r=t["_tag"+this.tag]))return this;try{return r.call(t,this.value)}catch(e){return this.err=e,this}}}e.exports=t},881:function(e,t,r){"use strict";let{Buffer:n}=r(6366),i=r(5209).BigNumber,s=r(7135),a=s.SHIFT32,o=s.SHIFT16;t.parseHalf=function(e){var t,r,n;return(n=128&e[0]?-1:1,t=(124&e[0])>>2,r=(3&e[0])<<8|e[1],t)?31===t?n*(r?0/0:Infinity):n*Math.pow(2,t-25)*(1024+r):5960464477539063e-23*n*r},t.arrayBufferToBignumber=function(e){let t=e.byteLength,r="";for(let i=0;i<t;i++){var n;r+=(n=e[i])<16?"0"+n.toString(16):n.toString(16)}return new i(r,16)},t.buildMap=e=>{let t=new Map,r=Object.keys(e),n=r.length;for(let i=0;i<n;i++)t.set(r[i],e[r[i]]);return t},t.buildInt32=(e,t)=>e*o+t,t.buildInt64=(e,r,n,s)=>{let o=t.buildInt32(e,r),u=t.buildInt32(n,s);return o>2097151?new i(o).times(a).plus(u):o*a+u},t.writeHalf=function(e,t){let r=n.allocUnsafe(4);r.writeFloatBE(t,0);let i=r.readUInt32BE(0);if((8191&i)!=0)return!1;var s=i>>16&32768;let a=i>>23&255,o=8388607&i;if(a>=113&&a<=142)s+=(a-112<<10)+(o>>13);else{if(!(a>=103)||!(a<113)||o&(1<<126-a)-1)return!1;s+=o+8388608>>126-a}return e.writeUInt16BE(s,0),!0},t.keySorter=function(e,t){var r=e[0].byteLength,n=t[0].byteLength;return r>n?1:n>r?-1:e[0].compare(t[0])},t.isNegativeZero=e=>0===e&&1/e<0,t.nextPowerOf2=e=>{let t=0;if(e&&!(e&e-1))return e;for(;0!==e;)e>>=1,t+=1;return 1<<t}},7133:function(e,t,r){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */let n=r(4699),i=r(9087),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return f(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|p(e,t),n=a(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(j(e,Uint8Array)){let t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return l(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(j(e,SharedArrayBuffer)||e&&j(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,r);let i=function(e){var t;if(o.isBuffer(e)){let t=0|d(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?a(0):l(e):"Buffer"===e.type&&Array.isArray(e.data)?l(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return c(e),a(e<0?0:0|d(e))}function l(e){let t=e.length<0?0:0|d(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.prototype),n}function d(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return k(e).length;default:if(i)return n?-1:L(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,r){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=C[e[n]];return i}(this,t,r);case"utf8":case"utf-8":return w(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":var s,a;return s=t,a=r,0===s&&a===this.length?n.fromByteArray(this):n.fromByteArray(this.slice(s,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}(this,t,r);default:if(i)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function g(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){var s;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(s=r=+r)!=s&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,i);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function m(e,t,r,n,i){let s,a=1,o=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;a=2,o/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let n=-1;for(s=r;s<o;s++)if(c(e,s)===c(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===u)return n*a}else -1!==n&&(s-=s-n),n=-1}else for(r+u>o&&(r=o-u),s=r;s>=0;s--){let r=!0;for(let n=0;n<u;n++)if(c(e,s+n)!==c(t,n)){r=!1;break}if(r)return s}return -1}function w(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],s=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,o,u;switch(a){case 1:t<128&&(s=t);break;case 2:(192&(r=e[i+1]))==128&&(u=(31&t)<<6|63&r)>127&&(s=u);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(u=(15&t)<<12|(63&r)<<6|63&n)>2047&&(u<55296||u>57343)&&(s=u);break;case 4:r=e[i+1],n=e[i+2],o=e[i+3],(192&r)==128&&(192&n)==128&&(192&o)==128&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&o)>65535&&u<1114112&&(s=u)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function v(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function E(e,t,r,n,i,s){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function _(e,t,r,n,i){O(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function B(e,t,r,n,i){O(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function I(e,t,r,n,i,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function x(e,t,r,n,s){return t=+t,r>>>=0,s||I(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function A(e,t,r,n,s){return t=+t,r>>>=0,s||I(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}t.lW=o,t.h2=50,o.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return(c(e),e<=0)?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)},o.allocUnsafe=function(e){return f(e)},o.allocUnsafeSlow=function(e){return f(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(j(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(j(t,Uint8Array))i+t.length>n.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else if(o.isBuffer(t))t.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return n},o.byteLength=p,o.prototype._isBuffer=!0,o.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},o.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},o.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},o.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?w(this,0,e):y.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){let e="",r=t.h2;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(e,t,r,n,i){if(j(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let s=i-n,a=r-t,u=Math.min(s,a),c=this.slice(n,i),f=e.slice(t,r);for(let e=0;e<u;++e)if(c[e]!==f[e]){s=c[e],a=f[e];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){var i,s,a,o,u,c,f,l;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let h=this.length-t;if((void 0===r||r>h)&&(r=h),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let d=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let i;r=Number(r)||0;let s=e.length-r;n?(n=Number(n))>s&&(n=s):n=s;let a=t.length;for(n>a/2&&(n=a/2),i=0;i<n;++i){let n=parseInt(t.substr(2*i,2),16);if(n!=n)break;e[r+i]=n}return i}(this,e,t,r);case"utf8":case"utf-8":return i=t,s=r,F(L(e,this.length-i),this,i,s);case"ascii":case"latin1":case"binary":return a=t,o=r,F(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,a,o);case"base64":return u=t,c=r,F(k(e),this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f=t,l=r,F(function(e,t){let r,n;let i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}(e,this.length-f),this,f,l);default:if(d)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),d=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=D(function(e){R(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&U(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+16777216*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),o.prototype.readBigUInt64BE=D(function(e){R(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&U(e,this.length-8);let n=16777216*t+65536*this[++e]+256*this[++e]+this[++e],i=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},o.prototype.readInt8=function(e,t){return(e>>>=0,t||v(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=D(function(e){R(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&U(e,this.length-8);let n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),o.prototype.readBigInt64BE=D(function(e){R(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&U(e,this.length-8);let n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)}),o.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),i.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),i.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),i.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),i.read(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;E(this,e,t,r,n,0)}let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;E(this,e,t,r,n,0)}let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigUInt64LE=D(function(e,t=0){return _(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=D(function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);E(this,e,t,r,n-1,-n)}let i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);E(this,e,t,r,n-1,-n)}let i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigInt64LE=D(function(e,t=0){return _(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=D(function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return A(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return A(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},o.prototype.fill=function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let s=o.isBuffer(e)?e:o.from(e,n),a=s.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};let T={};function S(e,t,r){T[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function N(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function O(e,t,r,n,i,s){if(e>r||e<t){let n;let i="bigint"==typeof t?"n":"";throw n=s>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(s+1)*8}${i}`:`>= -(2${i} ** ${(s+1)*8-1}${i}) and < 2 ** ${(s+1)*8-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new T.ERR_OUT_OF_RANGE("value",n,e)}R(i,"offset"),(void 0===n[i]||void 0===n[i+s])&&U(i,n.length-(s+1))}function R(e,t){if("number"!=typeof e)throw new T.ERR_INVALID_ARG_TYPE(t,"number",e)}function U(e,t,r){if(Math.floor(e)!==e)throw R(e,r),new T.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new T.ERR_BUFFER_OUT_OF_BOUNDS;throw new T.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}S("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),S("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),S("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?i=N(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=N(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);let P=/[^+/0-9A-Za-z-_]/g;function L(e,t){let r;t=t||1/0;let n=e.length,i=null,s=[];for(let a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319||a+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function k(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(P,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let C=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function D(e){return"undefined"==typeof BigInt?M:e}function M(){throw Error("BigInt not supported")}},9087:function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(e,t,r,n,i){var s,a,o=8*i-n-1,u=(1<<o)-1,c=u>>1,f=-7,l=r?i-1:0,h=r?-1:1,d=e[t+l];for(l+=h,s=d&(1<<-f)-1,d>>=-f,f+=o;f>0;s=256*s+e[t+l],l+=h,f-=8);for(a=s&(1<<-f)-1,s>>=-f,f+=n;f>0;a=256*a+e[t+l],l+=h,f-=8);if(0===s)s=1-c;else{if(s===u)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,n),s-=c}return(d?-1:1)*a*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var a,o,u,c=8*s-i-1,f=(1<<c)-1,l=f>>1,h=23===i?5960464477539062e-23:0,d=n?0:s-1,p=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(o=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+l>=1?t+=h/u:t+=h*Math.pow(2,1-l),t*u>=2&&(a++,u/=2),a+l>=f?(o=0,a=f):a+l>=1?(o=(t*u-1)*Math.pow(2,i),a+=l):(o=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[r+d]=255&o,d+=p,o/=256,i-=8);for(a=a<<i|o,c+=i;c>0;e[r+d]=255&a,d+=p,a/=256,c-=8);e[r+d-p]|=128*y}},2543:function(e,t,r){"use strict";let{URLWithLegacySupport:n,format:i,URLSearchParams:s,defaultBase:a}=r(8608),o=r(6926);e.exports={URL:n,URLSearchParams:s,format:i,relative:o,defaultBase:a}},6926:function(e,t,r){"use strict";let{URLWithLegacySupport:n,format:i}=r(8608);e.exports=(e,t={},r={},s)=>{let a,o=t.protocol?t.protocol.replace(":",""):"http";o=(r[o]||s||o)+":";try{a=new n(e)}catch(e){a={}}let u=Object.assign({},t,{protocol:o||a.protocol,host:t.host||a.host});return new n(e,i(u)).toString()}},8608:function(e){"use strict";let t=self.location?self.location.protocol+"//"+self.location.host:"",r=self.URL;e.exports={URLWithLegacySupport:class{constructor(e="",n=t){this.super=new r(e,n),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:t,format:function(e){if("string"==typeof e){let t=new r(e);return t.toString()}if(!(e instanceof r)){let t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",i=e.protocol?e.protocol+"//":"",s=e.host||"",a=e.hostname||"",o=e.search||(e.query?"?"+e.query:""),u=e.hash||"",c=e.pathname||"",f=e.path||c+o;return`${i}${t||r}${s||a+n}${f}${u}`}}}},3715:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9185:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(4067));let i=n(r(2135));t.value=i},4067:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(2135)),s=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class a{constructor(e,t=!1){this._serializer=e,this._stable=t,this.name="jsonDefault",this.priority=-100}match(e){return -1!=["undefined","boolean","number","string","object"].indexOf(typeof e)}encode(e){switch(typeof e){case"undefined":return i.undefined_();case"boolean":return i.bool(e);case"number":if(Math.floor(e)===e)return i.number(e);return i.doubleFloat(e);case"string":return i.string(e);case"object":if(null===e)return i.null_();if(Array.isArray(e))return i.array(e.map(e=>this._serializer.serializeValue(e)));if(s.find(t=>e instanceof t))return i.bytes(e.buffer);if(-1!==Object.getOwnPropertyNames(e).indexOf("toJSON"))return this.encode(e.toJSON());else if(e instanceof Map){let t=new Map;for(let[r,n]of e.entries())t.set(r,this._serializer.serializeValue(n));return i.map(t,this._stable)}else{let t=new Map;for(let[r,n]of Object.entries(e))t.set(r,this._serializer.serializeValue(n));return i.map(t,this._stable)}default:throw Error("Invalid value.")}}}t.JsonDefaultCborEncoder=a;class o{constructor(){this.name="cborEncoder",this.priority=-90}match(e){return"object"==typeof e&&"function"==typeof e.toCBOR}encode(e){return e.toCBOR()}}t.ToCborEncoder=o;class u{constructor(){this._encoders=new Set}static withDefaultEncoders(e=!1){let t=new this;return t.addEncoder(new a(t,e)),t.addEncoder(new o),t}removeEncoder(e){for(let t of this._encoders.values())t.name==e&&this._encoders.delete(t)}addEncoder(e){this._encoders.add(e)}getEncoderFor(e){let t=null;for(let r of this._encoders)(!t||r.priority>t.priority)&&r.match(e)&&(t=r);if(null===t)throw Error("Could not find an encoder for value.");return t}serializeValue(e){return this.getEncoderFor(e).encode(e)}serialize(e){return this.serializeValue(e)}}t.CborSerializer=u,t.SelfDescribeCborSerializer=class extends u{serialize(e){return i.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(e))]))}}},2135:function(e,t){"use strict";function r(e,...t){let n=new Uint8Array(e.byteLength+t.reduce((e,t)=>e+t.byteLength,0));n.set(new Uint8Array(e),0);let i=e.byteLength;for(let e of t)n.set(new Uint8Array(e),i),i+=e.byteLength;return n.buffer}function n(e,t,r){r=r.replace(/[^0-9a-fA-F]/g,"");let n=2**(t-24);r=r.slice(-(2*n)).padStart(2*n,"0");let i=[(e<<5)+t].concat(r.match(/../g).map(e=>parseInt(e,16)));return new Uint8Array(i).buffer}function i(e,t){if(t<24)return new Uint8Array([(e<<5)+t]).buffer;{let r=t<=255?24:t<=65535?25:t<=4294967295?26:27;return n(e,r,t.toString(16))}}function s(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=(1023&n)<<10|1023&e.charCodeAt(r),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return r(new Uint8Array(i(3,e.length)),new Uint8Array(t))}function a(e){return new Uint8Array(e).buffer}function o(e){if(isNaN(e))throw RangeError("Invalid number.");e=Math.min(Math.max(0,e),23);let t=[0+e];return new Uint8Array(t).buffer}function u(e,t){if(isNaN(e=parseInt(""+e,t)))throw RangeError("Invalid number.");return n(0,24,e=(e=Math.min(Math.max(0,e),255)).toString(16))}function c(e,t){if(isNaN(e=parseInt(""+e,t)))throw RangeError("Invalid number.");return n(0,25,e=(e=Math.min(Math.max(0,e),65535)).toString(16))}function f(e,t){if(isNaN(e=parseInt(""+e,t)))throw RangeError("Invalid number.");return n(0,26,e=(e=Math.min(Math.max(0,e),4294967295)).toString(16))}function l(e,t){if("string"==typeof e&&16==t){if(e.match(/[^0-9a-fA-F]/))throw RangeError("Invalid number.");return n(0,27,e)}if(isNaN(e=parseInt(""+e,t)))throw RangeError("Invalid number.");return n(0,27,e=(e=Math.min(Math.max(0,e),9007199254740992)).toString(16))}function h(e){if(isNaN(e))throw RangeError("Invalid number.");if(0===e)return o(0);e=Math.min(Math.max(0,-e),24)-1;let t=[32+e];return new Uint8Array(t).buffer}function d(e,t){if(isNaN(e=parseInt(""+e,t)))throw RangeError("Invalid number.");return n(1,24,e=(e=Math.min(Math.max(0,-e-1),255)).toString(16))}function p(e,t){if(isNaN(e=parseInt(""+e,t)))throw RangeError("Invalid number.");return n(1,25,e=(e=Math.min(Math.max(0,-e-1),65535)).toString(16))}function y(e,t){if(isNaN(e=parseInt(""+e,t)))throw RangeError("Invalid number.");return n(1,26,e=(e=Math.min(Math.max(0,-e-1),4294967295)).toString(16))}function g(e,t){if("string"==typeof e&&16==t){if((e=e.startsWith("-")?e.slice(1):"0").match(/[^0-9a-fA-F]/)||e.length>16)throw RangeError("Invalid number.");let t=!1,r=e.split("").reduceRight((e,r)=>{if(t)return r+e;let n=parseInt(r,16)-1;return n>=0?(t=!0,n.toString(16)+e):"f"+e},"");return t?n(1,27,r):l(0)}if(isNaN(e=parseInt(""+e,t)))throw RangeError("Invalid number.");return n(1,27,e=(e=Math.min(Math.max(0,-e-1),9007199254740992)).toString(16))}function b(){return a(new Uint8Array([245]))}function m(){return a(new Uint8Array([244]))}Object.defineProperty(t,"__esModule",{value:!0}),t.tagged=function(e,t){if(14277111==e)return r(new Uint8Array([217,217,247]),t);if(e<24)return r(new Uint8Array([192+e]),t);{let t=e<=255?24:e<=65535?25:e<=4294967295?26:27,r=2**(t-24),n=e.toString(16).slice(-(2*r)).padStart(2*r,"0"),i=[192+t].concat(n.match(/../g).map(e=>parseInt(e,16)));return new Uint8Array(i).buffer}},t.raw=a,t.uSmall=o,t.u8=u,t.u16=c,t.u32=f,t.u64=l,t.iSmall=h,t.i8=d,t.i16=p,t.i32=y,t.i64=g,t.number=function(e){if(e>=0)return e<24?o(e):e<=255?u(e):e<=65535?c(e):e<=4294967295?f(e):l(e);return e>=-24?h(e):e>=-255?d(e):e>=-65535?p(e):e>=-4294967295?y(e):g(e)},t.bytes=function(e){return r(i(2,e.byteLength),e)},t.string=function(e){return s(e)},t.array=function(e){return r(i(4,e.length),...e)},t.map=function(e,t=!1){e instanceof Map||(e=new Map(Object.entries(e)));let n=Array.from(e.entries());return t&&(n=n.sort(([e],[t])=>e.localeCompare(t))),r(i(5,e.size),...n.map(([e,t])=>r(s(e),t)))},t.singleFloat=function(e){let t=new Float32Array([e]);return r(new Uint8Array([250]),new Uint8Array(t.buffer))},t.doubleFloat=function(e){let t=new Float64Array([e]);return r(new Uint8Array([251]),new Uint8Array(t.buffer))},t.bool=function(e){return e?b():m()},t.true_=b,t.false_=m,t.null_=function(){return a(new Uint8Array([246]))},t.undefined_=function(){return a(new Uint8Array([247]))}},3606:function(e,t,r){"use strict";r.d(t,{D1:function(){return p},Kd:function(){return y},Mx:function(){return d}});var n=r(2948),i=r(7843);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let s=BigInt(0),a=BigInt(1);function o(e,t){let r=t.negate();return e?r:t}function u(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function c(e,t){u(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1);return{windows:r,windowSize:n}}let f=new WeakMap,l=new WeakMap;function h(e){return l.get(e)||1}function d(e,t){return{constTimeNegate:o,hasPrecomputes:e=>1!==h(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>s;)r&a&&(n=n.add(i)),i=i.double(),r>>=a;return n},precomputeWindow(e,r){let{windows:n,windowSize:i}=c(r,t),s=[],a=e,o=a;for(let e=0;e<n;e++){o=a,s.push(o);for(let e=1;e<i;e++)o=o.add(a),s.push(o);a=o.double()}return s},wNAF(r,n,i){let{windows:s,windowSize:u}=c(r,t),f=e.ZERO,l=e.BASE,h=BigInt(2**r-1),d=2**r,p=BigInt(r);for(let e=0;e<s;e++){let t=e*u,r=Number(i&h);i>>=p,r>u&&(r-=d,i+=a);let s=t+Math.abs(r)-1,c=e%2!=0,y=r<0;0===r?l=l.add(o(c,n[t])):f=f.add(o(y,n[s]))}return{p:f,f:l}},wNAFUnsafe(r,n,i,o=e.ZERO){let{windows:u,windowSize:f}=c(r,t),l=BigInt(2**r-1),h=2**r,d=BigInt(r);for(let e=0;e<u;e++){let t=e*f;if(i===s)break;let r=Number(i&l);if(i>>=d,r>f&&(r-=h,i+=a),0===r)continue;let u=n[t+Math.abs(r)-1];r<0&&(u=u.negate()),o=o.add(u)}return o},getPrecomputes(e,t,r){let n=f.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&f.set(t,r(n))),n},wNAFCached(e,t,r){let n=h(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let i=h(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){u(r,t),l.set(e,r),f.delete(e)}}}function p(e,t,r,n){if(!function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),!function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(n,t),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let s=e.ZERO,a=(0,i.Dd)(BigInt(r.length)),o=a>12?a-3:a>4?a-2:a?2:1,u=(1<<o)-1,c=Array(u+1).fill(s),f=Math.floor((t.BITS-1)/o)*o,l=s;for(let e=f;e>=0;e-=o){c.fill(s);for(let t=0;t<n.length;t++){let i=n[t],s=Number(i>>BigInt(e)&BigInt(u));c[s]=c[s].add(r[t])}let t=s;for(let e=c.length-1,r=s;e>0;e--)r=r.add(c[e]),t=t.add(r);if(l=l.add(t),0!==e)for(let e=0;e<o;e++)l=l.double()}return l}function y(e){return(0,n.OP)(e.Fp),(0,i.FF)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.kK)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}},2948:function(e,t,r){"use strict";r.d(t,{Eg:function(){return m},IN:function(){return w},OP:function(){return g},PS:function(){return B},Q:function(){return b},Tu:function(){return p},Us:function(){return I},gN:function(){return E},kK:function(){return v},oA:function(){return h},wQ:function(){return l}});var n=r(7843);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let i=BigInt(0),s=BigInt(1),a=BigInt(2),o=BigInt(3),u=BigInt(4),c=BigInt(5),f=BigInt(8);function l(e,t){let r=e%t;return r>=i?r:t+r}function h(e,t,r){let n=e;for(;t-- >i;)n*=n,n%=r;return n}function d(e,t){if(e===i)throw Error("invert: expected non-zero number");if(t<=i)throw Error("invert: expected positive modulus, got "+t);let r=l(e,t),n=t,a=i,o=s,u=s,c=i;for(;r!==i;){let e=n/r,t=n%r,i=a-u*e,s=o-c*e;n=r,r=t,a=u,o=c,u=i,c=s}let f=n;if(f!==s)throw Error("invert: does not exist");return l(a,t)}let p=(e,t)=>(l(e,t)&s)===s,y=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function g(e){let t=y.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.FF)(e,t)}function b(e,t,r){if(r<i)throw Error("invalid exponent, negatives unsupported");if(r===i)return e.ONE;if(r===s)return t;let n=e.ONE,a=t;for(;r>i;)r&s&&(n=e.mul(n,a)),a=e.sqr(a),r>>=s;return n}function m(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r}function w(e){let t=(e-s)/a;return(e,r)=>e.pow(r,t)}function v(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function E(e,t,r=!1,h={}){let p;if(e<=i)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:y,nByteLength:g}=v(e,t);if(g>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let w=Object.freeze({ORDER:e,isLE:r,BITS:y,BYTES:g,MASK:(0,n.dQ)(y),ZERO:i,ONE:s,create:t=>l(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return i<=t&&t<e},is0:e=>e===i,isOdd:e=>(e&s)===s,neg:t=>l(-t,e),eql:(e,t)=>e===t,sqr:t=>l(t*t,e),add:(t,r)=>l(t+r,e),sub:(t,r)=>l(t-r,e),mul:(t,r)=>l(t*r,e),pow:(e,t)=>b(w,e,t),div:(t,r)=>l(t*d(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>d(t,e),sqrt:h.sqrt||(t=>(p||(p=function(e){if(e%u===o){let t=(e+s)/u;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%f===c){let t=(e-c)/f;return function(e,r){let n=e.mul(r,a),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,a),i),u=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(u),r))throw Error("Cannot find square root");return u}}return function(e){let t,r,n;let o=(e-s)/a;for(t=e-s,r=0;t%a===i;t/=a,r++);for(n=a;n<e&&function(e,t,r){if(t<i)throw Error("invalid exponent, negatives unsupported");if(r<=i)throw Error("invalid modulus");if(r===s)return i;let n=s;for(;t>i;)t&s&&(n=n*e%r),e=e*e%r,t>>=s;return n}(n,o,e)!==e-s;n++)if(n>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+s)/u;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let c=(t+s)/a;return function(e,i){if(e.pow(i,o)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,u=e.pow(e.mul(e.ONE,n),t),f=e.pow(i,c),l=e.pow(i,t);for(;!e.eql(l,e.ONE);){if(e.eql(l,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(l);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(u,s<<BigInt(a-t-1));u=e.sqr(r),f=e.mul(f,r),l=e.mul(l,u),a=t}return f}}(e)}(e)),p(w,t))),invertBatch:e=>m(w,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,n.S5)(e,g):(0,n.tL)(e,g),fromBytes:e=>{if(e.length!==g)throw Error("Field.fromBytes: expected "+g+" bytes, got "+e.length);return r?(0,n.ty)(e):(0,n.bytesToNumberBE)(e)}});return Object.freeze(w)}function _(e){if("bigint"!=typeof e)throw Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function B(e){let t=_(e);return t+Math.ceil(t/2)}function I(e,t,r=!1){let i=e.length,a=_(t),o=B(t);if(i<16||i<o||i>1024)throw Error("expected "+o+"-1024 bytes of input, got "+i);let u=r?(0,n.ty)(e):(0,n.bytesToNumberBE)(e),c=l(u,t-s)+s;return r?(0,n.S5)(c,a):(0,n.tL)(c,a)}},7843:function(e,t,r){"use strict";r.d(t,{Dd:function(){return A},EQ:function(){return R},FF:function(){return O},Fy:function(){return x},H9:function(){return U},H_:function(){return T},S5:function(){return w},Z2:function(){return I},_t:function(){return a},bytesToNumberBE:function(){return g},ci:function(){return f},dQ:function(){return S},eV:function(){return E},gk:function(){return o},hexToBytes:function(){return y},iY:function(){return _},ql:function(){return v},tL:function(){return m},ty:function(){return b},uw:function(){return u},uz:function(){return l}});/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let n=BigInt(0),i=BigInt(1),s=BigInt(2);function a(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function o(e){if(!a(e))throw Error("Uint8Array expected")}function u(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let c=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function f(e){o(e);let t="";for(let r=0;r<e.length;r++)t+=c[e[r]];return t}function l(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function h(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?n:BigInt("0x"+e)}let d={_0:48,_9:57,A:65,F:70,a:97,f:102};function p(e){return e>=d._0&&e<=d._9?e-d._0:e>=d.A&&e<=d.F?e-(d.A-10):e>=d.a&&e<=d.f?e-(d.a-10):void 0}function y(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=p(e.charCodeAt(i)),s=p(e.charCodeAt(i+1));if(void 0===r||void 0===s){let t=e[i]+e[i+1];throw Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function g(e){return h(f(e))}function b(e){return o(e),h(f(Uint8Array.from(e).reverse()))}function m(e,t){return y(e.toString(16).padStart(2*t,"0"))}function w(e,t){return m(e,t).reverse()}function v(e,t,r){let n;if("string"==typeof t)try{n=y(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(a(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let i=n.length;if("number"==typeof r&&i!==r)throw Error(e+" of length "+r+" expected, got "+i);return n}function E(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];o(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}function _(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}let B=e=>"bigint"==typeof e&&n<=e;function I(e,t,r){return B(e)&&B(t)&&B(r)&&t<=e&&e<r}function x(e,t,r,n){if(!I(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function A(e){let t;for(t=0;e>n;e>>=i,t+=1);return t}function T(e,t){return e>>BigInt(t)&i}let S=e=>(s<<BigInt(e-1))-i,N={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||a(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function O(e,t,r={}){let n=(t,r,n)=>{let i=N[r];if("function"!=typeof i)throw Error("invalid validator function");let s=e[t];if((!n||void 0!==s)&&!i(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}let R=()=>{throw Error("not implemented")};function U(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let s=e(r,...n);return t.set(r,s),s}}},7815:function(e,t,r){"use strict";r.d(t,{UN:function(){return P}});var n=r(8289);let i=BigInt(4294967296-1),s=BigInt(32);function a(e,t=!1){return t?{h:Number(e&i),l:Number(e>>s&i)}:{h:0|Number(e>>s&i),l:0|Number(e&i)}}var o={fromBig:a,split:function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:s,l:o}=a(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]},toBig:(e,t)=>BigInt(e>>>0)<<s|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:function(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/4294967296|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/4294967296|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/4294967296|0)|0,add5H:(e,t,r,n,i,s)=>t+r+n+i+s+(e/4294967296|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)},u=r(2305);let[c,f]=o.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),l=new Uint32Array(80),h=new Uint32Array(80);class d extends n.VR{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:a,Dl:o,Eh:u,El:c,Fh:f,Fl:l,Gh:h,Gl:d,Hh:p,Hl:y}=this;return[e,t,r,n,i,s,a,o,u,c,f,l,h,d,p,y]}set(e,t,r,n,i,s,a,o,u,c,f,l,h,d,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|u,this.El=0|c,this.Fh=0|f,this.Fl=0|l,this.Gh=0|h,this.Gl=0|d,this.Hh=0|p,this.Hl=0|y}process(e,t){for(let r=0;r<16;r++,t+=4)l[r]=e.getUint32(t),h[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|l[e-15],r=0|h[e-15],n=o.rotrSH(t,r,1)^o.rotrSH(t,r,8)^o.shrSH(t,r,7),i=o.rotrSL(t,r,1)^o.rotrSL(t,r,8)^o.shrSL(t,r,7),s=0|l[e-2],a=0|h[e-2],u=o.rotrSH(s,a,19)^o.rotrBH(s,a,61)^o.shrSH(s,a,6),c=o.rotrSL(s,a,19)^o.rotrBL(s,a,61)^o.shrSL(s,a,6),f=o.add4L(i,c,h[e-7],h[e-16]),d=o.add4H(f,n,u,l[e-7],l[e-16]);l[e]=0|d,h[e]=0|f}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:a,Cl:u,Dh:d,Dl:p,Eh:y,El:g,Fh:b,Fl:m,Gh:w,Gl:v,Hh:E,Hl:_}=this;for(let e=0;e<80;e++){let t=o.rotrSH(y,g,14)^o.rotrSH(y,g,18)^o.rotrBH(y,g,41),B=o.rotrSL(y,g,14)^o.rotrSL(y,g,18)^o.rotrBL(y,g,41),I=y&b^~y&w,x=g&m^~g&v,A=o.add5L(_,B,x,f[e],h[e]),T=o.add5H(A,E,t,I,c[e],l[e]),S=0|A,N=o.rotrSH(r,n,28)^o.rotrBH(r,n,34)^o.rotrBH(r,n,39),O=o.rotrSL(r,n,28)^o.rotrBL(r,n,34)^o.rotrBL(r,n,39),R=r&i^r&a^i&a,U=n&s^n&u^s&u;E=0|w,_=0|v,w=0|b,v=0|m,b=0|y,m=0|g,({h:y,l:g}=o.add(0|d,0|p,0|T,0|S)),d=0|a,p=0|u,a=0|i,u=0|s,i=0|r,s=0|n;let P=o.add3L(S,O,U);r=o.add3H(P,T,N,R),n=0|P}({h:r,l:n}=o.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=o.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:a,l:u}=o.add(0|this.Ch,0|this.Cl,0|a,0|u)),({h:d,l:p}=o.add(0|this.Dh,0|this.Dl,0|d,0|p)),({h:y,l:g}=o.add(0|this.Eh,0|this.El,0|y,0|g)),({h:b,l:m}=o.add(0|this.Fh,0|this.Fl,0|b,0|m)),({h:w,l:v}=o.add(0|this.Gh,0|this.Gl,0|w,0|v)),({h:E,l:_}=o.add(0|this.Hh,0|this.Hl,0|E,0|_)),this.set(r,n,i,s,a,u,d,p,y,g,b,m,w,v,E,_)}roundClean(){l.fill(0),h.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let p=(0,u.hE)(()=>new d);var y=r(3606),g=r(2948),b=r(7843);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let m=BigInt(0),w=BigInt(1),v=BigInt(2),E=BigInt(8),_={zip215:!0},B=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),I=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),x=BigInt(0),A=BigInt(1),T=BigInt(2);BigInt(3);let S=BigInt(5),N=BigInt(8);function O(e,t){let r=(0,g.wQ)(t*t*t,B),n=(0,g.wQ)(r*r*t,B),i=function(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=e*e%B,a=s*e%B,o=(0,g.oA)(a,T,B)*a%B,u=(0,g.oA)(o,A,B)*e%B,c=(0,g.oA)(u,S,B)*u%B,f=(0,g.oA)(c,t,B)*c%B,l=(0,g.oA)(f,r,B)*f%B,h=(0,g.oA)(l,n,B)*l%B,d=(0,g.oA)(h,i,B)*h%B,p=(0,g.oA)(d,i,B)*h%B,y=(0,g.oA)(p,t,B)*c%B,b=(0,g.oA)(y,T,B)*e%B;return{pow_p_5_8:b,b2:a}}(e*n).pow_p_5_8,s=(0,g.wQ)(e*r*i,B),a=(0,g.wQ)(t*s*s,B),o=s,u=(0,g.wQ)(s*I,B),c=a===e,f=a===(0,g.wQ)(-e,B),l=a===(0,g.wQ)(-e*I,B);return c&&(s=o),(f||l)&&(s=u),(0,g.Tu)(s,B)&&(s=(0,g.wQ)(-s,B)),{isValid:c||f,value:s}}let R=(0,g.gN)(B,void 0,!0),U={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:R,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:N,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:p,randomBytes:u.O6,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:O},P=function(e){let t=function(e){let t=(0,y.Kd)(e);return b.FF(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n:n,prehash:i,hash:s,randomBytes:a,nByteLength:o,h:u}=t,c=v<<BigInt(8*o)-w,f=r.create,l=(0,g.gN)(t.n,t.nBitLength),h=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(e){return{isValid:!1,value:m}}}),d=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,r)=>{if((0,b.uw)("phflag",r),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function B(e,t){b.Fy("coordinate "+e,t,m,c)}function I(e){if(!(e instanceof T))throw Error("ExtendedPoint expected")}let x=(0,b.H9)((e,t)=>{let{ex:n,ey:i,ez:s}=e,a=e.is0();null==t&&(t=a?E:r.inv(s));let o=f(n*t),u=f(i*t),c=f(s*t);if(a)return{x:m,y:w};if(c!==w)throw Error("invZ was invalid");return{x:o,y:u}}),A=(0,b.H9)(e=>{let{a:r,d:n}=t;if(e.is0())throw Error("bad point: ZERO");let{ex:i,ey:s,ez:a,et:o}=e,u=f(i*i),c=f(s*s),l=f(a*a),h=f(l*l),d=f(u*r),p=f(l*f(d+c)),y=f(h+f(n*f(u*c)));if(p!==y)throw Error("bad point: equation left != right (1)");let g=f(i*s),b=f(a*o);if(g!==b)throw Error("bad point: equation left != right (2)");return!0});class T{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,B("x",e),B("y",t),B("z",r),B("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof T)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return B("x",t),B("y",r),new T(t,r,w,f(t*r))}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.ez));return e.map((e,r)=>e.toAffine(t[r])).map(T.fromAffine)}static msm(e,t){return(0,y.D1)(T,l,e,t)}_setWindowSize(e){O.setWindowSize(this,e)}assertValidity(){A(this)}equals(e){I(e);let{ex:t,ey:r,ez:n}=this,{ex:i,ey:s,ez:a}=e,o=f(t*a),u=f(i*n),c=f(r*a),l=f(s*n);return o===u&&c===l}is0(){return this.equals(T.ZERO)}negate(){return new T(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){let{a:e}=t,{ex:r,ey:n,ez:i}=this,s=f(r*r),a=f(n*n),o=f(v*f(i*i)),u=f(e*s),c=r+n,l=f(f(c*c)-s-a),h=u+a,d=h-o,p=u-a,y=f(l*d),g=f(h*p),b=f(l*p),m=f(d*h);return new T(y,g,m,b)}add(e){I(e);let{a:r,d:n}=t,{ex:i,ey:s,ez:a,et:o}=this,{ex:u,ey:c,ez:l,et:h}=e;if(r===BigInt(-1)){let e=f((s-i)*(c+u)),t=f((s+i)*(c-u)),r=f(t-e);if(r===m)return this.double();let n=f(a*v*h),d=f(o*v*l),p=d+n,y=t+e,g=d-n,b=f(p*r),w=f(y*g),E=f(p*g),_=f(r*y);return new T(b,w,_,E)}let d=f(i*u),p=f(s*c),y=f(o*n*h),g=f(a*l),b=f((i+s)*(u+c)-d-p),w=g-y,E=g+y,_=f(p-r*d),B=f(b*w),x=f(E*_),A=f(b*_),S=f(w*E);return new T(B,x,S,A)}subtract(e){return this.add(e.negate())}wNAF(e){return O.wNAFCached(this,e,T.normalizeZ)}multiply(e){b.Fy("scalar",e,w,n);let{p:t,f:r}=this.wNAF(e);return T.normalizeZ([t,r])[0]}multiplyUnsafe(e,t=T.ZERO){return(b.Fy("scalar",e,m,n),e===m)?N:this.is0()||e===w?this:O.wNAFCachedUnsafe(this,e,T.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return O.unsafeLadder(this,n).is0()}toAffine(e){return x(this,e)}clearCofactor(){let{h:e}=t;return e===w?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){let{d:i,a:s}=t,a=r.BYTES;e=(0,b.ql)("pointHex",e,a),(0,b.uw)("zip215",n);let o=e.slice(),u=e[a-1];o[a-1]=-129&u;let l=b.ty(o),d=n?c:r.ORDER;b.Fy("pointHex.y",l,m,d);let p=f(l*l),y=f(p-w),g=f(i*p-s),{isValid:v,value:E}=h(y,g);if(!v)throw Error("Point.fromHex: invalid y coordinate");let _=(E&w)===w,B=(128&u)!=0;if(!n&&E===m&&B)throw Error("Point.fromHex: x=0 and x_0=1");return B!==_&&(E=f(-E)),T.fromAffine({x:E,y:l})}static fromPrivateKey(e){return U(e).point}toRawBytes(){let{x:e,y:t}=this.toAffine(),n=b.S5(t,r.BYTES);return n[n.length-1]|=e&w?128:0,n}toHex(){return b.ci(this.toRawBytes())}}T.BASE=new T(t.Gx,t.Gy,w,f(t.Gx*t.Gy)),T.ZERO=new T(m,w,w,m);let{BASE:S,ZERO:N}=T,O=(0,y.Mx)(T,8*o);function R(e){var t;return t=b.ty(e),(0,g.wQ)(t,n)}function U(e){let t=r.BYTES;e=(0,b.ql)("private key",e,t);let n=(0,b.ql)("hashed private key",s(e),2*t),i=d(n.slice(0,t)),a=n.slice(t,2*t),o=R(i),u=S.multiply(o),c=u.toRawBytes();return{head:i,prefix:a,scalar:o,point:u,pointBytes:c}}function P(e=new Uint8Array,...t){let r=b.eV(...t);return R(s(p(r,(0,b.ql)("context",e),!!i)))}return S._setWindowSize(8),{CURVE:t,getPublicKey:function(e){return U(e).pointBytes},sign:function(e,t,s={}){var a;e=(0,b.ql)("message",e),i&&(e=i(e));let{prefix:o,scalar:u,pointBytes:c}=U(t),f=P(s.context,o,e),l=S.multiply(f).toRawBytes(),h=P(s.context,l,c,e),d=(a=f+h*u,(0,g.wQ)(a,n));b.Fy("signature.s",d,m,n);let p=b.eV(l,b.S5(d,r.BYTES));return(0,b.ql)("result",p,2*r.BYTES)},verify:function(e,t,n,s=_){let a,o,u;let{context:c,zip215:f}=s,l=r.BYTES;e=(0,b.ql)("signature",e,2*l),t=(0,b.ql)("message",t),n=(0,b.ql)("publicKey",n,l),void 0!==f&&(0,b.uw)("zip215",f),i&&(t=i(t));let h=b.ty(e.slice(l,2*l));try{a=T.fromHex(n,f),o=T.fromHex(e.slice(0,l),f),u=S.multiplyUnsafe(h)}catch(e){return!1}if(!f&&a.isSmallOrder())return!1;let d=P(c,o.toRawBytes(),a.toRawBytes(),t),p=o.add(a.multiplyUnsafe(d));return p.subtract(u).clearCofactor().equals(T.ZERO)},ExtendedPoint:T,utils:{getExtendedPublicKey:U,randomPrivateKey:()=>a(r.BYTES),precompute:(e=8,t=T.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}(U);function L(e){if(!(e instanceof C))throw Error("RistrettoPoint expected")}let k=e=>O(A,e),F=e=>P.CURVE.Fp.create(null&bytesToNumberLE(e));function j(e){let{d:t}=P.CURVE,r=P.CURVE.Fp.ORDER,n=P.CURVE.Fp.create,i=n(null*e*e),s=n((i+A)*null),a=BigInt(-1),o=n((a-t*i)*n(i+t)),{isValid:u,value:c}=O(s,o),f=n(c*e);isNegativeLE(f,r)||(f=n(-f)),u||(c=f),u||(a=i);let l=n(a*(i-A)*null-o),h=c*c,d=n((c+c)*o),p=n(null*l),y=n(A-h),g=n(A+h);return new P.ExtendedPoint(n(d*g),n(y*p),n(p*g),n(d*y))}class C{constructor(e){this.ep=e}static fromAffine(e){return new C(P.ExtendedPoint.fromAffine(e))}static hashToCurve(e){e=ensureBytes("ristrettoHash",e,64);let t=F(e.slice(0,32)),r=j(t),n=F(e.slice(32,64)),i=j(n);return new C(r.add(i))}static fromHex(e){e=ensureBytes("ristrettoHex",e,32);let{a:t,d:r}=P.CURVE,n=P.CURVE.Fp.ORDER,i=P.CURVE.Fp.create,s="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",a=F(e);if(!equalBytes(numberToBytesLE(a,32),e)||isNegativeLE(a,n))throw Error(s);let o=i(a*a),u=i(A+t*o),c=i(A-t*o),f=i(u*u),l=i(c*c),h=i(t*r*f-l),{isValid:d,value:p}=k(i(h*l)),y=i(p*c),g=i(p*y*h),b=i((a+a)*y);isNegativeLE(b,n)&&(b=i(-b));let m=i(u*g),w=i(b*m);if(!d||isNegativeLE(w,n)||m===x)throw Error(s);return new C(new P.ExtendedPoint(b,m,A,w))}static msm(e,t){let r=Field(P.CURVE.n,P.CURVE.nBitLength);return pippenger(C,r,e,t)}toRawBytes(){let e,{ex:t,ey:r,ez:n,et:i}=this.ep,s=P.CURVE.Fp.ORDER,a=P.CURVE.Fp.create,o=a(a(n+r)*a(n-r)),u=a(t*r),c=a(u*u),{value:f}=k(a(o*c)),l=a(f*o),h=a(f*u),d=a(l*h*i);if(isNegativeLE(i*d,s)){let n=a(null*r),i=a(null*t);t=n,r=i,e=a(null*l)}else e=h;isNegativeLE(t*d,s)&&(r=a(-r));let p=a((n-r)*e);return isNegativeLE(p,s)&&(p=a(-p)),numberToBytesLE(p,32)}toHex(){return bytesToHex(this.toRawBytes())}toString(){return this.toHex()}equals(e){L(e);let{ex:t,ey:r}=this.ep,{ex:n,ey:i}=e.ep,s=P.CURVE.Fp.create,a=s(t*i)===s(r*n),o=s(r*i)===s(t*n);return a||o}add(e){return L(e),new C(this.ep.add(e.ep))}subtract(e){return L(e),new C(this.ep.subtract(e.ep))}multiply(e){return new C(this.ep.multiply(e))}multiplyUnsafe(e){return new C(this.ep.multiplyUnsafe(e))}double(){return new C(this.ep.double())}negate(){return new C(this.ep.negate())}}},5493:function(e,t,r){"use strict";function n(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function i(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function s(e,t){n(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{$h:function(){return i},eB:function(){return s},gk:function(){return n}})},8289:function(e,t,r){"use strict";r.d(t,{VR:function(){return o},bc:function(){return s},l3:function(){return a}});var n=r(5493),i=r(2305);function s(e,t,r){return e&t^~e&r}function a(e,t,r){return e&t^e&r^t&r}class o extends i.kb{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.GL)(this.buffer)}update(e){(0,n.$h)(this);let{view:t,buffer:r,blockLen:s}=this;e=(0,i.O0)(e);let a=e.length;for(let n=0;n<a;){let o=Math.min(s-this.pos,a-n);if(o===s){let t=(0,i.GL)(e);for(;s<=a-n;n+=s)this.process(t,n);continue}r.set(e.subarray(n,n+o),this.pos),this.pos+=o,n+=o,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.$h)(this),(0,n.eB)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:a}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let e=o;e<s;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),u=n?4:0,c=n?0:4;e.setUint32(t+u,a,n),e.setUint32(t+c,o,n)}(r,s-8,BigInt(8*this.length),a),this.process(r,0);let u=(0,i.GL)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let f=c/4,l=this.get();if(f>l.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<f;e++)u.setUint32(4*e,l[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;return e.length=n,e.pos=a,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}},9802:function(e,t,r){"use strict";r.d(t,{JQ:function(){return f},gX:function(){return l}});var n=r(8289),i=r(2305);let s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint32Array(64);class u extends n.VR{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)o[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=o[e-15],r=o[e-2],n=(0,i.np)(t,7)^(0,i.np)(t,18)^t>>>3,s=(0,i.np)(r,17)^(0,i.np)(r,19)^r>>>10;o[e]=s+o[e-7]+n+o[e-16]|0}let{A:r,B:a,C:u,D:c,E:f,F:l,G:h,H:d}=this;for(let e=0;e<64;e++){let t=(0,i.np)(f,6)^(0,i.np)(f,11)^(0,i.np)(f,25),p=d+t+(0,n.bc)(f,l,h)+s[e]+o[e]|0,y=(0,i.np)(r,2)^(0,i.np)(r,13)^(0,i.np)(r,22),g=y+(0,n.l3)(r,a,u)|0;d=h,h=l,l=f,f=c+p|0,c=u,u=a,a=r,r=p+g|0}r=r+this.A|0,a=a+this.B|0,u=u+this.C|0,c=c+this.D|0,f=f+this.E|0,l=l+this.F|0,h=h+this.G|0,d=d+this.H|0,this.set(r,a,u,c,f,l,h,d)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class c extends u{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}let f=(0,i.hE)(()=>new u),l=(0,i.hE)(()=>new c)},2305:function(e,t,r){"use strict";r.d(t,{kb:function(){return u},GL:function(){return s},O6:function(){return f},np:function(){return a},O0:function(){return o},hE:function(){return c}});let n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var i=r(5493);function s(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function a(e,t){return e<<32-t|e>>>t}function o(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),(0,i.gk)(e),e}class u{clone(){return this._cloneInto()}}function c(e){let t=t=>e().update(o(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function f(e=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));if(n&&"function"==typeof n.randomBytes)return n.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}}}]);